function Fk(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function tu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var f3={exports:{}},Pg={},d3={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),Uk=Symbol.for("react.fragment"),Vk=Symbol.for("react.strict_mode"),Wk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),$k=Symbol.for("react.context"),Gk=Symbol.for("react.forward_ref"),jk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),Gb=Symbol.iterator;function qk(n){return n===null||typeof n!="object"?null:(n=Gb&&n[Gb]||n["@@iterator"],typeof n=="function"?n:null)}var h3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p3=Object.assign,m3={};function nu(n,e,t){this.props=n,this.context=e,this.refs=m3,this.updater=t||h3}nu.prototype.isReactComponent={};nu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function g3(){}g3.prototype=nu.prototype;function u_(n,e,t){this.props=n,this.context=e,this.refs=m3,this.updater=t||h3}var f_=u_.prototype=new g3;f_.constructor=u_;p3(f_,nu.prototype);f_.isPureReactComponent=!0;var jb=Array.isArray,y3=Object.prototype.hasOwnProperty,d_={current:null},v3={key:!0,ref:!0,__self:!0,__source:!0};function x3(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)y3.call(e,i)&&!v3.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Ad,type:n,key:s,ref:o,props:r,_owner:d_.current}}function Zk(n,e){return{$$typeof:Ad,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function h_(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ad}function Kk(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Xb=/\/+/g;function Ty(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Kk(""+n.key):e.toString(36)}function hm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ad:case Bk:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Ty(o,0):i,jb(r)?(t="",n!=null&&(t=n.replace(Xb,"$&/")+"/"),hm(r,e,t,"",function(f){return f})):r!=null&&(h_(r)&&(r=Zk(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Xb,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",jb(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Ty(s,a);o+=hm(s,e,t,l,r)}else if(l=qk(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Ty(s,a++),o+=hm(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ep(n,e,t){if(n==null)return n;var i=[],r=0;return hm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Jk(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ei={current:null},pm={transition:null},Qk={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:pm,ReactCurrentOwner:d_};Ct.Children={map:ep,forEach:function(n,e,t){ep(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ep(n,function(){e++}),e},toArray:function(n){return ep(n,function(e){return e})||[]},only:function(n){if(!h_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ct.Component=nu;Ct.Fragment=Uk;Ct.Profiler=Wk;Ct.PureComponent=u_;Ct.StrictMode=Vk;Ct.Suspense=jk;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qk;Ct.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=p3({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=d_.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)y3.call(e,l)&&!v3.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:Ad,type:n.type,key:r,ref:s,props:i,_owner:o}};Ct.createContext=function(n){return n={$$typeof:$k,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Hk,_context:n},n.Consumer=n};Ct.createElement=x3;Ct.createFactory=function(n){var e=x3.bind(null,n);return e.type=n,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(n){return{$$typeof:Gk,render:n}};Ct.isValidElement=h_;Ct.lazy=function(n){return{$$typeof:Yk,_payload:{_status:-1,_result:n},_init:Jk}};Ct.memo=function(n,e){return{$$typeof:Xk,type:n,compare:e===void 0?null:e}};Ct.startTransition=function(n){var e=pm.transition;pm.transition={};try{n()}finally{pm.transition=e}};Ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ct.useCallback=function(n,e){return Ei.current.useCallback(n,e)};Ct.useContext=function(n){return Ei.current.useContext(n)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(n){return Ei.current.useDeferredValue(n)};Ct.useEffect=function(n,e){return Ei.current.useEffect(n,e)};Ct.useId=function(){return Ei.current.useId()};Ct.useImperativeHandle=function(n,e,t){return Ei.current.useImperativeHandle(n,e,t)};Ct.useInsertionEffect=function(n,e){return Ei.current.useInsertionEffect(n,e)};Ct.useLayoutEffect=function(n,e){return Ei.current.useLayoutEffect(n,e)};Ct.useMemo=function(n,e){return Ei.current.useMemo(n,e)};Ct.useReducer=function(n,e,t){return Ei.current.useReducer(n,e,t)};Ct.useRef=function(n){return Ei.current.useRef(n)};Ct.useState=function(n){return Ei.current.useState(n)};Ct.useSyncExternalStore=function(n,e,t){return Ei.current.useSyncExternalStore(n,e,t)};Ct.useTransition=function(){return Ei.current.useTransition()};Ct.version="18.2.0";d3.exports=Ct;var L=d3.exports;const H=tu(L),eD=Fk({__proto__:null,default:H},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD=L,nD=Symbol.for("react.element"),iD=Symbol.for("react.fragment"),rD=Object.prototype.hasOwnProperty,sD=tD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oD={key:!0,ref:!0,__self:!0,__source:!0};function _3(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)rD.call(e,i)&&!oD.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:nD,type:n,key:s,ref:o,props:r,_owner:sD.current}}Pg.Fragment=iD;Pg.jsx=_3;Pg.jsxs=_3;f3.exports=Pg;var p_=f3.exports;const ys=p_.Fragment,Ge=p_.jsx,hs=p_.jsxs;var tx={},w3={exports:{}},nr={},S3={exports:{}},b3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,Y){var Z=N.length;N.push(Y);e:for(;0<Z;){var j=Z-1>>>1,K=N[j];if(0<r(K,Y))N[j]=Y,N[Z]=K,Z=j;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var Y=N[0],Z=N.pop();if(Z!==Y){N[0]=Z;e:for(var j=0,K=N.length,ue=K>>>1;j<ue;){var ge=2*(j+1)-1,ve=N[ge],re=ge+1,ze=N[re];if(0>r(ve,Z))re<K&&0>r(ze,ve)?(N[j]=ze,N[re]=Z,j=re):(N[j]=ve,N[ge]=Z,j=ge);else if(re<K&&0>r(ze,Z))N[j]=ze,N[re]=Z,j=re;else break e}}return Y}function r(N,Y){var Z=N.sortIndex-Y.sortIndex;return Z!==0?Z:N.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],d=1,h=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var Y=t(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=N)i(f),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(f)}}function M(N){if(v=!1,b(N),!g)if(t(l)!==null)g=!0,ee(C);else{var Y=t(f);Y!==null&&oe(M,Y.startTime-N)}}function C(N,Y){g=!1,v&&(v=!1,_(T),T=-1),m=!0;var Z=p;try{for(b(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||N&&!O());){var j=h.callback;if(typeof j=="function"){h.callback=null,p=h.priorityLevel;var K=j(h.expirationTime<=Y);Y=n.unstable_now(),typeof K=="function"?h.callback=K:h===t(l)&&i(l),b(Y)}else i(l);h=t(l)}if(h!==null)var ue=!0;else{var ge=t(f);ge!==null&&oe(M,ge.startTime-Y),ue=!1}return ue}finally{h=null,p=Z,m=!1}}var A=!1,R=null,T=-1,D=5,k=-1;function O(){return!(n.unstable_now()-k<D)}function $(){if(R!==null){var N=n.unstable_now();k=N;var Y=!0;try{Y=R(!0,N)}finally{Y?W():(A=!1,R=null)}}else A=!1}var W;if(typeof w=="function")W=function(){w($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=$,W=function(){q.postMessage(null)}}else W=function(){x($,0)};function ee(N){R=N,A||(A=!0,W())}function oe(N,Y){T=x(function(){N(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,ee(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return N()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,Y){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Z=p;p=N;try{return Y()}finally{p=Z}},n.unstable_scheduleCallback=function(N,Y,Z){var j=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?j+Z:j):Z=j,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Z+K,N={id:d++,callback:Y,priorityLevel:N,startTime:Z,expirationTime:K,sortIndex:-1},Z>j?(N.sortIndex=Z,e(f,N),t(l)===null&&N===t(f)&&(v?(_(T),T=-1):v=!0,oe(M,Z-j))):(N.sortIndex=K,e(l,N),g||m||(g=!0,ee(C))),N},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(N){var Y=p;return function(){var Z=p;p=Y;try{return N.apply(this,arguments)}finally{p=Z}}}})(b3);S3.exports=b3;var aD=S3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M3=L,tr=aD;function be(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E3=new Set,Vf={};function xl(n,e){Uc(n,e),Uc(n+"Capture",e)}function Uc(n,e){for(Vf[n]=e,n=0;n<e.length;n++)E3.add(e[n])}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nx=Object.prototype.hasOwnProperty,lD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yb={},qb={};function cD(n){return nx.call(qb,n)?!0:nx.call(Yb,n)?!1:lD.test(n)?qb[n]=!0:(Yb[n]=!0,!1)}function uD(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function fD(n,e,t,i){if(e===null||typeof e>"u"||uD(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ti(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Kn[n]=new Ti(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Kn[e]=new Ti(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Kn[n]=new Ti(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Kn[n]=new Ti(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Kn[n]=new Ti(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Kn[n]=new Ti(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Kn[n]=new Ti(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Kn[n]=new Ti(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Kn[n]=new Ti(n,5,!1,n.toLowerCase(),null,!1,!1)});var m_=/[\-:]([a-z])/g;function g_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(m_,g_);Kn[e]=new Ti(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(m_,g_);Kn[e]=new Ti(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(m_,g_);Kn[e]=new Ti(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Kn[n]=new Ti(n,1,!1,n.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Kn[n]=new Ti(n,1,!1,n.toLowerCase(),null,!0,!0)});function y_(n,e,t,i){var r=Kn.hasOwnProperty(e)?Kn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fD(e,t,r,i)&&(t=null),i||r===null?cD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var uo=M3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tp=Symbol.for("react.element"),hc=Symbol.for("react.portal"),pc=Symbol.for("react.fragment"),v_=Symbol.for("react.strict_mode"),ix=Symbol.for("react.profiler"),T3=Symbol.for("react.provider"),C3=Symbol.for("react.context"),x_=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),sx=Symbol.for("react.suspense_list"),__=Symbol.for("react.memo"),Lo=Symbol.for("react.lazy"),A3=Symbol.for("react.offscreen"),Zb=Symbol.iterator;function Hu(n){return n===null||typeof n!="object"?null:(n=Zb&&n[Zb]||n["@@iterator"],typeof n=="function"?n:null)}var fn=Object.assign,Cy;function mf(n){if(Cy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Cy=e&&e[1]||""}return`
`+Cy+n}var Ay=!1;function Py(n,e){if(!n||Ay)return"";Ay=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ay=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mf(n):""}function dD(n){switch(n.tag){case 5:return mf(n.type);case 16:return mf("Lazy");case 13:return mf("Suspense");case 19:return mf("SuspenseList");case 0:case 2:case 15:return n=Py(n.type,!1),n;case 11:return n=Py(n.type.render,!1),n;case 1:return n=Py(n.type,!0),n;default:return""}}function ox(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pc:return"Fragment";case hc:return"Portal";case ix:return"Profiler";case v_:return"StrictMode";case rx:return"Suspense";case sx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case C3:return(n.displayName||"Context")+".Consumer";case T3:return(n._context.displayName||"Context")+".Provider";case x_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case __:return e=n.displayName||null,e!==null?e:ox(n.type)||"Memo";case Lo:e=n._payload,n=n._init;try{return ox(n(e))}catch{}}return null}function hD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ox(e);case 8:return e===v_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function P3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pD(n){var e=P3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function np(n){n._valueTracker||(n._valueTracker=pD(n))}function R3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=P3(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Nm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ax(n,e){var t=e.checked;return fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Kb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Yo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L3(n,e){e=e.checked,e!=null&&y_(n,"checked",e,!1)}function lx(n,e){L3(n,e);var t=Yo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?cx(n,e.type,t):e.hasOwnProperty("defaultValue")&&cx(n,e.type,Yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Jb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function cx(n,e,t){(e!=="number"||Nm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var gf=Array.isArray;function Lc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Yo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function ux(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Qb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(be(92));if(gf(t)){if(1<t.length)throw Error(be(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Yo(t)}}function I3(n,e){var t=Yo(e.value),i=Yo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function eM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function k3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fx(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?k3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ip,D3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ip=ip||document.createElement("div"),ip.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ip.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Sf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mD=["Webkit","ms","Moz","O"];Object.keys(Sf).forEach(function(n){mD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Sf[e]=Sf[n]})});function O3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sf.hasOwnProperty(n)&&Sf[n]?(""+e).trim():e+"px"}function N3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=O3(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var gD=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dx(n,e){if(e){if(gD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function hx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var px=null;function w_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mx=null,Ic=null,kc=null;function tM(n){if(n=Ld(n)){if(typeof mx!="function")throw Error(be(280));var e=n.stateNode;e&&(e=Dg(e),mx(n.stateNode,n.type,e))}}function z3(n){Ic?kc?kc.push(n):kc=[n]:Ic=n}function F3(){if(Ic){var n=Ic,e=kc;if(kc=Ic=null,tM(n),e)for(n=0;n<e.length;n++)tM(e[n])}}function B3(n,e){return n(e)}function U3(){}var Ry=!1;function V3(n,e,t){if(Ry)return n(e,t);Ry=!0;try{return B3(n,e,t)}finally{Ry=!1,(Ic!==null||kc!==null)&&(U3(),F3())}}function Hf(n,e){var t=n.stateNode;if(t===null)return null;var i=Dg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(be(231,e,typeof t));return t}var gx=!1;if(eo)try{var $u={};Object.defineProperty($u,"passive",{get:function(){gx=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{gx=!1}function yD(n,e,t,i,r,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(d){this.onError(d)}}var bf=!1,zm=null,Fm=!1,yx=null,vD={onError:function(n){bf=!0,zm=n}};function xD(n,e,t,i,r,s,o,a,l){bf=!1,zm=null,yD.apply(vD,arguments)}function _D(n,e,t,i,r,s,o,a,l){if(xD.apply(this,arguments),bf){if(bf){var f=zm;bf=!1,zm=null}else throw Error(be(198));Fm||(Fm=!0,yx=f)}}function _l(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function W3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function nM(n){if(_l(n)!==n)throw Error(be(188))}function wD(n){var e=n.alternate;if(!e){if(e=_l(n),e===null)throw Error(be(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return nM(r),n;if(s===i)return nM(r),e;s=s.sibling}throw Error(be(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(be(189))}}if(t.alternate!==i)throw Error(be(190))}if(t.tag!==3)throw Error(be(188));return t.stateNode.current===t?n:e}function H3(n){return n=wD(n),n!==null?$3(n):null}function $3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$3(n);if(e!==null)return e;n=n.sibling}return null}var G3=tr.unstable_scheduleCallback,iM=tr.unstable_cancelCallback,SD=tr.unstable_shouldYield,bD=tr.unstable_requestPaint,bn=tr.unstable_now,MD=tr.unstable_getCurrentPriorityLevel,S_=tr.unstable_ImmediatePriority,j3=tr.unstable_UserBlockingPriority,Bm=tr.unstable_NormalPriority,ED=tr.unstable_LowPriority,X3=tr.unstable_IdlePriority,Rg=null,cs=null;function TD(n){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Rg,n,void 0,(n.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:PD,CD=Math.log,AD=Math.LN2;function PD(n){return n>>>=0,n===0?32:31-(CD(n)/AD|0)|0}var rp=64,sp=4194304;function yf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Um(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=yf(a):(s&=o,s!==0&&(i=yf(s)))}else o=t&~r,o!==0?i=yf(o):s!==0&&(i=yf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Hr(e),r=1<<t,i|=n[t],e&=~r;return i}function RD(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LD(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Hr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=RD(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function vx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Y3(){var n=rp;return rp<<=1,!(rp&4194240)&&(rp=64),n}function Ly(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Pd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Hr(e),n[e]=t}function ID(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Hr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function b_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Hr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Vt=0;function q3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Z3,M_,K3,J3,Q3,xx=!1,op=[],Fo=null,Bo=null,Uo=null,$f=new Map,Gf=new Map,ko=[],kD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rM(n,e){switch(n){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":$f.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gf.delete(e.pointerId)}}function Gu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ld(e),e!==null&&M_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function DD(n,e,t,i,r){switch(e){case"focusin":return Fo=Gu(Fo,n,e,t,i,r),!0;case"dragenter":return Bo=Gu(Bo,n,e,t,i,r),!0;case"mouseover":return Uo=Gu(Uo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return $f.set(s,Gu($f.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Gf.set(s,Gu(Gf.get(s)||null,n,e,t,i,r)),!0}return!1}function eC(n){var e=Va(n.target);if(e!==null){var t=_l(e);if(t!==null){if(e=t.tag,e===13){if(e=W3(t),e!==null){n.blockedOn=e,Q3(n.priority,function(){K3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_x(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);px=i,t.target.dispatchEvent(i),px=null}else return e=Ld(t),e!==null&&M_(e),n.blockedOn=t,!1;e.shift()}return!0}function sM(n,e,t){mm(n)&&t.delete(e)}function OD(){xx=!1,Fo!==null&&mm(Fo)&&(Fo=null),Bo!==null&&mm(Bo)&&(Bo=null),Uo!==null&&mm(Uo)&&(Uo=null),$f.forEach(sM),Gf.forEach(sM)}function ju(n,e){n.blockedOn===e&&(n.blockedOn=null,xx||(xx=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,OD)))}function jf(n){function e(r){return ju(r,n)}if(0<op.length){ju(op[0],n);for(var t=1;t<op.length;t++){var i=op[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Fo!==null&&ju(Fo,n),Bo!==null&&ju(Bo,n),Uo!==null&&ju(Uo,n),$f.forEach(e),Gf.forEach(e),t=0;t<ko.length;t++)i=ko[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ko.length&&(t=ko[0],t.blockedOn===null);)eC(t),t.blockedOn===null&&ko.shift()}var Dc=uo.ReactCurrentBatchConfig,Vm=!0;function ND(n,e,t,i){var r=Vt,s=Dc.transition;Dc.transition=null;try{Vt=1,E_(n,e,t,i)}finally{Vt=r,Dc.transition=s}}function zD(n,e,t,i){var r=Vt,s=Dc.transition;Dc.transition=null;try{Vt=4,E_(n,e,t,i)}finally{Vt=r,Dc.transition=s}}function E_(n,e,t,i){if(Vm){var r=_x(n,e,t,i);if(r===null)Vy(n,e,i,Wm,t),rM(n,i);else if(DD(r,n,e,t,i))i.stopPropagation();else if(rM(n,i),e&4&&-1<kD.indexOf(n)){for(;r!==null;){var s=Ld(r);if(s!==null&&Z3(s),s=_x(n,e,t,i),s===null&&Vy(n,e,i,Wm,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Vy(n,e,i,null,t)}}var Wm=null;function _x(n,e,t,i){if(Wm=null,n=w_(i),n=Va(n),n!==null)if(e=_l(n),e===null)n=null;else if(t=e.tag,t===13){if(n=W3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wm=n,null}function tC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MD()){case S_:return 1;case j3:return 4;case Bm:case ED:return 16;case X3:return 536870912;default:return 16}default:return 16}}var Oo=null,T_=null,gm=null;function nC(){if(gm)return gm;var n,e=T_,t=e.length,i,r="value"in Oo?Oo.value:Oo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return gm=r.slice(n,1<i?1-i:void 0)}function ym(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ap(){return!0}function oM(){return!1}function ir(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ap:oM,this.isPropagationStopped=oM,this}return fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ap)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ap)},persist:function(){},isPersistent:ap}),e}var iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C_=ir(iu),Rd=fn({},iu,{view:0,detail:0}),FD=ir(Rd),Iy,ky,Xu,Lg=fn({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xu&&(Xu&&n.type==="mousemove"?(Iy=n.screenX-Xu.screenX,ky=n.screenY-Xu.screenY):ky=Iy=0,Xu=n),Iy)},movementY:function(n){return"movementY"in n?n.movementY:ky}}),aM=ir(Lg),BD=fn({},Lg,{dataTransfer:0}),UD=ir(BD),VD=fn({},Rd,{relatedTarget:0}),Dy=ir(VD),WD=fn({},iu,{animationName:0,elapsedTime:0,pseudoElement:0}),HD=ir(WD),$D=fn({},iu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),GD=ir($D),jD=fn({},iu,{data:0}),lM=ir(jD),XD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qD[n])?!!e[n]:!1}function A_(){return ZD}var KD=fn({},Rd,{key:function(n){if(n.key){var e=XD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ym(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?YD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A_,charCode:function(n){return n.type==="keypress"?ym(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ym(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JD=ir(KD),QD=fn({},Lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cM=ir(QD),eO=fn({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A_}),tO=ir(eO),nO=fn({},iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),iO=ir(nO),rO=fn({},Lg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sO=ir(rO),oO=[9,13,27,32],P_=eo&&"CompositionEvent"in window,Mf=null;eo&&"documentMode"in document&&(Mf=document.documentMode);var aO=eo&&"TextEvent"in window&&!Mf,iC=eo&&(!P_||Mf&&8<Mf&&11>=Mf),uM=String.fromCharCode(32),fM=!1;function rC(n,e){switch(n){case"keyup":return oO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mc=!1;function lO(n,e){switch(n){case"compositionend":return sC(e);case"keypress":return e.which!==32?null:(fM=!0,uM);case"textInput":return n=e.data,n===uM&&fM?null:n;default:return null}}function cO(n,e){if(mc)return n==="compositionend"||!P_&&rC(n,e)?(n=nC(),gm=T_=Oo=null,mc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iC&&e.locale!=="ko"?null:e.data;default:return null}}var uO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!uO[n.type]:e==="textarea"}function oC(n,e,t,i){z3(i),e=Hm(e,"onChange"),0<e.length&&(t=new C_("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ef=null,Xf=null;function fO(n){yC(n,0)}function Ig(n){var e=vc(n);if(R3(e))return n}function dO(n,e){if(n==="change")return e}var aC=!1;if(eo){var Oy;if(eo){var Ny="oninput"in document;if(!Ny){var hM=document.createElement("div");hM.setAttribute("oninput","return;"),Ny=typeof hM.oninput=="function"}Oy=Ny}else Oy=!1;aC=Oy&&(!document.documentMode||9<document.documentMode)}function pM(){Ef&&(Ef.detachEvent("onpropertychange",lC),Xf=Ef=null)}function lC(n){if(n.propertyName==="value"&&Ig(Xf)){var e=[];oC(e,Xf,n,w_(n)),V3(fO,e)}}function hO(n,e,t){n==="focusin"?(pM(),Ef=e,Xf=t,Ef.attachEvent("onpropertychange",lC)):n==="focusout"&&pM()}function pO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ig(Xf)}function mO(n,e){if(n==="click")return Ig(e)}function gO(n,e){if(n==="input"||n==="change")return Ig(e)}function yO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xr=typeof Object.is=="function"?Object.is:yO;function Yf(n,e){if(Xr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!nx.call(e,r)||!Xr(n[r],e[r]))return!1}return!0}function mM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gM(n,e){var t=mM(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=mM(t)}}function cC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?cC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function uC(){for(var n=window,e=Nm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Nm(n.document)}return e}function R_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vO(n){var e=uC(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&cC(t.ownerDocument.documentElement,t)){if(i!==null&&R_(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=gM(t,s);var o=gM(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xO=eo&&"documentMode"in document&&11>=document.documentMode,gc=null,wx=null,Tf=null,Sx=!1;function yM(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Sx||gc==null||gc!==Nm(i)||(i=gc,"selectionStart"in i&&R_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Tf&&Yf(Tf,i)||(Tf=i,i=Hm(wx,"onSelect"),0<i.length&&(e=new C_("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=gc)))}function lp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yc={animationend:lp("Animation","AnimationEnd"),animationiteration:lp("Animation","AnimationIteration"),animationstart:lp("Animation","AnimationStart"),transitionend:lp("Transition","TransitionEnd")},zy={},fC={};eo&&(fC=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function kg(n){if(zy[n])return zy[n];if(!yc[n])return n;var e=yc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fC)return zy[n]=e[t];return n}var dC=kg("animationend"),hC=kg("animationiteration"),pC=kg("animationstart"),mC=kg("transitionend"),gC=new Map,vM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(n,e){gC.set(n,e),xl(e,[n])}for(var Fy=0;Fy<vM.length;Fy++){var By=vM[Fy],_O=By.toLowerCase(),wO=By[0].toUpperCase()+By.slice(1);la(_O,"on"+wO)}la(dC,"onAnimationEnd");la(hC,"onAnimationIteration");la(pC,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(mC,"onTransitionEnd");Uc("onMouseEnter",["mouseout","mouseover"]);Uc("onMouseLeave",["mouseout","mouseover"]);Uc("onPointerEnter",["pointerout","pointerover"]);Uc("onPointerLeave",["pointerout","pointerover"]);xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SO=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function xM(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,_D(i,e,void 0,n),n.currentTarget=null}function yC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;xM(r,a,f),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;xM(r,a,f),s=l}}}if(Fm)throw n=yx,Fm=!1,yx=null,n}function Kt(n,e){var t=e[Cx];t===void 0&&(t=e[Cx]=new Set);var i=n+"__bubble";t.has(i)||(vC(e,n,2,!1),t.add(i))}function Uy(n,e,t){var i=0;e&&(i|=4),vC(t,n,i,e)}var cp="_reactListening"+Math.random().toString(36).slice(2);function qf(n){if(!n[cp]){n[cp]=!0,E3.forEach(function(t){t!=="selectionchange"&&(SO.has(t)||Uy(t,!1,n),Uy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[cp]||(e[cp]=!0,Uy("selectionchange",!1,e))}}function vC(n,e,t,i){switch(tC(e)){case 1:var r=ND;break;case 4:r=zD;break;default:r=E_}t=r.bind(null,e,t,n),r=void 0,!gx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Vy(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Va(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}V3(function(){var f=s,d=w_(t),h=[];e:{var p=gC.get(n);if(p!==void 0){var m=C_,g=n;switch(n){case"keypress":if(ym(t)===0)break e;case"keydown":case"keyup":m=JD;break;case"focusin":g="focus",m=Dy;break;case"focusout":g="blur",m=Dy;break;case"beforeblur":case"afterblur":m=Dy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=aM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=UD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=tO;break;case dC:case hC:case pC:m=HD;break;case mC:m=iO;break;case"scroll":m=FD;break;case"wheel":m=sO;break;case"copy":case"cut":case"paste":m=GD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cM}var v=(e&4)!==0,x=!v&&n==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var w=f,b;w!==null;){b=w;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,_!==null&&(M=Hf(w,_),M!=null&&v.push(Zf(w,M,b)))),x)break;w=w.return}0<v.length&&(p=new m(p,g,null,t,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==px&&(g=t.relatedTarget||t.fromElement)&&(Va(g)||g[to]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=f,g=g?Va(g):null,g!==null&&(x=_l(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=f),m!==g)){if(v=aM,M="onMouseLeave",_="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=cM,M="onPointerLeave",_="onPointerEnter",w="pointer"),x=m==null?p:vc(m),b=g==null?p:vc(g),p=new v(M,w+"leave",m,t,d),p.target=x,p.relatedTarget=b,M=null,Va(d)===f&&(v=new v(_,w+"enter",g,t,d),v.target=b,v.relatedTarget=x,M=v),x=M,m&&g)t:{for(v=m,_=g,w=0,b=v;b;b=Ul(b))w++;for(b=0,M=_;M;M=Ul(M))b++;for(;0<w-b;)v=Ul(v),w--;for(;0<b-w;)_=Ul(_),b--;for(;w--;){if(v===_||_!==null&&v===_.alternate)break t;v=Ul(v),_=Ul(_)}v=null}else v=null;m!==null&&_M(h,p,m,v,!1),g!==null&&x!==null&&_M(h,x,g,v,!0)}}e:{if(p=f?vc(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=dO;else if(dM(p))if(aC)C=gO;else{C=pO;var A=hO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=mO);if(C&&(C=C(n,f))){oC(h,C,t,d);break e}A&&A(n,p,f),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&cx(p,"number",p.value)}switch(A=f?vc(f):window,n){case"focusin":(dM(A)||A.contentEditable==="true")&&(gc=A,wx=f,Tf=null);break;case"focusout":Tf=wx=gc=null;break;case"mousedown":Sx=!0;break;case"contextmenu":case"mouseup":case"dragend":Sx=!1,yM(h,t,d);break;case"selectionchange":if(xO)break;case"keydown":case"keyup":yM(h,t,d)}var R;if(P_)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mc?rC(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(iC&&t.locale!=="ko"&&(mc||T!=="onCompositionStart"?T==="onCompositionEnd"&&mc&&(R=nC()):(Oo=d,T_="value"in Oo?Oo.value:Oo.textContent,mc=!0)),A=Hm(f,T),0<A.length&&(T=new lM(T,n,null,t,d),h.push({event:T,listeners:A}),R?T.data=R:(R=sC(t),R!==null&&(T.data=R)))),(R=aO?lO(n,t):cO(n,t))&&(f=Hm(f,"onBeforeInput"),0<f.length&&(d=new lM("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:f}),d.data=R))}yC(h,e)})}function Zf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Hm(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Hf(n,t),s!=null&&i.unshift(Zf(n,s,r)),s=Hf(n,e),s!=null&&i.push(Zf(n,s,r))),n=n.return}return i}function Ul(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _M(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&f!==null&&(a=f,r?(l=Hf(t,s),l!=null&&o.unshift(Zf(t,l,a))):r||(l=Hf(t,s),l!=null&&o.push(Zf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var bO=/\r\n?/g,MO=/\u0000|\uFFFD/g;function wM(n){return(typeof n=="string"?n:""+n).replace(bO,`
`).replace(MO,"")}function up(n,e,t){if(e=wM(e),wM(n)!==e&&t)throw Error(be(425))}function $m(){}var bx=null,Mx=null;function Ex(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tx=typeof setTimeout=="function"?setTimeout:void 0,EO=typeof clearTimeout=="function"?clearTimeout:void 0,SM=typeof Promise=="function"?Promise:void 0,TO=typeof queueMicrotask=="function"?queueMicrotask:typeof SM<"u"?function(n){return SM.resolve(null).then(n).catch(CO)}:Tx;function CO(n){setTimeout(function(){throw n})}function Wy(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),jf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);jf(e)}function Vo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function bM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ru=Math.random().toString(36).slice(2),ls="__reactFiber$"+ru,Kf="__reactProps$"+ru,to="__reactContainer$"+ru,Cx="__reactEvents$"+ru,AO="__reactListeners$"+ru,PO="__reactHandles$"+ru;function Va(n){var e=n[ls];if(e)return e;for(var t=n.parentNode;t;){if(e=t[to]||t[ls]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=bM(n);n!==null;){if(t=n[ls])return t;n=bM(n)}return e}n=t,t=n.parentNode}return null}function Ld(n){return n=n[ls]||n[to],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(be(33))}function Dg(n){return n[Kf]||null}var Ax=[],xc=-1;function ca(n){return{current:n}}function Qt(n){0>xc||(n.current=Ax[xc],Ax[xc]=null,xc--)}function Zt(n,e){xc++,Ax[xc]=n.current,n.current=e}var qo={},di=ca(qo),zi=ca(!1),ll=qo;function Vc(n,e){var t=n.type.contextTypes;if(!t)return qo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Fi(n){return n=n.childContextTypes,n!=null}function Gm(){Qt(zi),Qt(di)}function MM(n,e,t){if(di.current!==qo)throw Error(be(168));Zt(di,e),Zt(zi,t)}function xC(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(be(108,hD(n)||"Unknown",r));return fn({},t,i)}function jm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qo,ll=di.current,Zt(di,n),Zt(zi,zi.current),!0}function EM(n,e,t){var i=n.stateNode;if(!i)throw Error(be(169));t?(n=xC(n,e,ll),i.__reactInternalMemoizedMergedChildContext=n,Qt(zi),Qt(di),Zt(di,n)):Qt(zi),Zt(zi,t)}var Fs=null,Og=!1,Hy=!1;function _C(n){Fs===null?Fs=[n]:Fs.push(n)}function RO(n){Og=!0,_C(n)}function ua(){if(!Hy&&Fs!==null){Hy=!0;var n=0,e=Vt;try{var t=Fs;for(Vt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Fs=null,Og=!1}catch(r){throw Fs!==null&&(Fs=Fs.slice(n+1)),G3(S_,ua),r}finally{Vt=e,Hy=!1}}return null}var _c=[],wc=0,Xm=null,Ym=0,vr=[],xr=0,cl=null,Hs=1,$s="";function Da(n,e){_c[wc++]=Ym,_c[wc++]=Xm,Xm=n,Ym=e}function wC(n,e,t){vr[xr++]=Hs,vr[xr++]=$s,vr[xr++]=cl,cl=n;var i=Hs;n=$s;var r=32-Hr(i)-1;i&=~(1<<r),t+=1;var s=32-Hr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Hs=1<<32-Hr(e)+r|t<<r|i,$s=s+n}else Hs=1<<s|t<<r|i,$s=n}function L_(n){n.return!==null&&(Da(n,1),wC(n,1,0))}function I_(n){for(;n===Xm;)Xm=_c[--wc],_c[wc]=null,Ym=_c[--wc],_c[wc]=null;for(;n===cl;)cl=vr[--xr],vr[xr]=null,$s=vr[--xr],vr[xr]=null,Hs=vr[--xr],vr[xr]=null}var Ki=null,qi=null,nn=!1,Vr=null;function SC(n,e){var t=Sr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function TM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ki=n,qi=Vo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ki=n,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=cl!==null?{id:Hs,overflow:$s}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Sr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ki=n,qi=null,!0):!1;default:return!1}}function Px(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Rx(n){if(nn){var e=qi;if(e){var t=e;if(!TM(n,e)){if(Px(n))throw Error(be(418));e=Vo(t.nextSibling);var i=Ki;e&&TM(n,e)?SC(i,t):(n.flags=n.flags&-4097|2,nn=!1,Ki=n)}}else{if(Px(n))throw Error(be(418));n.flags=n.flags&-4097|2,nn=!1,Ki=n}}}function CM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ki=n}function fp(n){if(n!==Ki)return!1;if(!nn)return CM(n),nn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ex(n.type,n.memoizedProps)),e&&(e=qi)){if(Px(n))throw bC(),Error(be(418));for(;e;)SC(n,e),e=Vo(e.nextSibling)}if(CM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(be(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){qi=Vo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}qi=null}}else qi=Ki?Vo(n.stateNode.nextSibling):null;return!0}function bC(){for(var n=qi;n;)n=Vo(n.nextSibling)}function Wc(){qi=Ki=null,nn=!1}function k_(n){Vr===null?Vr=[n]:Vr.push(n)}var LO=uo.ReactCurrentBatchConfig;function Fr(n,e){if(n&&n.defaultProps){e=fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var qm=ca(null),Zm=null,Sc=null,D_=null;function O_(){D_=Sc=Zm=null}function N_(n){var e=qm.current;Qt(qm),n._currentValue=e}function Lx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Oc(n,e){Zm=n,D_=Sc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Oi=!0),n.firstContext=null)}function Er(n){var e=n._currentValue;if(D_!==n)if(n={context:n,memoizedValue:e,next:null},Sc===null){if(Zm===null)throw Error(be(308));Sc=n,Zm.dependencies={lanes:0,firstContext:n}}else Sc=Sc.next=n;return e}var Wa=null;function z_(n){Wa===null?Wa=[n]:Wa.push(n)}function MC(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,z_(e)):(t.next=r.next,r.next=t),e.interleaved=t,no(n,i)}function no(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Io=!1;function F_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Wo(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,kt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,no(n,t)}return r=i.interleaved,r===null?(e.next=e,z_(i)):(e.next=r.next,r.next=e),i.interleaved=e,no(n,t)}function vm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,b_(n,t)}}function AM(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Km(n,e,t,i){var r=n.updateQueue;Io=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,d=f=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(p=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=fn({},h,p);break e;case 2:Io=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=f,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);fl|=o,n.lanes=o,n.memoizedState=h}}function PM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(be(191,r));r.call(i)}}}var TC=new M3.Component().refs;function Ix(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ng={isMounted:function(n){return(n=n._reactInternals)?_l(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Mi(),r=$o(n),s=qs(i,r);s.payload=e,t!=null&&(s.callback=t),e=Wo(n,s,r),e!==null&&($r(e,n,r,i),vm(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Mi(),r=$o(n),s=qs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Wo(n,s,r),e!==null&&($r(e,n,r,i),vm(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Mi(),i=$o(n),r=qs(t,i);r.tag=2,e!=null&&(r.callback=e),e=Wo(n,r,i),e!==null&&($r(e,n,i,t),vm(e,n,i))}};function RM(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yf(t,i)||!Yf(r,s):!0}function CC(n,e,t){var i=!1,r=qo,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(r=Fi(e)?ll:di.current,i=e.contextTypes,s=(i=i!=null)?Vc(n,r):qo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ng,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function LM(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Ng.enqueueReplaceState(e,e.state,null)}function kx(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=TC,F_(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Er(s):(s=Fi(e)?ll:di.current,r.context=Vc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ix(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ng.enqueueReplaceState(r,r.state,null),Km(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Yu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(be(309));var i=t.stateNode}if(!i)throw Error(be(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===TC&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(be(284));if(!t._owner)throw Error(be(290,n))}return n}function dp(n,e){throw n=Object.prototype.toString.call(e),Error(be(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function IM(n){var e=n._init;return e(n._payload)}function AC(n){function e(_,w){if(n){var b=_.deletions;b===null?(_.deletions=[w],_.flags|=16):b.push(w)}}function t(_,w){if(!n)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function i(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function r(_,w){return _=Go(_,w),_.index=0,_.sibling=null,_}function s(_,w,b){return _.index=b,n?(b=_.alternate,b!==null?(b=b.index,b<w?(_.flags|=2,w):b):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,w,b,M){return w===null||w.tag!==6?(w=Zy(b,_.mode,M),w.return=_,w):(w=r(w,b),w.return=_,w)}function l(_,w,b,M){var C=b.type;return C===pc?d(_,w,b.props.children,M,b.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Lo&&IM(C)===w.type)?(M=r(w,b.props),M.ref=Yu(_,w,b),M.return=_,M):(M=Mm(b.type,b.key,b.props,null,_.mode,M),M.ref=Yu(_,w,b),M.return=_,M)}function f(_,w,b,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Ky(b,_.mode,M),w.return=_,w):(w=r(w,b.children||[]),w.return=_,w)}function d(_,w,b,M,C){return w===null||w.tag!==7?(w=Qa(b,_.mode,M,C),w.return=_,w):(w=r(w,b),w.return=_,w)}function h(_,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zy(""+w,_.mode,b),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tp:return b=Mm(w.type,w.key,w.props,null,_.mode,b),b.ref=Yu(_,null,w),b.return=_,b;case hc:return w=Ky(w,_.mode,b),w.return=_,w;case Lo:var M=w._init;return h(_,M(w._payload),b)}if(gf(w)||Hu(w))return w=Qa(w,_.mode,b,null),w.return=_,w;dp(_,w)}return null}function p(_,w,b,M){var C=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(_,w,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tp:return b.key===C?l(_,w,b,M):null;case hc:return b.key===C?f(_,w,b,M):null;case Lo:return C=b._init,p(_,w,C(b._payload),M)}if(gf(b)||Hu(b))return C!==null?null:d(_,w,b,M,null);dp(_,b)}return null}function m(_,w,b,M,C){if(typeof M=="string"&&M!==""||typeof M=="number")return _=_.get(b)||null,a(w,_,""+M,C);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case tp:return _=_.get(M.key===null?b:M.key)||null,l(w,_,M,C);case hc:return _=_.get(M.key===null?b:M.key)||null,f(w,_,M,C);case Lo:var A=M._init;return m(_,w,b,A(M._payload),C)}if(gf(M)||Hu(M))return _=_.get(b)||null,d(w,_,M,C,null);dp(w,M)}return null}function g(_,w,b,M){for(var C=null,A=null,R=w,T=w=0,D=null;R!==null&&T<b.length;T++){R.index>T?(D=R,R=null):D=R.sibling;var k=p(_,R,b[T],M);if(k===null){R===null&&(R=D);break}n&&R&&k.alternate===null&&e(_,R),w=s(k,w,T),A===null?C=k:A.sibling=k,A=k,R=D}if(T===b.length)return t(_,R),nn&&Da(_,T),C;if(R===null){for(;T<b.length;T++)R=h(_,b[T],M),R!==null&&(w=s(R,w,T),A===null?C=R:A.sibling=R,A=R);return nn&&Da(_,T),C}for(R=i(_,R);T<b.length;T++)D=m(R,_,T,b[T],M),D!==null&&(n&&D.alternate!==null&&R.delete(D.key===null?T:D.key),w=s(D,w,T),A===null?C=D:A.sibling=D,A=D);return n&&R.forEach(function(O){return e(_,O)}),nn&&Da(_,T),C}function v(_,w,b,M){var C=Hu(b);if(typeof C!="function")throw Error(be(150));if(b=C.call(b),b==null)throw Error(be(151));for(var A=C=null,R=w,T=w=0,D=null,k=b.next();R!==null&&!k.done;T++,k=b.next()){R.index>T?(D=R,R=null):D=R.sibling;var O=p(_,R,k.value,M);if(O===null){R===null&&(R=D);break}n&&R&&O.alternate===null&&e(_,R),w=s(O,w,T),A===null?C=O:A.sibling=O,A=O,R=D}if(k.done)return t(_,R),nn&&Da(_,T),C;if(R===null){for(;!k.done;T++,k=b.next())k=h(_,k.value,M),k!==null&&(w=s(k,w,T),A===null?C=k:A.sibling=k,A=k);return nn&&Da(_,T),C}for(R=i(_,R);!k.done;T++,k=b.next())k=m(R,_,T,k.value,M),k!==null&&(n&&k.alternate!==null&&R.delete(k.key===null?T:k.key),w=s(k,w,T),A===null?C=k:A.sibling=k,A=k);return n&&R.forEach(function($){return e(_,$)}),nn&&Da(_,T),C}function x(_,w,b,M){if(typeof b=="object"&&b!==null&&b.type===pc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case tp:e:{for(var C=b.key,A=w;A!==null;){if(A.key===C){if(C=b.type,C===pc){if(A.tag===7){t(_,A.sibling),w=r(A,b.props.children),w.return=_,_=w;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Lo&&IM(C)===A.type){t(_,A.sibling),w=r(A,b.props),w.ref=Yu(_,A,b),w.return=_,_=w;break e}t(_,A);break}else e(_,A);A=A.sibling}b.type===pc?(w=Qa(b.props.children,_.mode,M,b.key),w.return=_,_=w):(M=Mm(b.type,b.key,b.props,null,_.mode,M),M.ref=Yu(_,w,b),M.return=_,_=M)}return o(_);case hc:e:{for(A=b.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(_,w.sibling),w=r(w,b.children||[]),w.return=_,_=w;break e}else{t(_,w);break}else e(_,w);w=w.sibling}w=Ky(b,_.mode,M),w.return=_,_=w}return o(_);case Lo:return A=b._init,x(_,w,A(b._payload),M)}if(gf(b))return g(_,w,b,M);if(Hu(b))return v(_,w,b,M);dp(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(_,w.sibling),w=r(w,b),w.return=_,_=w):(t(_,w),w=Zy(b,_.mode,M),w.return=_,_=w),o(_)):t(_,w)}return x}var Hc=AC(!0),PC=AC(!1),Id={},us=ca(Id),Jf=ca(Id),Qf=ca(Id);function Ha(n){if(n===Id)throw Error(be(174));return n}function B_(n,e){switch(Zt(Qf,e),Zt(Jf,n),Zt(us,Id),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fx(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fx(e,n)}Qt(us),Zt(us,e)}function $c(){Qt(us),Qt(Jf),Qt(Qf)}function RC(n){Ha(Qf.current);var e=Ha(us.current),t=fx(e,n.type);e!==t&&(Zt(Jf,n),Zt(us,t))}function U_(n){Jf.current===n&&(Qt(us),Qt(Jf))}var an=ca(0);function Jm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $y=[];function V_(){for(var n=0;n<$y.length;n++)$y[n]._workInProgressVersionPrimary=null;$y.length=0}var xm=uo.ReactCurrentDispatcher,Gy=uo.ReactCurrentBatchConfig,ul=0,un=null,kn=null,Hn=null,Qm=!1,Cf=!1,ed=0,IO=0;function ii(){throw Error(be(321))}function W_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Xr(n[t],e[t]))return!1;return!0}function H_(n,e,t,i,r,s){if(ul=s,un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xm.current=n===null||n.memoizedState===null?NO:zO,n=t(i,r),Cf){s=0;do{if(Cf=!1,ed=0,25<=s)throw Error(be(301));s+=1,Hn=kn=null,e.updateQueue=null,xm.current=FO,n=t(i,r)}while(Cf)}if(xm.current=eg,e=kn!==null&&kn.next!==null,ul=0,Hn=kn=un=null,Qm=!1,e)throw Error(be(300));return n}function $_(){var n=ed!==0;return ed=0,n}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?un.memoizedState=Hn=n:Hn=Hn.next=n,Hn}function Tr(){if(kn===null){var n=un.alternate;n=n!==null?n.memoizedState:null}else n=kn.next;var e=Hn===null?un.memoizedState:Hn.next;if(e!==null)Hn=e,kn=n;else{if(n===null)throw Error(be(310));kn=n,n={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Hn===null?un.memoizedState=Hn=n:Hn=Hn.next=n}return Hn}function td(n,e){return typeof e=="function"?e(n):e}function jy(n){var e=Tr(),t=e.queue;if(t===null)throw Error(be(311));t.lastRenderedReducer=n;var i=kn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,f=s;do{var d=f.lane;if((ul&d)===d)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,un.lanes|=d,fl|=d}f=f.next}while(f!==null&&f!==s);l===null?o=i:l.next=a,Xr(i,e.memoizedState)||(Oi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,un.lanes|=s,fl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Xy(n){var e=Tr(),t=e.queue;if(t===null)throw Error(be(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Xr(s,e.memoizedState)||(Oi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function LC(){}function IC(n,e){var t=un,i=Tr(),r=e(),s=!Xr(i.memoizedState,r);if(s&&(i.memoizedState=r,Oi=!0),i=i.queue,G_(OC.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Hn!==null&&Hn.memoizedState.tag&1){if(t.flags|=2048,nd(9,DC.bind(null,t,i,r,e),void 0,null),Gn===null)throw Error(be(349));ul&30||kC(t,e,r)}return r}function kC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function DC(n,e,t,i){e.value=t,e.getSnapshot=i,NC(e)&&zC(n)}function OC(n,e,t){return t(function(){NC(e)&&zC(n)})}function NC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xr(n,t)}catch{return!0}}function zC(n){var e=no(n,1);e!==null&&$r(e,n,1,-1)}function kM(n){var e=as();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:td,lastRenderedState:n},e.queue=n,n=n.dispatch=OO.bind(null,un,n),[e.memoizedState,n]}function nd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function FC(){return Tr().memoizedState}function _m(n,e,t,i){var r=as();un.flags|=n,r.memoizedState=nd(1|e,t,void 0,i===void 0?null:i)}function zg(n,e,t,i){var r=Tr();i=i===void 0?null:i;var s=void 0;if(kn!==null){var o=kn.memoizedState;if(s=o.destroy,i!==null&&W_(i,o.deps)){r.memoizedState=nd(e,t,s,i);return}}un.flags|=n,r.memoizedState=nd(1|e,t,s,i)}function DM(n,e){return _m(8390656,8,n,e)}function G_(n,e){return zg(2048,8,n,e)}function BC(n,e){return zg(4,2,n,e)}function UC(n,e){return zg(4,4,n,e)}function VC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function WC(n,e,t){return t=t!=null?t.concat([n]):null,zg(4,4,VC.bind(null,e,n),t)}function j_(){}function HC(n,e){var t=Tr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&W_(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function $C(n,e){var t=Tr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&W_(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function GC(n,e,t){return ul&21?(Xr(t,e)||(t=Y3(),un.lanes|=t,fl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Oi=!0),n.memoizedState=t)}function kO(n,e){var t=Vt;Vt=t!==0&&4>t?t:4,n(!0);var i=Gy.transition;Gy.transition={};try{n(!1),e()}finally{Vt=t,Gy.transition=i}}function jC(){return Tr().memoizedState}function DO(n,e,t){var i=$o(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},XC(n))YC(e,t);else if(t=MC(n,e,t,i),t!==null){var r=Mi();$r(t,n,i,r),qC(t,e,i)}}function OO(n,e,t){var i=$o(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(XC(n))YC(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Xr(a,o)){var l=e.interleaved;l===null?(r.next=r,z_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=MC(n,e,r,i),t!==null&&(r=Mi(),$r(t,n,i,r),qC(t,e,i))}}function XC(n){var e=n.alternate;return n===un||e!==null&&e===un}function YC(n,e){Cf=Qm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function qC(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,b_(n,t)}}var eg={readContext:Er,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},NO={readContext:Er,useCallback:function(n,e){return as().memoizedState=[n,e===void 0?null:e],n},useContext:Er,useEffect:DM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,_m(4194308,4,VC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return _m(4194308,4,n,e)},useInsertionEffect:function(n,e){return _m(4,2,n,e)},useMemo:function(n,e){var t=as();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=as();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=DO.bind(null,un,n),[i.memoizedState,n]},useRef:function(n){var e=as();return n={current:n},e.memoizedState=n},useState:kM,useDebugValue:j_,useDeferredValue:function(n){return as().memoizedState=n},useTransition:function(){var n=kM(!1),e=n[0];return n=kO.bind(null,n[1]),as().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=un,r=as();if(nn){if(t===void 0)throw Error(be(407));t=t()}else{if(t=e(),Gn===null)throw Error(be(349));ul&30||kC(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,DM(OC.bind(null,i,s,n),[n]),i.flags|=2048,nd(9,DC.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=as(),e=Gn.identifierPrefix;if(nn){var t=$s,i=Hs;t=(i&~(1<<32-Hr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ed++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=IO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},zO={readContext:Er,useCallback:HC,useContext:Er,useEffect:G_,useImperativeHandle:WC,useInsertionEffect:BC,useLayoutEffect:UC,useMemo:$C,useReducer:jy,useRef:FC,useState:function(){return jy(td)},useDebugValue:j_,useDeferredValue:function(n){var e=Tr();return GC(e,kn.memoizedState,n)},useTransition:function(){var n=jy(td)[0],e=Tr().memoizedState;return[n,e]},useMutableSource:LC,useSyncExternalStore:IC,useId:jC,unstable_isNewReconciler:!1},FO={readContext:Er,useCallback:HC,useContext:Er,useEffect:G_,useImperativeHandle:WC,useInsertionEffect:BC,useLayoutEffect:UC,useMemo:$C,useReducer:Xy,useRef:FC,useState:function(){return Xy(td)},useDebugValue:j_,useDeferredValue:function(n){var e=Tr();return kn===null?e.memoizedState=n:GC(e,kn.memoizedState,n)},useTransition:function(){var n=Xy(td)[0],e=Tr().memoizedState;return[n,e]},useMutableSource:LC,useSyncExternalStore:IC,useId:jC,unstable_isNewReconciler:!1};function Gc(n,e){try{var t="",i=e;do t+=dD(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Yy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Dx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var BO=typeof WeakMap=="function"?WeakMap:Map;function ZC(n,e,t){t=qs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){ng||(ng=!0,$x=i),Dx(n,e)},t}function KC(n,e,t){t=qs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Dx(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Dx(n,e),typeof i!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function OM(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new BO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=QO.bind(null,n,e,t),e.then(n,n))}function NM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function zM(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qs(-1,1),e.tag=2,Wo(t,e,1))),t.lanes|=1),n)}var UO=uo.ReactCurrentOwner,Oi=!1;function wi(n,e,t,i){e.child=n===null?PC(e,null,t,i):Hc(e,n.child,t,i)}function FM(n,e,t,i,r){t=t.render;var s=e.ref;return Oc(e,r),i=H_(n,e,t,i,s,r),t=$_(),n!==null&&!Oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,io(n,e,r)):(nn&&t&&L_(e),e.flags|=1,wi(n,e,i,r),e.child)}function BM(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!ew(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,JC(n,e,s,i,r)):(n=Mm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Yf,t(o,i)&&n.ref===e.ref)return io(n,e,r)}return e.flags|=1,n=Go(s,i),n.ref=e.ref,n.return=e,e.child=n}function JC(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Yf(s,i)&&n.ref===e.ref)if(Oi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Oi=!0);else return e.lanes=n.lanes,io(n,e,r)}return Ox(n,e,t,i,r)}function QC(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(Mc,ji),ji|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Zt(Mc,ji),ji|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Zt(Mc,ji),ji|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Zt(Mc,ji),ji|=i;return wi(n,e,r,t),e.child}function eA(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ox(n,e,t,i,r){var s=Fi(t)?ll:di.current;return s=Vc(e,s),Oc(e,r),t=H_(n,e,t,i,s,r),i=$_(),n!==null&&!Oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,io(n,e,r)):(nn&&i&&L_(e),e.flags|=1,wi(n,e,t,r),e.child)}function UM(n,e,t,i,r){if(Fi(t)){var s=!0;jm(e)}else s=!1;if(Oc(e,r),e.stateNode===null)wm(n,e),CC(e,t,i),kx(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Er(f):(f=Fi(t)?ll:di.current,f=Vc(e,f));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==f)&&LM(e,o,i,f),Io=!1;var p=e.memoizedState;o.state=p,Km(e,i,o,r),l=e.memoizedState,a!==i||p!==l||zi.current||Io?(typeof d=="function"&&(Ix(e,t,d,i),l=e.memoizedState),(a=Io||RM(e,t,a,i,p,l,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=f,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,EC(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:Fr(e.type,a),o.props=f,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=Fi(t)?ll:di.current,l=Vc(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&LM(e,o,i,l),Io=!1,p=e.memoizedState,o.state=p,Km(e,i,o,r);var g=e.memoizedState;a!==h||p!==g||zi.current||Io?(typeof m=="function"&&(Ix(e,t,m,i),g=e.memoizedState),(f=Io||RM(e,t,f,i,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Nx(n,e,t,i,s,r)}function Nx(n,e,t,i,r,s){eA(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&EM(e,t,!1),io(n,e,s);i=e.stateNode,UO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Hc(e,n.child,null,s),e.child=Hc(e,null,a,s)):wi(n,e,a,s),e.memoizedState=i.state,r&&EM(e,t,!0),e.child}function tA(n){var e=n.stateNode;e.pendingContext?MM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&MM(n,e.context,!1),B_(n,e.containerInfo)}function VM(n,e,t,i,r){return Wc(),k_(r),e.flags|=256,wi(n,e,t,i),e.child}var zx={dehydrated:null,treeContext:null,retryLane:0};function Fx(n){return{baseLanes:n,cachePool:null,transitions:null}}function nA(n,e,t){var i=e.pendingProps,r=an.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Zt(an,r&1),n===null)return Rx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ug(o,i,0,null),n=Qa(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Fx(t),e.memoizedState=zx,n):X_(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return VO(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Go(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Go(a,s):(s=Qa(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Fx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=zx,i}return s=n.child,n=s.sibling,i=Go(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function X_(n,e){return e=Ug({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function hp(n,e,t,i){return i!==null&&k_(i),Hc(e,n.child,null,t),n=X_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VO(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Yy(Error(be(422))),hp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ug({mode:"visible",children:i.children},r,0,null),s=Qa(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Hc(e,n.child,null,o),e.child.memoizedState=Fx(o),e.memoizedState=zx,s);if(!(e.mode&1))return hp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(be(419)),i=Yy(s,i,void 0),hp(n,e,o,i)}if(a=(o&n.childLanes)!==0,Oi||a){if(i=Gn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,no(n,r),$r(i,n,r,-1))}return Q_(),i=Yy(Error(be(421))),hp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=eN.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,qi=Vo(r.nextSibling),Ki=e,nn=!0,Vr=null,n!==null&&(vr[xr++]=Hs,vr[xr++]=$s,vr[xr++]=cl,Hs=n.id,$s=n.overflow,cl=e),e=X_(e,i.children),e.flags|=4096,e)}function WM(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Lx(n.return,e,t)}function qy(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function iA(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wi(n,e,i.children,t),i=an.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&WM(n,t,e);else if(n.tag===19)WM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Zt(an,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Jm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),qy(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Jm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}qy(e,!0,t,null,s);break;case"together":qy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function io(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),fl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(be(153));if(e.child!==null){for(n=e.child,t=Go(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Go(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function WO(n,e,t){switch(e.tag){case 3:tA(e),Wc();break;case 5:RC(e);break;case 1:Fi(e.type)&&jm(e);break;case 4:B_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Zt(qm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Zt(an,an.current&1),e.flags|=128,null):t&e.child.childLanes?nA(n,e,t):(Zt(an,an.current&1),n=io(n,e,t),n!==null?n.sibling:null);Zt(an,an.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return iA(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Zt(an,an.current),i)break;return null;case 22:case 23:return e.lanes=0,QC(n,e,t)}return io(n,e,t)}var rA,Bx,sA,oA;rA=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bx=function(){};sA=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ha(us.current);var s=null;switch(t){case"input":r=ax(n,r),i=ax(n,i),s=[];break;case"select":r=fn({},r,{value:void 0}),i=fn({},i,{value:void 0}),s=[];break;case"textarea":r=ux(n,r),i=ux(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=$m)}dx(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var a=r[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Vf.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var l=i[f];if(a=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Vf.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Kt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};oA=function(n,e,t,i){t!==i&&(e.flags|=4)};function qu(n,e){if(!nn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ri(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function HO(n,e,t){var i=e.pendingProps;switch(I_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return Fi(e.type)&&Gm(),ri(e),null;case 3:return i=e.stateNode,$c(),Qt(zi),Qt(di),V_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(fp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(Xx(Vr),Vr=null))),Bx(n,e),ri(e),null;case 5:U_(e);var r=Ha(Qf.current);if(t=e.type,n!==null&&e.stateNode!=null)sA(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(be(166));return ri(e),null}if(n=Ha(us.current),fp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ls]=e,i[Kf]=s,n=(e.mode&1)!==0,t){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(r=0;r<vf.length;r++)Kt(vf[r],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":Kb(i,s),Kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",i);break;case"textarea":Qb(i,s),Kt("invalid",i)}dx(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&up(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&up(i.textContent,a,n),r=["children",""+a]):Vf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kt("scroll",i)}switch(t){case"input":np(i),Jb(i,s,!0);break;case"textarea":np(i),eM(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=$m)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=k3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ls]=e,n[Kf]=i,rA(n,e,!1,!1),e.stateNode=n;e:{switch(o=hx(t,i),t){case"dialog":Kt("cancel",n),Kt("close",n),r=i;break;case"iframe":case"object":case"embed":Kt("load",n),r=i;break;case"video":case"audio":for(r=0;r<vf.length;r++)Kt(vf[r],n);r=i;break;case"source":Kt("error",n),r=i;break;case"img":case"image":case"link":Kt("error",n),Kt("load",n),r=i;break;case"details":Kt("toggle",n),r=i;break;case"input":Kb(n,i),r=ax(n,i),Kt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=fn({},i,{value:void 0}),Kt("invalid",n);break;case"textarea":Qb(n,i),r=ux(n,i),Kt("invalid",n);break;default:r=i}dx(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?N3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&D3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Wf(n,l):typeof l=="number"&&Wf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Vf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",n):l!=null&&y_(n,s,l,o))}switch(t){case"input":np(n),Jb(n,i,!1);break;case"textarea":np(n),eM(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Yo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Lc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Lc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=$m)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(n&&e.stateNode!=null)oA(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(be(166));if(t=Ha(Qf.current),Ha(us.current),fp(e)){if(i=e.stateNode,t=e.memoizedProps,i[ls]=e,(s=i.nodeValue!==t)&&(n=Ki,n!==null))switch(n.tag){case 3:up(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&up(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ls]=e,e.stateNode=i}return ri(e),null;case 13:if(Qt(an),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nn&&qi!==null&&e.mode&1&&!(e.flags&128))bC(),Wc(),e.flags|=98560,s=!1;else if(s=fp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(be(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(be(317));s[ls]=e}else Wc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),s=!1}else Vr!==null&&(Xx(Vr),Vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||an.current&1?Dn===0&&(Dn=3):Q_())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return $c(),Bx(n,e),n===null&&qf(e.stateNode.containerInfo),ri(e),null;case 10:return N_(e.type._context),ri(e),null;case 17:return Fi(e.type)&&Gm(),ri(e),null;case 19:if(Qt(an),s=e.memoizedState,s===null)return ri(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)qu(s,!1);else{if(Dn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Jm(n),o!==null){for(e.flags|=128,qu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Zt(an,an.current&1|2),e.child}n=n.sibling}s.tail!==null&&bn()>jc&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Jm(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nn)return ri(e),null}else 2*bn()-s.renderingStartTime>jc&&t!==1073741824&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bn(),e.sibling=null,t=an.current,Zt(an,i?t&1|2:t&1),e):(ri(e),null);case 22:case 23:return J_(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ji&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function $O(n,e){switch(I_(e),e.tag){case 1:return Fi(e.type)&&Gm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $c(),Qt(zi),Qt(di),V_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return U_(e),null;case 13:if(Qt(an),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(be(340));Wc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Qt(an),null;case 4:return $c(),null;case 10:return N_(e.type._context),null;case 22:case 23:return J_(),null;case 24:return null;default:return null}}var pp=!1,li=!1,GO=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function bc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gn(n,e,i)}else t.current=null}function Ux(n,e,t){try{t()}catch(i){gn(n,e,i)}}var HM=!1;function jO(n,e){if(bx=Vm,n=uC(),R_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,f=0,d=0,h=n,p=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++f===r&&(a=o),p===s&&++d===i&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Mx={focusedElem:n,selectionRange:t},Vm=!1,Ue=e;Ue!==null;)if(e=Ue,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ue=n;else for(;Ue!==null;){e=Ue;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Fr(e.type,v),x);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(M){gn(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}return g=HM,HM=!1,g}function Af(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ux(e,t,s)}r=r.next}while(r!==i)}}function Fg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Vx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aA(n){var e=n.alternate;e!==null&&(n.alternate=null,aA(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ls],delete e[Kf],delete e[Cx],delete e[AO],delete e[PO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lA(n){return n.tag===5||n.tag===3||n.tag===4}function $M(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$m));else if(i!==4&&(n=n.child,n!==null))for(Wx(n,e,t),n=n.sibling;n!==null;)Wx(n,e,t),n=n.sibling}function Hx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Hx(n,e,t),n=n.sibling;n!==null;)Hx(n,e,t),n=n.sibling}var Yn=null,Br=!1;function bo(n,e,t){for(t=t.child;t!==null;)cA(n,e,t),t=t.sibling}function cA(n,e,t){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Rg,t)}catch{}switch(t.tag){case 5:li||bc(t,e);case 6:var i=Yn,r=Br;Yn=null,bo(n,e,t),Yn=i,Br=r,Yn!==null&&(Br?(n=Yn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Yn.removeChild(t.stateNode));break;case 18:Yn!==null&&(Br?(n=Yn,t=t.stateNode,n.nodeType===8?Wy(n.parentNode,t):n.nodeType===1&&Wy(n,t),jf(n)):Wy(Yn,t.stateNode));break;case 4:i=Yn,r=Br,Yn=t.stateNode.containerInfo,Br=!0,bo(n,e,t),Yn=i,Br=r;break;case 0:case 11:case 14:case 15:if(!li&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ux(t,e,o),r=r.next}while(r!==i)}bo(n,e,t);break;case 1:if(!li&&(bc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){gn(t,e,a)}bo(n,e,t);break;case 21:bo(n,e,t);break;case 22:t.mode&1?(li=(i=li)||t.memoizedState!==null,bo(n,e,t),li=i):bo(n,e,t);break;default:bo(n,e,t)}}function GM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new GO),e.forEach(function(i){var r=tN.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Dr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,Br=!1;break e;case 3:Yn=a.stateNode.containerInfo,Br=!0;break e;case 4:Yn=a.stateNode.containerInfo,Br=!0;break e}a=a.return}if(Yn===null)throw Error(be(160));cA(s,o,r),Yn=null,Br=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(f){gn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uA(e,n),e=e.sibling}function uA(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Dr(e,n),ss(n),i&4){try{Af(3,n,n.return),Fg(3,n)}catch(v){gn(n,n.return,v)}try{Af(5,n,n.return)}catch(v){gn(n,n.return,v)}}break;case 1:Dr(e,n),ss(n),i&512&&t!==null&&bc(t,t.return);break;case 5:if(Dr(e,n),ss(n),i&512&&t!==null&&bc(t,t.return),n.flags&32){var r=n.stateNode;try{Wf(r,"")}catch(v){gn(n,n.return,v)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&L3(r,s),hx(a,o);var f=hx(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?N3(r,h):d==="dangerouslySetInnerHTML"?D3(r,h):d==="children"?Wf(r,h):y_(r,d,h,f)}switch(a){case"input":lx(r,s);break;case"textarea":I3(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Lc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Lc(r,!!s.multiple,s.defaultValue,!0):Lc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Kf]=s}catch(v){gn(n,n.return,v)}}break;case 6:if(Dr(e,n),ss(n),i&4){if(n.stateNode===null)throw Error(be(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(v){gn(n,n.return,v)}}break;case 3:if(Dr(e,n),ss(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{jf(e.containerInfo)}catch(v){gn(n,n.return,v)}break;case 4:Dr(e,n),ss(n);break;case 13:Dr(e,n),ss(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Z_=bn())),i&4&&GM(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(li=(f=li)||d,Dr(e,n),li=f):Dr(e,n),ss(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!d&&n.mode&1)for(Ue=n,d=n.child;d!==null;){for(h=Ue=d;Ue!==null;){switch(p=Ue,m=p.child,p.tag){case 0:case 11:case 14:case 15:Af(4,p,p.return);break;case 1:bc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){gn(i,t,v)}}break;case 5:bc(p,p.return);break;case 22:if(p.memoizedState!==null){XM(h);continue}}m!==null?(m.return=p,Ue=m):XM(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O3("display",o))}catch(v){gn(n,n.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){gn(n,n.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,n),ss(n),i&4&&GM(n);break;case 21:break;default:Dr(e,n),ss(n)}}function ss(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lA(t)){var i=t;break e}t=t.return}throw Error(be(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Wf(r,""),i.flags&=-33);var s=$M(n);Hx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=$M(n);Wx(n,a,o);break;default:throw Error(be(161))}}catch(l){gn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function XO(n,e,t){Ue=n,fA(n)}function fA(n,e,t){for(var i=(n.mode&1)!==0;Ue!==null;){var r=Ue,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||pp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||li;a=pp;var f=li;if(pp=o,(li=l)&&!f)for(Ue=r;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?YM(r):l!==null?(l.return=o,Ue=l):YM(r);for(;s!==null;)Ue=s,fA(s),s=s.sibling;Ue=r,pp=a,li=f}jM(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ue=s):jM(n)}}function jM(n){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||Fg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!li)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Fr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PM(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}PM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&jf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}li||e.flags&512&&Vx(e)}catch(p){gn(e,e.return,p)}}if(e===n){Ue=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}}function XM(n){for(;Ue!==null;){var e=Ue;if(e===n){Ue=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ue=t;break}Ue=e.return}}function YM(n){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Fg(4,e)}catch(l){gn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gn(e,r,l)}}var s=e.return;try{Vx(e)}catch(l){gn(e,s,l)}break;case 5:var o=e.return;try{Vx(e)}catch(l){gn(e,o,l)}}}catch(l){gn(e,e.return,l)}if(e===n){Ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ue=a;break}Ue=e.return}}var YO=Math.ceil,tg=uo.ReactCurrentDispatcher,Y_=uo.ReactCurrentOwner,Mr=uo.ReactCurrentBatchConfig,kt=0,Gn=null,Pn=null,Zn=0,ji=0,Mc=ca(0),Dn=0,id=null,fl=0,Bg=0,q_=0,Pf=null,ki=null,Z_=0,jc=1/0,zs=null,ng=!1,$x=null,Ho=null,mp=!1,No=null,ig=0,Rf=0,Gx=null,Sm=-1,bm=0;function Mi(){return kt&6?bn():Sm!==-1?Sm:Sm=bn()}function $o(n){return n.mode&1?kt&2&&Zn!==0?Zn&-Zn:LO.transition!==null?(bm===0&&(bm=Y3()),bm):(n=Vt,n!==0||(n=window.event,n=n===void 0?16:tC(n.type)),n):1}function $r(n,e,t,i){if(50<Rf)throw Rf=0,Gx=null,Error(be(185));Pd(n,t,i),(!(kt&2)||n!==Gn)&&(n===Gn&&(!(kt&2)&&(Bg|=t),Dn===4&&Do(n,Zn)),Bi(n,i),t===1&&kt===0&&!(e.mode&1)&&(jc=bn()+500,Og&&ua()))}function Bi(n,e){var t=n.callbackNode;LD(n,e);var i=Um(n,n===Gn?Zn:0);if(i===0)t!==null&&iM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&iM(t),e===1)n.tag===0?RO(qM.bind(null,n)):_C(qM.bind(null,n)),TO(function(){!(kt&6)&&ua()}),t=null;else{switch(q3(i)){case 1:t=S_;break;case 4:t=j3;break;case 16:t=Bm;break;case 536870912:t=X3;break;default:t=Bm}t=xA(t,dA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dA(n,e){if(Sm=-1,bm=0,kt&6)throw Error(be(327));var t=n.callbackNode;if(Nc()&&n.callbackNode!==t)return null;var i=Um(n,n===Gn?Zn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=rg(n,i);else{e=i;var r=kt;kt|=2;var s=pA();(Gn!==n||Zn!==e)&&(zs=null,jc=bn()+500,Ja(n,e));do try{KO();break}catch(a){hA(n,a)}while(1);O_(),tg.current=s,kt=r,Pn!==null?e=0:(Gn=null,Zn=0,e=Dn)}if(e!==0){if(e===2&&(r=vx(n),r!==0&&(i=r,e=jx(n,r))),e===1)throw t=id,Ja(n,0),Do(n,i),Bi(n,bn()),t;if(e===6)Do(n,i);else{if(r=n.current.alternate,!(i&30)&&!qO(r)&&(e=rg(n,i),e===2&&(s=vx(n),s!==0&&(i=s,e=jx(n,s))),e===1))throw t=id,Ja(n,0),Do(n,i),Bi(n,bn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(be(345));case 2:Oa(n,ki,zs);break;case 3:if(Do(n,i),(i&130023424)===i&&(e=Z_+500-bn(),10<e)){if(Um(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Mi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Tx(Oa.bind(null,n,ki,zs),e);break}Oa(n,ki,zs);break;case 4:if(Do(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Hr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=bn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*YO(i/1960))-i,10<i){n.timeoutHandle=Tx(Oa.bind(null,n,ki,zs),i);break}Oa(n,ki,zs);break;case 5:Oa(n,ki,zs);break;default:throw Error(be(329))}}}return Bi(n,bn()),n.callbackNode===t?dA.bind(null,n):null}function jx(n,e){var t=Pf;return n.current.memoizedState.isDehydrated&&(Ja(n,e).flags|=256),n=rg(n,e),n!==2&&(e=ki,ki=t,e!==null&&Xx(e)),n}function Xx(n){ki===null?ki=n:ki.push.apply(ki,n)}function qO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Xr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Do(n,e){for(e&=~q_,e&=~Bg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Hr(e),i=1<<t;n[t]=-1,e&=~i}}function qM(n){if(kt&6)throw Error(be(327));Nc();var e=Um(n,0);if(!(e&1))return Bi(n,bn()),null;var t=rg(n,e);if(n.tag!==0&&t===2){var i=vx(n);i!==0&&(e=i,t=jx(n,i))}if(t===1)throw t=id,Ja(n,0),Do(n,e),Bi(n,bn()),t;if(t===6)throw Error(be(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Oa(n,ki,zs),Bi(n,bn()),null}function K_(n,e){var t=kt;kt|=1;try{return n(e)}finally{kt=t,kt===0&&(jc=bn()+500,Og&&ua())}}function dl(n){No!==null&&No.tag===0&&!(kt&6)&&Nc();var e=kt;kt|=1;var t=Mr.transition,i=Vt;try{if(Mr.transition=null,Vt=1,n)return n()}finally{Vt=i,Mr.transition=t,kt=e,!(kt&6)&&ua()}}function J_(){ji=Mc.current,Qt(Mc)}function Ja(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,EO(t)),Pn!==null)for(t=Pn.return;t!==null;){var i=t;switch(I_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gm();break;case 3:$c(),Qt(zi),Qt(di),V_();break;case 5:U_(i);break;case 4:$c();break;case 13:Qt(an);break;case 19:Qt(an);break;case 10:N_(i.type._context);break;case 22:case 23:J_()}t=t.return}if(Gn=n,Pn=n=Go(n.current,null),Zn=ji=e,Dn=0,id=null,q_=Bg=fl=0,ki=Pf=null,Wa!==null){for(e=0;e<Wa.length;e++)if(t=Wa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Wa=null}return n}function hA(n,e){do{var t=Pn;try{if(O_(),xm.current=eg,Qm){for(var i=un.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Qm=!1}if(ul=0,Hn=kn=un=null,Cf=!1,ed=0,Y_.current=null,t===null||t.return===null){Dn=1,id=e,Pn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=NM(o);if(m!==null){m.flags&=-257,zM(m,o,a,s,e),m.mode&1&&OM(s,f,e),e=m,l=f;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){OM(s,f,e),Q_();break e}l=Error(be(426))}}else if(nn&&a.mode&1){var x=NM(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),zM(x,o,a,s,e),k_(Gc(l,a));break e}}s=l=Gc(l,a),Dn!==4&&(Dn=2),Pf===null?Pf=[s]:Pf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=ZC(s,l,e);AM(s,_);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ho===null||!Ho.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=KC(s,a,e);AM(s,M);break e}}s=s.return}while(s!==null)}gA(t)}catch(C){e=C,Pn===t&&t!==null&&(Pn=t=t.return);continue}break}while(1)}function pA(){var n=tg.current;return tg.current=eg,n===null?eg:n}function Q_(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Gn===null||!(fl&268435455)&&!(Bg&268435455)||Do(Gn,Zn)}function rg(n,e){var t=kt;kt|=2;var i=pA();(Gn!==n||Zn!==e)&&(zs=null,Ja(n,e));do try{ZO();break}catch(r){hA(n,r)}while(1);if(O_(),kt=t,tg.current=i,Pn!==null)throw Error(be(261));return Gn=null,Zn=0,Dn}function ZO(){for(;Pn!==null;)mA(Pn)}function KO(){for(;Pn!==null&&!SD();)mA(Pn)}function mA(n){var e=vA(n.alternate,n,ji);n.memoizedProps=n.pendingProps,e===null?gA(n):Pn=e,Y_.current=null}function gA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=$O(t,e),t!==null){t.flags&=32767,Pn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Dn=6,Pn=null;return}}else if(t=HO(t,e,ji),t!==null){Pn=t;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=n}while(e!==null);Dn===0&&(Dn=5)}function Oa(n,e,t){var i=Vt,r=Mr.transition;try{Mr.transition=null,Vt=1,JO(n,e,t,i)}finally{Mr.transition=r,Vt=i}return null}function JO(n,e,t,i){do Nc();while(No!==null);if(kt&6)throw Error(be(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(be(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(ID(n,s),n===Gn&&(Pn=Gn=null,Zn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||mp||(mp=!0,xA(Bm,function(){return Nc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Mr.transition,Mr.transition=null;var o=Vt;Vt=1;var a=kt;kt|=4,Y_.current=null,jO(n,t),uA(t,n),vO(Mx),Vm=!!bx,Mx=bx=null,n.current=t,XO(t),bD(),kt=a,Vt=o,Mr.transition=s}else n.current=t;if(mp&&(mp=!1,No=n,ig=r),s=n.pendingLanes,s===0&&(Ho=null),TD(t.stateNode),Bi(n,bn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(ng)throw ng=!1,n=$x,$x=null,n;return ig&1&&n.tag!==0&&Nc(),s=n.pendingLanes,s&1?n===Gx?Rf++:(Rf=0,Gx=n):Rf=0,ua(),null}function Nc(){if(No!==null){var n=q3(ig),e=Mr.transition,t=Vt;try{if(Mr.transition=null,Vt=16>n?16:n,No===null)var i=!1;else{if(n=No,No=null,ig=0,kt&6)throw Error(be(331));var r=kt;for(kt|=4,Ue=n.current;Ue!==null;){var s=Ue,o=s.child;if(Ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(Ue=f;Ue!==null;){var d=Ue;switch(d.tag){case 0:case 11:case 15:Af(8,d,s)}var h=d.child;if(h!==null)h.return=d,Ue=h;else for(;Ue!==null;){d=Ue;var p=d.sibling,m=d.return;if(aA(d),d===f){Ue=null;break}if(p!==null){p.return=m,Ue=p;break}Ue=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ue=o;else e:for(;Ue!==null;){if(s=Ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Af(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Ue=_;break e}Ue=s.return}}var w=n.current;for(Ue=w;Ue!==null;){o=Ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ue=b;else e:for(o=w;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fg(9,a)}}catch(C){gn(a,a.return,C)}if(a===o){Ue=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,Ue=M;break e}Ue=a.return}}if(kt=r,ua(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Rg,n)}catch{}i=!0}return i}finally{Vt=t,Mr.transition=e}}return!1}function ZM(n,e,t){e=Gc(t,e),e=ZC(n,e,1),n=Wo(n,e,1),e=Mi(),n!==null&&(Pd(n,1,e),Bi(n,e))}function gn(n,e,t){if(n.tag===3)ZM(n,n,t);else for(;e!==null;){if(e.tag===3){ZM(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ho===null||!Ho.has(i))){n=Gc(t,n),n=KC(e,n,1),e=Wo(e,n,1),n=Mi(),e!==null&&(Pd(e,1,n),Bi(e,n));break}}e=e.return}}function QO(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Mi(),n.pingedLanes|=n.suspendedLanes&t,Gn===n&&(Zn&t)===t&&(Dn===4||Dn===3&&(Zn&130023424)===Zn&&500>bn()-Z_?Ja(n,0):q_|=t),Bi(n,e)}function yA(n,e){e===0&&(n.mode&1?(e=sp,sp<<=1,!(sp&130023424)&&(sp=4194304)):e=1);var t=Mi();n=no(n,e),n!==null&&(Pd(n,e,t),Bi(n,t))}function eN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),yA(n,t)}function tN(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(be(314))}i!==null&&i.delete(e),yA(n,t)}var vA;vA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zi.current)Oi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Oi=!1,WO(n,e,t);Oi=!!(n.flags&131072)}else Oi=!1,nn&&e.flags&1048576&&wC(e,Ym,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;wm(n,e),n=e.pendingProps;var r=Vc(e,di.current);Oc(e,t),r=H_(null,e,i,n,r,t);var s=$_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fi(i)?(s=!0,jm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,F_(e),r.updater=Ng,e.stateNode=r,r._reactInternals=e,kx(e,i,n,t),e=Nx(null,e,i,!0,s,t)):(e.tag=0,nn&&s&&L_(e),wi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(wm(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=iN(i),n=Fr(i,n),r){case 0:e=Ox(null,e,i,n,t);break e;case 1:e=UM(null,e,i,n,t);break e;case 11:e=FM(null,e,i,n,t);break e;case 14:e=BM(null,e,i,Fr(i.type,n),t);break e}throw Error(be(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fr(i,r),Ox(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fr(i,r),UM(n,e,i,r,t);case 3:e:{if(tA(e),n===null)throw Error(be(387));i=e.pendingProps,s=e.memoizedState,r=s.element,EC(n,e),Km(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Gc(Error(be(423)),e),e=VM(n,e,i,t,r);break e}else if(i!==r){r=Gc(Error(be(424)),e),e=VM(n,e,i,t,r);break e}else for(qi=Vo(e.stateNode.containerInfo.firstChild),Ki=e,nn=!0,Vr=null,t=PC(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wc(),i===r){e=io(n,e,t);break e}wi(n,e,i,t)}e=e.child}return e;case 5:return RC(e),n===null&&Rx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Ex(i,r)?o=null:s!==null&&Ex(i,s)&&(e.flags|=32),eA(n,e),wi(n,e,o,t),e.child;case 6:return n===null&&Rx(e),null;case 13:return nA(n,e,t);case 4:return B_(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Hc(e,null,i,t):wi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fr(i,r),FM(n,e,i,r,t);case 7:return wi(n,e,e.pendingProps,t),e.child;case 8:return wi(n,e,e.pendingProps.children,t),e.child;case 12:return wi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Zt(qm,i._currentValue),i._currentValue=o,s!==null)if(Xr(s.value,o)){if(s.children===r.children&&!zi.current){e=io(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=qs(-1,t&-t),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?l.next=l:(l.next=d.next,d.next=l),f.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Lx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(be(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Lx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Oc(e,t),r=Er(r),i=i(r),e.flags|=1,wi(n,e,i,t),e.child;case 14:return i=e.type,r=Fr(i,e.pendingProps),r=Fr(i.type,r),BM(n,e,i,r,t);case 15:return JC(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fr(i,r),wm(n,e),e.tag=1,Fi(i)?(n=!0,jm(e)):n=!1,Oc(e,t),CC(e,i,r),kx(e,i,r,t),Nx(null,e,i,!0,n,t);case 19:return iA(n,e,t);case 22:return QC(n,e,t)}throw Error(be(156,e.tag))};function xA(n,e){return G3(n,e)}function nN(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(n,e,t,i){return new nN(n,e,t,i)}function ew(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iN(n){if(typeof n=="function")return ew(n)?1:0;if(n!=null){if(n=n.$$typeof,n===x_)return 11;if(n===__)return 14}return 2}function Go(n,e){var t=n.alternate;return t===null?(t=Sr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Mm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")ew(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case pc:return Qa(t.children,r,s,e);case v_:o=8,r|=8;break;case ix:return n=Sr(12,t,e,r|2),n.elementType=ix,n.lanes=s,n;case rx:return n=Sr(13,t,e,r),n.elementType=rx,n.lanes=s,n;case sx:return n=Sr(19,t,e,r),n.elementType=sx,n.lanes=s,n;case A3:return Ug(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T3:o=10;break e;case C3:o=9;break e;case x_:o=11;break e;case __:o=14;break e;case Lo:o=16,i=null;break e}throw Error(be(130,n==null?n:typeof n,""))}return e=Sr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Qa(n,e,t,i){return n=Sr(7,n,i,e),n.lanes=t,n}function Ug(n,e,t,i){return n=Sr(22,n,i,e),n.elementType=A3,n.lanes=t,n.stateNode={isHidden:!1},n}function Zy(n,e,t){return n=Sr(6,n,null,e),n.lanes=t,n}function Ky(n,e,t){return e=Sr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function rN(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ly(0),this.expirationTimes=Ly(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ly(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tw(n,e,t,i,r,s,o,a,l){return n=new rN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Sr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},F_(s),n}function sN(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function _A(n){if(!n)return qo;n=n._reactInternals;e:{if(_l(n)!==n||n.tag!==1)throw Error(be(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(n.tag===1){var t=n.type;if(Fi(t))return xC(n,t,e)}return e}function wA(n,e,t,i,r,s,o,a,l){return n=tw(t,i,!0,n,r,s,o,a,l),n.context=_A(null),t=n.current,i=Mi(),r=$o(t),s=qs(i,r),s.callback=e??null,Wo(t,s,r),n.current.lanes=r,Pd(n,r,i),Bi(n,i),n}function Vg(n,e,t,i){var r=e.current,s=Mi(),o=$o(r);return t=_A(t),e.context===null?e.context=t:e.pendingContext=t,e=qs(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Wo(r,e,o),n!==null&&($r(n,r,o,s),vm(n,r,o)),o}function sg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function KM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nw(n,e){KM(n,e),(n=n.alternate)&&KM(n,e)}function oN(){return null}var SA=typeof reportError=="function"?reportError:function(n){console.error(n)};function iw(n){this._internalRoot=n}Wg.prototype.render=iw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(be(409));Vg(n,e,null,null)};Wg.prototype.unmount=iw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;dl(function(){Vg(null,n,null,null)}),e[to]=null}};function Wg(n){this._internalRoot=n}Wg.prototype.unstable_scheduleHydration=function(n){if(n){var e=J3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ko.length&&e!==0&&e<ko[t].priority;t++);ko.splice(t,0,n),t===0&&eC(n)}};function rw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Hg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function JM(){}function aN(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=sg(o);s.call(f)}}var o=wA(e,i,n,0,null,!1,!1,"",JM);return n._reactRootContainer=o,n[to]=o.current,qf(n.nodeType===8?n.parentNode:n),dl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var f=sg(l);a.call(f)}}var l=tw(n,0,!1,null,null,!1,!1,"",JM);return n._reactRootContainer=l,n[to]=l.current,qf(n.nodeType===8?n.parentNode:n),dl(function(){Vg(e,l,t,i)}),l}function $g(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=sg(o);a.call(l)}}Vg(e,o,n,r)}else o=aN(t,e,n,r,i);return sg(o)}Z3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yf(e.pendingLanes);t!==0&&(b_(e,t|1),Bi(e,bn()),!(kt&6)&&(jc=bn()+500,ua()))}break;case 13:dl(function(){var i=no(n,1);if(i!==null){var r=Mi();$r(i,n,1,r)}}),nw(n,1)}};M_=function(n){if(n.tag===13){var e=no(n,134217728);if(e!==null){var t=Mi();$r(e,n,134217728,t)}nw(n,134217728)}};K3=function(n){if(n.tag===13){var e=$o(n),t=no(n,e);if(t!==null){var i=Mi();$r(t,n,e,i)}nw(n,e)}};J3=function(){return Vt};Q3=function(n,e){var t=Vt;try{return Vt=n,e()}finally{Vt=t}};mx=function(n,e,t){switch(e){case"input":if(lx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Dg(i);if(!r)throw Error(be(90));R3(i),lx(i,r)}}}break;case"textarea":I3(n,t);break;case"select":e=t.value,e!=null&&Lc(n,!!t.multiple,e,!1)}};B3=K_;U3=dl;var lN={usingClientEntryPoint:!1,Events:[Ld,vc,Dg,z3,F3,K_]},Zu={findFiberByHostInstance:Va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cN={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=H3(n),n===null?null:n.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||oN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gp.isDisabled&&gp.supportsFiber)try{Rg=gp.inject(cN),cs=gp}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lN;nr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rw(e))throw Error(be(200));return sN(n,e,null,t)};nr.createRoot=function(n,e){if(!rw(n))throw Error(be(299));var t=!1,i="",r=SA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tw(n,1,!1,null,null,t,!1,i,r),n[to]=e.current,qf(n.nodeType===8?n.parentNode:n),new iw(e)};nr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(be(188)):(n=Object.keys(n).join(","),Error(be(268,n)));return n=H3(e),n=n===null?null:n.stateNode,n};nr.flushSync=function(n){return dl(n)};nr.hydrate=function(n,e,t){if(!Hg(e))throw Error(be(200));return $g(null,n,e,!0,t)};nr.hydrateRoot=function(n,e,t){if(!rw(n))throw Error(be(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=SA;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wA(e,null,n,1,t??null,r,!1,s,o),n[to]=e.current,qf(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Wg(e)};nr.render=function(n,e,t){if(!Hg(e))throw Error(be(200));return $g(null,n,e,!1,t)};nr.unmountComponentAtNode=function(n){if(!Hg(n))throw Error(be(40));return n._reactRootContainer?(dl(function(){$g(null,null,n,!1,function(){n._reactRootContainer=null,n[to]=null})}),!0):!1};nr.unstable_batchedUpdates=K_;nr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Hg(t))throw Error(be(200));if(n==null||n._reactInternals===void 0)throw Error(be(38));return $g(n,e,t,!1,i)};nr.version="18.2.0-next-9e3b772b8-20220608";function bA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bA)}catch(n){console.error(n)}}bA(),w3.exports=nr;var kd=w3.exports;const MA=tu(kd);var QM=kd;tx.createRoot=QM.createRoot,tx.hydrateRoot=QM.hydrateRoot;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gg="148",Na={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},za={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},EA=0,Yx=1,TA=2,uN=3,CA=0,jg=1,Lf=2,$a=3,Zo=0,Ji=1,Yi=2,xf=3,Zs=0,el=1,qx=2,Zx=3,Kx=4,AA=5,Ba=100,PA=101,RA=102,Jx=103,Qx=104,LA=200,IA=201,kA=202,DA=203,sw=204,ow=205,OA=206,NA=207,zA=208,FA=209,BA=210,UA=0,VA=1,WA=2,og=3,HA=4,$A=5,GA=6,jA=7,Dd=0,XA=1,YA=2,Gr=0,qA=1,ZA=2,KA=3,aw=4,JA=5,Xg=300,Ko=301,Jo=302,rd=303,sd=304,su=306,od=1e3,ci=1001,ad=1002,Sn=1003,ag=1004,fN=1004,If=1005,dN=1005,Mn=1006,lw=1007,hN=1007,Qo=1008,pN=1008,ro=1009,QA=1010,eP=1011,cw=1012,tP=1013,zo=1014,Gs=1015,Xc=1016,nP=1017,iP=1018,tl=1020,rP=1021,sP=1022,Di=1023,oP=1024,aP=1025,jo=1026,hl=1027,lP=1028,cP=1029,uP=1030,fP=1031,dP=1033,Em=33776,Tm=33777,Cm=33778,Am=33779,e1=35840,t1=35841,n1=35842,i1=35843,hP=36196,r1=37492,s1=37496,o1=37808,a1=37809,l1=37810,c1=37811,u1=37812,f1=37813,d1=37814,h1=37815,p1=37816,m1=37817,g1=37818,y1=37819,v1=37820,x1=37821,_1=36492,pP=2200,mP=2201,gP=2202,ld=2300,cd=2301,Pm=2302,Ga=2400,ja=2401,ud=2402,Yg=2500,uw=2501,mN=0,gN=1,yN=2,ea=3e3,qt=3001,yP=3200,vP=3201,fa=0,xP=1,vN="",Ur="srgb",Yc="srgb-linear",xN=0,Rm=7680,_N=7681,wN=7682,SN=7683,bN=34055,MN=34056,EN=5386,TN=512,CN=513,AN=514,PN=515,RN=516,LN=517,IN=518,_P=519,fd=35044,kN=35048,DN=35040,ON=35045,NN=35049,zN=35041,FN=35046,BN=35050,UN=35042,VN="100",w1="300 es",lg=1035;let vs=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eE=1234567;const nl=Math.PI/180,dd=180/Math.PI;function Qi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(si[n&255]+si[n>>8&255]+si[n>>16&255]+si[n>>24&255]+"-"+si[e&255]+si[e>>8&255]+"-"+si[e>>16&15|64]+si[e>>24&255]+"-"+si[t&63|128]+si[t>>8&255]+"-"+si[t>>16&255]+si[t>>24&255]+si[i&255]+si[i>>8&255]+si[i>>16&255]+si[i>>24&255]).toLowerCase()}function En(n,e,t){return Math.max(e,Math.min(t,n))}function fw(n,e){return(n%e+e)%e}function WN(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function HN(n,e,t){return n!==e?(t-n)/(e-n):0}function kf(n,e,t){return(1-t)*n+t*e}function $N(n,e,t,i){return kf(n,e,1-Math.exp(-t*i))}function GN(n,e=1){return e-Math.abs(fw(n,e*2)-e)}function jN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function XN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function YN(n,e){return n+Math.floor(Math.random()*(e-n+1))}function qN(n,e){return n+Math.random()*(e-n)}function ZN(n){return n*(.5-Math.random())}function KN(n){n!==void 0&&(eE=n);let e=eE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JN(n){return n*nl}function QN(n){return n*dd}function S1(n){return(n&n-1)===0&&n!==0}function wP(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function e4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+i)/2),d=o((e+i)/2),h=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*d,l*h,l*p,a*f);break;case"YZY":n.set(l*p,a*d,l*h,a*f);break;case"ZXZ":n.set(l*h,l*p,a*d,a*f);break;case"XZX":n.set(a*d,l*g,l*m,a*f);break;case"YXY":n.set(l*m,a*d,l*g,a*f);break;case"ZYZ":n.set(l*g,l*m,a*d,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function js(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var t4=Object.freeze({__proto__:null,DEG2RAD:nl,RAD2DEG:dd,generateUUID:Qi,clamp:En,euclideanModulo:fw,mapLinear:WN,inverseLerp:HN,lerp:kf,damp:$N,pingpong:GN,smoothstep:jN,smootherstep:XN,randInt:YN,randFloat:qN,randFloatSpread:ZN,seededRandom:KN,degToRad:JN,radToDeg:QN,isPowerOfTwo:S1,ceilPowerOfTwo:wP,floorPowerOfTwo:cg,setQuaternionFromProperEuler:e4,normalize:jt,denormalize:js});let ye=class SP{constructor(e=0,t=0){SP.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Zi=class bP{constructor(){bP.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],f=i[1],d=i[4],h=i[7],p=i[2],m=i[5],g=i[8],v=r[0],x=r[3],_=r[6],w=r[1],b=r[4],M=r[7],C=r[2],A=r[5],R=r[8];return s[0]=o*v+a*w+l*C,s[3]=o*x+a*b+l*A,s[6]=o*_+a*M+l*R,s[1]=f*v+d*w+h*C,s[4]=f*x+d*b+h*A,s[7]=f*_+d*M+h*R,s[2]=p*v+m*w+g*C,s[5]=p*x+m*b+g*A,s[8]=p*_+m*M+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8];return t*o*d-t*a*f-i*s*d+i*a*l+r*s*f-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8],h=d*o-a*f,p=a*l-d*s,m=f*s-o*l,g=t*h+i*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*f-d*i)*v,e[2]=(a*i-r*o)*v,e[3]=p*v,e[4]=(d*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=m*v,e[7]=(i*l-f*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(i*l,i*f,-i*(l*o+f*a)+o+e,-r*f,r*l,-r*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Jy.makeScale(e,t)),this}rotate(e){return this.premultiply(Jy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Jy.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const Jy=new Zi;function MP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const n4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ec(n,e){return new n4[n](e)}function hd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function il(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Lm(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Qy={[Ur]:{[Yc]:il},[Yc]:{[Ur]:Lm}},ai={legacyMode:!0,get workingColorSpace(){return Yc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Qy[e]&&Qy[e][t]!==void 0){const i=Qy[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},EP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},In={r:0,g:0,b:0},Or={h:0,s:0,l:0},yp={h:0,s:0,l:0};function ev(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function vp(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Oe=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ur){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ai.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ai.workingColorSpace){return this.r=e,this.g=t,this.b=i,ai.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ai.workingColorSpace){if(e=fw(e,1),t=En(t,0,1),i=En(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=ev(o,s,e+1/3),this.g=ev(o,s,e),this.b=ev(o,s,e-1/3)}return ai.toWorkingColorSpace(this,r),this}setStyle(e,t=Ur){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ai.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ai.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,f=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,f,d,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ai.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ai.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ur){const i=EP[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=il(e.r),this.g=il(e.g),this.b=il(e.b),this}copyLinearToSRGB(e){return this.r=Lm(e.r),this.g=Lm(e.g),this.b=Lm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ur){return ai.fromWorkingColorSpace(vp(this,In),e),En(In.r*255,0,255)<<16^En(In.g*255,0,255)<<8^En(In.b*255,0,255)<<0}getHexString(e=Ur){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ai.workingColorSpace){ai.fromWorkingColorSpace(vp(this,In),t);const i=In.r,r=In.g,s=In.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,f;const d=(a+o)/2;if(a===o)l=0,f=0;else{const h=o-a;switch(f=d<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=f,e.l=d,e}getRGB(e,t=ai.workingColorSpace){return ai.fromWorkingColorSpace(vp(this,In),t),e.r=In.r,e.g=In.g,e.b=In.b,e}getStyle(e=Ur){return ai.fromWorkingColorSpace(vp(this,In),e),e!==Ur?`color(${e} ${In.r} ${In.g} ${In.b})`:`rgb(${In.r*255|0},${In.g*255|0},${In.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Or),Or.h+=e,Or.s+=t,Or.l+=i,this.setHSL(Or.h,Or.s,Or.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Or),e.getHSL(yp);const i=kf(Or.h,yp.h,t),r=kf(Or.s,yp.s,t),s=kf(Or.l,yp.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Oe.NAMES=EP;let Vl,dw=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Vl===void 0&&(Vl=hd("canvas")),Vl.width=e.width,Vl.height=e.height;const i=Vl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Vl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=il(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(il(t[i]/255)*255):t[i]=il(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Xa=class{constructor(e=null){this.isSource=!0,this.uuid=Qi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(tv(r[o].image)):s.push(tv(r[o]))}else s=tv(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function tv(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?dw.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let i4=0,jn=class Im extends vs{constructor(e=Im.DEFAULT_IMAGE,t=Im.DEFAULT_MAPPING,i=ci,r=ci,s=Mn,o=Qo,a=Di,l=ro,f=Im.DEFAULT_ANISOTROPY,d=ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:i4++}),this.uuid=Qi(),this.name="",this.source=new Xa(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ye(0,0),this.repeat=new ye(1,1),this.center=new ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Xg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case od:e.x=e.x-Math.floor(e.x);break;case ci:e.x=e.x<0?0:1;break;case ad:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case od:e.y=e.y-Math.floor(e.y);break;case ci:e.y=e.y<0?0:1;break;case ad:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};jn.DEFAULT_IMAGE=null;jn.DEFAULT_MAPPING=Xg;jn.DEFAULT_ANISOTROPY=1;class Ut{constructor(e=0,t=0,i=0,r=1){Ut.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,f=l[0],d=l[4],h=l[8],p=l[1],m=l[5],g=l[9],v=l[2],x=l[6],_=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-v)<.01&&Math.abs(g-x)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+v)<.1&&Math.abs(g+x)<.1&&Math.abs(f+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(f+1)/2,M=(m+1)/2,C=(_+1)/2,A=(d+p)/4,R=(h+v)/4,T=(g+x)/4;return b>M&&b>C?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=A/i,s=R/i):M>C?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=A/r,s=T/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=R/s,r=T/s),this.set(i,r,s,t),this}let w=Math.sqrt((x-g)*(x-g)+(h-v)*(h-v)+(p-d)*(p-d));return Math.abs(w)<.001&&(w=1),this.x=(x-g)/w,this.y=(h-v)/w,this.z=(p-d)/w,this.w=Math.acos((f+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Cr extends vs{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ut(0,0,e,t),this.scissorTest=!1,this.viewport=new Ut(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new jn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Mn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Od extends jn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=ci,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class r4 extends Cr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Od(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class qg extends jn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=ci,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s4 extends Cr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new qg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class o4 extends Cr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class fi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],f=i[r+1],d=i[r+2],h=i[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=d,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==p||f!==m||d!==g){let x=1-a;const _=l*p+f*m+d*g+h*v,w=_>=0?1:-1,b=1-_*_;if(b>Number.EPSILON){const C=Math.sqrt(b),A=Math.atan2(C,_*w);x=Math.sin(x*A)/C,a=Math.sin(a*A)/C}const M=a*w;if(l=l*x+p*M,f=f*x+m*M,d=d*x+g*M,h=h*x+v*M,x===1-a){const C=1/Math.sqrt(l*l+f*f+d*d+h*h);l*=C,f*=C,d*=C,h*=C}}e[t]=l,e[t+1]=f,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],f=i[r+2],d=i[r+3],h=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+d*h+l*m-f*p,e[t+1]=l*g+d*p+f*h-a*m,e[t+2]=f*g+d*m+a*p-l*h,e[t+3]=d*g-a*h-l*p-f*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(i/2),d=a(r/2),h=a(s/2),p=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*d*h+f*m*g,this._y=f*m*h-p*d*g,this._z=f*d*g+p*m*h,this._w=f*d*h-p*m*g;break;case"YXZ":this._x=p*d*h+f*m*g,this._y=f*m*h-p*d*g,this._z=f*d*g-p*m*h,this._w=f*d*h+p*m*g;break;case"ZXY":this._x=p*d*h-f*m*g,this._y=f*m*h+p*d*g,this._z=f*d*g+p*m*h,this._w=f*d*h-p*m*g;break;case"ZYX":this._x=p*d*h-f*m*g,this._y=f*m*h+p*d*g,this._z=f*d*g-p*m*h,this._w=f*d*h+p*m*g;break;case"YZX":this._x=p*d*h+f*m*g,this._y=f*m*h+p*d*g,this._z=f*d*g-p*m*h,this._w=f*d*h-p*m*g;break;case"XZY":this._x=p*d*h-f*m*g,this._y=f*m*h-p*d*g,this._z=f*d*g+p*m*h,this._w=f*d*h+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],d=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-f)*m,this._z=(o-r)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+f)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(s-f)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-r)/m,this._x=(s+f)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,d=t._w;return this._x=i*d+o*a+r*f-s*l,this._y=r*d+o*l+s*a-i*f,this._z=s*d+o*f+i*l-r*a,this._w=o*d-i*a-r*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(l),d=Math.atan2(f,a),h=Math.sin((1-t)*d)/f,p=Math.sin(t*d)/f;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=l*t+o*r-a*i,d=l*i+a*t-s*r,h=l*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=f*l+p*-s+d*-a-h*-o,this.y=d*l+p*-o+h*-s-f*-a,this.z=h*l+p*-a+f*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return nv.copy(this).projectOnVector(e),this.sub(nv)}reflect(e){return this.sub(nv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nv=new z,tE=new fi;class wl{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,f=e.length;l<f;l+=3){const d=e[l],h=e[l+1],p=e[l+2];d<t&&(t=d),h<i&&(i=h),p<r&&(r=p),d>s&&(s=d),h>o&&(o=h),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,f=e.count;l<f;l++){const d=e.getX(l),h=e.getY(l),p=e.getZ(l);d<t&&(t=d),h<i&&(i=h),p<r&&(r=p),d>s&&(s=d),h>o&&(o=h),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ta.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Ta.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ta)}else i.boundingBox===null&&i.computeBoundingBox(),iv.copy(i.boundingBox),iv.applyMatrix4(e.matrixWorld),this.union(iv);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ta),Ta.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ku),xp.subVectors(this.max,Ku),Wl.subVectors(e.a,Ku),Hl.subVectors(e.b,Ku),$l.subVectors(e.c,Ku),Mo.subVectors(Hl,Wl),Eo.subVectors($l,Hl),Ca.subVectors(Wl,$l);let t=[0,-Mo.z,Mo.y,0,-Eo.z,Eo.y,0,-Ca.z,Ca.y,Mo.z,0,-Mo.x,Eo.z,0,-Eo.x,Ca.z,0,-Ca.x,-Mo.y,Mo.x,0,-Eo.y,Eo.x,0,-Ca.y,Ca.x,0];return!rv(t,Wl,Hl,$l,xp)||(t=[1,0,0,0,1,0,0,0,1],!rv(t,Wl,Hl,$l,xp))?!1:(_p.crossVectors(Mo,Eo),t=[_p.x,_p.y,_p.z],rv(t,Wl,Hl,$l,xp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ta.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ta).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rs=[new z,new z,new z,new z,new z,new z,new z,new z],Ta=new z,iv=new wl,Wl=new z,Hl=new z,$l=new z,Mo=new z,Eo=new z,Ca=new z,Ku=new z,xp=new z,_p=new z,Aa=new z;function rv(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Aa.fromArray(n,s);const a=r.x*Math.abs(Aa.x)+r.y*Math.abs(Aa.y)+r.z*Math.abs(Aa.z),l=e.dot(Aa),f=t.dot(Aa),d=i.dot(Aa);if(Math.max(-Math.max(l,f,d),Math.min(l,f,d))>a)return!1}return!0}const a4=new wl,Ju=new z,sv=new z;class Sl{constructor(e=new z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):a4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ju.subVectors(e,this.center);const t=Ju.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Ju,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ju.copy(e.center).add(sv)),this.expandByPoint(Ju.copy(e.center).sub(sv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ls=new z,ov=new z,wp=new z,To=new z,av=new z,Sp=new z,lv=new z;class ou{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ls)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ls.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ls.copy(this.direction).multiplyScalar(t).add(this.origin),Ls.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ov.copy(e).add(t).multiplyScalar(.5),wp.copy(t).sub(e).normalize(),To.copy(this.origin).sub(ov);const s=e.distanceTo(t)*.5,o=-this.direction.dot(wp),a=To.dot(this.direction),l=-To.dot(wp),f=To.lengthSq(),d=Math.abs(1-o*o);let h,p,m,g;if(d>0)if(h=o*l-a,p=o*a-l,g=s*d,h>=0)if(p>=-g)if(p<=g){const v=1/d;h*=v,p*=v,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+f}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+f;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+f;else p<=-g?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+f):p<=g?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+f):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+f);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+f;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(wp).multiplyScalar(p).add(ov),m}intersectSphere(e,t){Ls.subVectors(e.center,this.origin);const i=Ls.dot(this.direction),r=Ls.dot(Ls)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const f=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return f>=0?(i=(e.min.x-p.x)*f,r=(e.max.x-p.x)*f):(i=(e.max.x-p.x)*f,r=(e.min.x-p.x)*f),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ls)!==null}intersectTriangle(e,t,i,r,s){av.subVectors(t,e),Sp.subVectors(i,e),lv.crossVectors(av,Sp);let o=this.direction.dot(lv),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;To.subVectors(this.origin,e);const l=a*this.direction.dot(Sp.crossVectors(To,Sp));if(l<0)return null;const f=a*this.direction.dot(av.cross(To));if(f<0||l+f>o)return null;const d=-a*To.dot(lv);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pt{constructor(){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,f,d,h,p,m,g,v,x){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=f,_[6]=d,_[10]=h,_[14]=p,_[3]=m,_[7]=g,_[11]=v,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Gl.setFromMatrixColumn(e,0).length(),s=1/Gl.setFromMatrixColumn(e,1).length(),o=1/Gl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),f=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*h,g=a*d,v=a*h;t[0]=l*d,t[4]=-l*h,t[8]=f,t[1]=m+g*f,t[5]=p-v*f,t[9]=-a*l,t[2]=v-p*f,t[6]=g+m*f,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*h,g=f*d,v=f*h;t[0]=p+v*a,t[4]=g*a-m,t[8]=o*f,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=m*a-g,t[6]=v+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*h,g=f*d,v=f*h;t[0]=p-v*a,t[4]=-o*h,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*d,t[9]=v-p*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*h,g=a*d,v=a*h;t[0]=l*d,t[4]=g*f-m,t[8]=p*f+v,t[1]=l*h,t[5]=v*f+p,t[9]=m*f-g,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*f,g=a*l,v=a*f;t[0]=l*d,t[4]=v-p*h,t[8]=g*h+m,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-f*d,t[6]=m*h+g,t[10]=p-v*h}else if(e.order==="XZY"){const p=o*l,m=o*f,g=a*l,v=a*f;t[0]=l*d,t[4]=-h,t[8]=f*d,t[1]=p*h+v,t[5]=o*d,t[9]=m*h-g,t[2]=g*h-m,t[6]=a*d,t[10]=v*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(l4,e,c4)}lookAt(e,t,i){const r=this.elements;return $i.subVectors(e,t),$i.lengthSq()===0&&($i.z=1),$i.normalize(),Co.crossVectors(i,$i),Co.lengthSq()===0&&(Math.abs(i.z)===1?$i.x+=1e-4:$i.z+=1e-4,$i.normalize(),Co.crossVectors(i,$i)),Co.normalize(),bp.crossVectors($i,Co),r[0]=Co.x,r[4]=bp.x,r[8]=$i.x,r[1]=Co.y,r[5]=bp.y,r[9]=$i.y,r[2]=Co.z,r[6]=bp.z,r[10]=$i.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],f=i[12],d=i[1],h=i[5],p=i[9],m=i[13],g=i[2],v=i[6],x=i[10],_=i[14],w=i[3],b=i[7],M=i[11],C=i[15],A=r[0],R=r[4],T=r[8],D=r[12],k=r[1],O=r[5],$=r[9],W=r[13],V=r[2],q=r[6],ee=r[10],oe=r[14],N=r[3],Y=r[7],Z=r[11],j=r[15];return s[0]=o*A+a*k+l*V+f*N,s[4]=o*R+a*O+l*q+f*Y,s[8]=o*T+a*$+l*ee+f*Z,s[12]=o*D+a*W+l*oe+f*j,s[1]=d*A+h*k+p*V+m*N,s[5]=d*R+h*O+p*q+m*Y,s[9]=d*T+h*$+p*ee+m*Z,s[13]=d*D+h*W+p*oe+m*j,s[2]=g*A+v*k+x*V+_*N,s[6]=g*R+v*O+x*q+_*Y,s[10]=g*T+v*$+x*ee+_*Z,s[14]=g*D+v*W+x*oe+_*j,s[3]=w*A+b*k+M*V+C*N,s[7]=w*R+b*O+M*q+C*Y,s[11]=w*T+b*$+M*ee+C*Z,s[15]=w*D+b*W+M*oe+C*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],d=e[2],h=e[6],p=e[10],m=e[14],g=e[3],v=e[7],x=e[11],_=e[15];return g*(+s*l*h-r*f*h-s*a*p+i*f*p+r*a*m-i*l*m)+v*(+t*l*m-t*f*p+s*o*p-r*o*m+r*f*d-s*l*d)+x*(+t*f*h-t*a*m-s*o*h+i*o*m+s*a*d-i*f*d)+_*(-r*a*d-t*l*h+t*a*p+r*o*h-i*o*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8],h=e[9],p=e[10],m=e[11],g=e[12],v=e[13],x=e[14],_=e[15],w=h*x*f-v*p*f+v*l*m-a*x*m-h*l*_+a*p*_,b=g*p*f-d*x*f-g*l*m+o*x*m+d*l*_-o*p*_,M=d*v*f-g*h*f+g*a*m-o*v*m-d*a*_+o*h*_,C=g*h*l-d*v*l-g*a*p+o*v*p+d*a*x-o*h*x,A=t*w+i*b+r*M+s*C;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/A;return e[0]=w*R,e[1]=(v*p*s-h*x*s-v*r*m+i*x*m+h*r*_-i*p*_)*R,e[2]=(a*x*s-v*l*s+v*r*f-i*x*f-a*r*_+i*l*_)*R,e[3]=(h*l*s-a*p*s-h*r*f+i*p*f+a*r*m-i*l*m)*R,e[4]=b*R,e[5]=(d*x*s-g*p*s+g*r*m-t*x*m-d*r*_+t*p*_)*R,e[6]=(g*l*s-o*x*s-g*r*f+t*x*f+o*r*_-t*l*_)*R,e[7]=(o*p*s-d*l*s+d*r*f-t*p*f-o*r*m+t*l*m)*R,e[8]=M*R,e[9]=(g*h*s-d*v*s-g*i*m+t*v*m+d*i*_-t*h*_)*R,e[10]=(o*v*s-g*a*s+g*i*f-t*v*f-o*i*_+t*a*_)*R,e[11]=(d*a*s-o*h*s-d*i*f+t*h*f+o*i*m-t*a*m)*R,e[12]=C*R,e[13]=(d*v*r-g*h*r+g*i*p-t*v*p-d*i*x+t*h*x)*R,e[14]=(g*a*r-o*v*r-g*i*l+t*v*l+o*i*x-t*a*x)*R,e[15]=(o*h*r-d*a*r+d*i*l-t*h*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,f=s*o,d=s*a;return this.set(f*o+i,f*a-r*l,f*l+r*a,0,f*a+r*l,d*a+i,d*l-r*o,0,f*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,d=o+o,h=a+a,p=s*f,m=s*d,g=s*h,v=o*d,x=o*h,_=a*h,w=l*f,b=l*d,M=l*h,C=i.x,A=i.y,R=i.z;return r[0]=(1-(v+_))*C,r[1]=(m+M)*C,r[2]=(g-b)*C,r[3]=0,r[4]=(m-M)*A,r[5]=(1-(p+_))*A,r[6]=(x+w)*A,r[7]=0,r[8]=(g+b)*R,r[9]=(x-w)*R,r[10]=(1-(p+v))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Gl.set(r[0],r[1],r[2]).length();const o=Gl.set(r[4],r[5],r[6]).length(),a=Gl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Nr.copy(this);const f=1/s,d=1/o,h=1/a;return Nr.elements[0]*=f,Nr.elements[1]*=f,Nr.elements[2]*=f,Nr.elements[4]*=d,Nr.elements[5]*=d,Nr.elements[6]*=d,Nr.elements[8]*=h,Nr.elements[9]*=h,Nr.elements[10]*=h,t.setFromRotationMatrix(Nr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(t-e),f=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=f,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),f=1/(i-r),d=1/(o-s),h=(t+e)*l,p=(i+r)*f,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Gl=new z,Nr=new pt,l4=new z(0,0,0),c4=new z(1,1,1),Co=new z,bp=new z,$i=new z,nE=new pt,iE=new fi;class au{constructor(e=0,t=0,i=0,r=au.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],f=r[5],d=r[9],h=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-En(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(En(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-En(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return nE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nE,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return iE.setFromEuler(this),this.setFromQuaternion(iE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}au.DefaultOrder="XYZ";au.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class rl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let u4=0;const rE=new z,jl=new fi,Is=new pt,Mp=new z,Qu=new z,f4=new z,d4=new fi,sE=new z(1,0,0),oE=new z(0,1,0),aE=new z(0,0,1),h4={type:"added"},lE={type:"removed"};class zt extends vs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:u4++}),this.uuid=Qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DefaultUp.clone();const e=new z,t=new au,i=new fi,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pt},normalMatrix:{value:new Zi}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=zt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zt.DefaultMatrixWorldAutoUpdate,this.layers=new rl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return jl.setFromAxisAngle(e,t),this.quaternion.multiply(jl),this}rotateOnWorldAxis(e,t){return jl.setFromAxisAngle(e,t),this.quaternion.premultiply(jl),this}rotateX(e){return this.rotateOnAxis(sE,e)}rotateY(e){return this.rotateOnAxis(oE,e)}rotateZ(e){return this.rotateOnAxis(aE,e)}translateOnAxis(e,t){return rE.copy(e).applyQuaternion(this.quaternion),this.position.add(rE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sE,e)}translateY(e){return this.translateOnAxis(oE,e)}translateZ(e){return this.translateOnAxis(aE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Is.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Mp.copy(e):Mp.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Qu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Is.lookAt(Qu,Mp,this.up):Is.lookAt(Mp,Qu,this.up),this.quaternion.setFromRotationMatrix(Is),r&&(Is.extractRotation(r.matrixWorld),jl.setFromRotationMatrix(Is),this.quaternion.premultiply(jl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(h4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(lE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Is.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Is.multiply(e.parent.matrixWorld)),e.applyMatrix4(Is),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,e,f4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,d4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,d=l.length;f<d;f++){const h=l[f];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),d=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const f in a){const d=a[f];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}zt.DefaultUp=new z(0,1,0);zt.DefaultMatrixAutoUpdate=!0;zt.DefaultMatrixWorldAutoUpdate=!0;const zr=new z,ks=new z,cv=new z,Ds=new z,Xl=new z,Yl=new z,cE=new z,uv=new z,fv=new z,dv=new z;class wr{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),zr.subVectors(e,t),r.cross(zr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){zr.subVectors(r,t),ks.subVectors(i,t),cv.subVectors(e,t);const o=zr.dot(zr),a=zr.dot(ks),l=zr.dot(cv),f=ks.dot(ks),d=ks.dot(cv),h=o*f-a*a;if(h===0)return s.set(-2,-1,-1);const p=1/h,m=(f*l-a*d)*p,g=(o*d-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ds),Ds.x>=0&&Ds.y>=0&&Ds.x+Ds.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ds),l.set(0,0),l.addScaledVector(s,Ds.x),l.addScaledVector(o,Ds.y),l.addScaledVector(a,Ds.z),l}static isFrontFacing(e,t,i,r){return zr.subVectors(i,t),ks.subVectors(e,t),zr.cross(ks).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zr.subVectors(this.c,this.b),ks.subVectors(this.a,this.b),zr.cross(ks).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return wr.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Xl.subVectors(r,i),Yl.subVectors(s,i),uv.subVectors(e,i);const l=Xl.dot(uv),f=Yl.dot(uv);if(l<=0&&f<=0)return t.copy(i);fv.subVectors(e,r);const d=Xl.dot(fv),h=Yl.dot(fv);if(d>=0&&h<=d)return t.copy(r);const p=l*h-d*f;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(Xl,o);dv.subVectors(e,s);const m=Xl.dot(dv),g=Yl.dot(dv);if(g>=0&&m<=g)return t.copy(s);const v=m*f-l*g;if(v<=0&&f>=0&&g<=0)return a=f/(f-g),t.copy(i).addScaledVector(Yl,a);const x=d*g-m*h;if(x<=0&&h-d>=0&&m-g>=0)return cE.subVectors(s,r),a=(h-d)/(h-d+(m-g)),t.copy(r).addScaledVector(cE,a);const _=1/(x+v+p);return o=v*_,a=p*_,t.copy(i).addScaledVector(Xl,o).addScaledVector(Yl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let p4=0;class Jn extends vs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:p4++}),this.uuid=Qi(),this.name="",this.type="Material",this.blending=el,this.side=Zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=sw,this.blendDst=ow,this.blendEquation=Ba,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=og,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_P,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rm,this.stencilZFail=Rm,this.stencilZPass=Rm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==el&&(i.blending=this.blending),this.side!==Zo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class da extends Jn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const An=new z,Ep=new ye;class Xt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=fd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Ep.fromBufferAttribute(this,t),Ep.applyMatrix3(e),this.setXY(t,Ep.x,Ep.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)An.fromBufferAttribute(this,t),An.applyMatrix3(e),this.setXYZ(t,An.x,An.y,An.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)An.fromBufferAttribute(this,t),An.applyMatrix4(e),this.setXYZ(t,An.x,An.y,An.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)An.fromBufferAttribute(this,t),An.applyNormalMatrix(e),this.setXYZ(t,An.x,An.y,An.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)An.fromBufferAttribute(this,t),An.transformDirection(e),this.setXYZ(t,An.x,An.y,An.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=js(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=js(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=js(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class m4 extends Xt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class g4 extends Xt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class y4 extends Xt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class v4 extends Xt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class hw extends Xt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class x4 extends Xt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class pw extends Xt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class _4 extends Xt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class je extends Xt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class w4 extends Xt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let S4=0;const gr=new pt,hv=new zt,ql=new z,Gi=new wl,ef=new wl,Wn=new z;class _t extends vs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:S4++}),this.uuid=Qi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MP(e)?pw:hw)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Zi().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return gr.makeRotationFromQuaternion(e),this.applyMatrix4(gr),this}rotateX(e){return gr.makeRotationX(e),this.applyMatrix4(gr),this}rotateY(e){return gr.makeRotationY(e),this.applyMatrix4(gr),this}rotateZ(e){return gr.makeRotationZ(e),this.applyMatrix4(gr),this}translate(e,t,i){return gr.makeTranslation(e,t,i),this.applyMatrix4(gr),this}scale(e,t,i){return gr.makeScale(e,t,i),this.applyMatrix4(gr),this}lookAt(e){return hv.lookAt(e),hv.updateMatrix(),this.applyMatrix4(hv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ql).negate(),this.translate(ql.x,ql.y,ql.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new je(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Gi.setFromBufferAttribute(s),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];ef.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(Gi.min,ef.min),Gi.expandByPoint(Wn),Wn.addVectors(Gi.max,ef.max),Gi.expandByPoint(Wn)):(Gi.expandByPoint(ef.min),Gi.expandByPoint(ef.max))}Gi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Wn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,d=a.count;f<d;f++)Wn.fromBufferAttribute(a,f),l&&(ql.fromBufferAttribute(e,f),Wn.add(ql)),r=Math.max(r,i.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,f=[],d=[];for(let k=0;k<a;k++)f[k]=new z,d[k]=new z;const h=new z,p=new z,m=new z,g=new ye,v=new ye,x=new ye,_=new z,w=new z;function b(k,O,$){h.fromArray(r,k*3),p.fromArray(r,O*3),m.fromArray(r,$*3),g.fromArray(o,k*2),v.fromArray(o,O*2),x.fromArray(o,$*2),p.sub(h),m.sub(h),v.sub(g),x.sub(g);const W=1/(v.x*x.y-x.x*v.y);isFinite(W)&&(_.copy(p).multiplyScalar(x.y).addScaledVector(m,-v.y).multiplyScalar(W),w.copy(m).multiplyScalar(v.x).addScaledVector(p,-x.x).multiplyScalar(W),f[k].add(_),f[O].add(_),f[$].add(_),d[k].add(w),d[O].add(w),d[$].add(w))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let k=0,O=M.length;k<O;++k){const $=M[k],W=$.start,V=$.count;for(let q=W,ee=W+V;q<ee;q+=3)b(i[q+0],i[q+1],i[q+2])}const C=new z,A=new z,R=new z,T=new z;function D(k){R.fromArray(s,k*3),T.copy(R);const O=f[k];C.copy(O),C.sub(R.multiplyScalar(R.dot(O))).normalize(),A.crossVectors(T,O);const W=A.dot(d[k])<0?-1:1;l[k*4]=C.x,l[k*4+1]=C.y,l[k*4+2]=C.z,l[k*4+3]=W}for(let k=0,O=M.length;k<O;++k){const $=M[k],W=$.start,V=$.count;for(let q=W,ee=W+V;q<ee;q+=3)D(i[q+0]),D(i[q+1]),D(i[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,f=new z,d=new z,h=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),v=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,x),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),f.fromBufferAttribute(i,x),a.add(d),l.add(d),f.add(d),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(x,f.x,f.y,f.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wn.fromBufferAttribute(e,t),Wn.normalize(),e.setXYZ(t,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(a,l){const f=a.array,d=a.itemSize,h=a.normalized,p=new f.constructor(l.length*d);let m=0,g=0;for(let v=0,x=l.length;v<x;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*d;for(let _=0;_<d;_++)p[g++]=f[m++]}return new Xt(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _t,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],f=e(l,i);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let d=0,h=f.length;d<h;d++){const p=f[d],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const f=i[l];e.data.attributes[l]=f.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],d=[];for(let h=0,p=f.length;h<p;h++){const m=f[h];d.push(m.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const s=e.morphAttributes;for(const f in s){const d=[],h=s[f];for(let p=0,m=h.length;p<m;p++)d.push(h[p].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,d=o.length;f<d;f++){const h=o[f];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const uE=new pt,Zl=new ou,pv=new Sl,tf=new z,nf=new z,rf=new z,mv=new z,Tp=new z,Cp=new ye,Ap=new ye,Pp=new ye,gv=new z,Rp=new z;class qn extends zt{constructor(e=new _t,t=new da){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Tp.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const d=a[l],h=s[l];d!==0&&(mv.fromBufferAttribute(h,e),o?Tp.addScaledVector(mv,d):Tp.addScaledVector(mv.sub(t),d))}t.add(Tp)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),pv.copy(i.boundingSphere),pv.applyMatrix4(s),e.ray.intersectsSphere(pv)===!1)||(uE.copy(s).invert(),Zl.copy(e.ray).applyMatrix4(uE),i.boundingBox!==null&&Zl.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,f=i.attributes.uv,d=i.attributes.uv2,h=i.groups,p=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const v=h[m],x=r[v.materialIndex],_=Math.max(v.start,p.start),w=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));for(let b=_,M=w;b<M;b+=3){const C=a.getX(b),A=a.getX(b+1),R=a.getX(b+2);o=Lp(this,x,e,Zl,f,d,C,A,R),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let v=m,x=g;v<x;v+=3){const _=a.getX(v),w=a.getX(v+1),b=a.getX(v+2);o=Lp(this,r,e,Zl,f,d,_,w,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const v=h[m],x=r[v.materialIndex],_=Math.max(v.start,p.start),w=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let b=_,M=w;b<M;b+=3){const C=b,A=b+1,R=b+2;o=Lp(this,x,e,Zl,f,d,C,A,R),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let v=m,x=g;v<x;v+=3){const _=v,w=v+1,b=v+2;o=Lp(this,r,e,Zl,f,d,_,w,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}}function b4(n,e,t,i,r,s,o,a){let l;if(e.side===Ji?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Zo,a),l===null)return null;Rp.copy(a),Rp.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Rp);return f<t.near||f>t.far?null:{distance:f,point:Rp.clone(),object:n}}function Lp(n,e,t,i,r,s,o,a,l){n.getVertexPosition(o,tf),n.getVertexPosition(a,nf),n.getVertexPosition(l,rf);const f=b4(n,e,t,i,tf,nf,rf,gv);if(f){r&&(Cp.fromBufferAttribute(r,o),Ap.fromBufferAttribute(r,a),Pp.fromBufferAttribute(r,l),f.uv=wr.getUV(gv,tf,nf,rf,Cp,Ap,Pp,new ye)),s&&(Cp.fromBufferAttribute(s,o),Ap.fromBufferAttribute(s,a),Pp.fromBufferAttribute(s,l),f.uv2=wr.getUV(gv,tf,nf,rf,Cp,Ap,Pp,new ye));const d={a:o,b:a,c:l,normal:new z,materialIndex:0};wr.getNormal(tf,nf,rf,d.normal),f.face=d}return f}class ha extends _t{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],d=[],h=[];let p=0,m=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new je(f,3)),this.setAttribute("normal",new je(d,3)),this.setAttribute("uv",new je(h,2));function g(v,x,_,w,b,M,C,A,R,T,D){const k=M/R,O=C/T,$=M/2,W=C/2,V=A/2,q=R+1,ee=T+1;let oe=0,N=0;const Y=new z;for(let Z=0;Z<ee;Z++){const j=Z*O-W;for(let K=0;K<q;K++){const ue=K*k-$;Y[v]=ue*w,Y[x]=j*b,Y[_]=V,f.push(Y.x,Y.y,Y.z),Y[v]=0,Y[x]=0,Y[_]=A>0?1:-1,d.push(Y.x,Y.y,Y.z),h.push(K/R),h.push(1-Z/T),oe+=1}}for(let Z=0;Z<T;Z++)for(let j=0;j<R;j++){const K=p+j+q*Z,ue=p+j+q*(Z+1),ge=p+(j+1)+q*(Z+1),ve=p+(j+1)+q*Z;l.push(K,ue,ve),l.push(ue,ge,ve),N+=6}a.addGroup(m,N,D),m+=N,p+=oe}}static fromJSON(e){return new ha(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function _i(n){const e={};for(let t=0;t<n.length;t++){const i=qc(n[t]);for(const r in i)e[r]=i[r]}return e}function M4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function TP(n){return n.getRenderTarget()===null&&n.outputEncoding===qt?Ur:Yc}const CP={clone:qc,merge:_i};var E4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,T4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ps extends Jn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=E4,this.fragmentShader=T4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qc(e.uniforms),this.uniformsGroups=M4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Nd extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class yn extends Nd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(nl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dd*2*Math.atan(Math.tan(nl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(nl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/f,r*=o.width/l,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Kl=-90,Jl=1;class AP extends zt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new yn(Kl,Jl,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new yn(Kl,Jl,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new yn(Kl,Jl,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new yn(Kl,Jl,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new yn(Kl,Jl,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const f=new yn(Kl,Jl,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,f]=this.children,d=e.getRenderTarget(),h=e.toneMapping,p=e.xr.enabled;e.toneMapping=Gr,e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class zd extends jn{constructor(e,t,i,r,s,o,a,l,f,d){e=e!==void 0?e:[],t=t!==void 0?t:Ko,super(e,t,i,r,s,o,a,l,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PP extends Cr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new zd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ha(5,5,5),s=new ps({name:"CubemapFromEquirect",uniforms:qc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ji,blending:Zs});s.uniforms.tEquirect.value=t;const o=new qn(r,s),a=t.minFilter;return t.minFilter===Qo&&(t.minFilter=Mn),new AP(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const yv=new z,C4=new z,A4=new Zi;class Bs{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=yv.subVectors(i,t).cross(C4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(yv),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||A4.getNormalMatrix(e),r=this.coplanarPoint(yv).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ql=new Sl,Ip=new z;class Zg{constructor(e=new Bs,t=new Bs,i=new Bs,r=new Bs,s=new Bs,o=new Bs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],f=i[5],d=i[6],h=i[7],p=i[8],m=i[9],g=i[10],v=i[11],x=i[12],_=i[13],w=i[14],b=i[15];return t[0].setComponents(a-r,h-l,v-p,b-x).normalize(),t[1].setComponents(a+r,h+l,v+p,b+x).normalize(),t[2].setComponents(a+s,h+f,v+m,b+_).normalize(),t[3].setComponents(a-s,h-f,v-m,b-_).normalize(),t[4].setComponents(a-o,h-d,v-g,b-w).normalize(),t[5].setComponents(a+o,h+d,v+g,b+w).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ql.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ql)}intersectsSprite(e){return Ql.center.set(0,0,0),Ql.radius=.7071067811865476,Ql.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ql)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Ip.x=r.normal.x>0?e.max.x:e.min.x,Ip.y=r.normal.y>0?e.max.y:e.min.y,Ip.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ip)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function RP(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function P4(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,d){const h=f.array,p=f.usage,m=n.createBuffer();n.bindBuffer(d,m),n.bufferData(d,h,p),f.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:f.version}}function s(f,d,h){const p=d.array,m=d.updateRange;n.bindBuffer(h,f),m.count===-1?n.bufferSubData(h,0,p):(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);d&&(n.deleteBuffer(d.buffer),i.delete(f))}function l(f,d){if(f.isGLBufferAttribute){const p=i.get(f);(!p||p.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const h=i.get(f);h===void 0?i.set(f,r(f,d)):h.version<f.version&&(s(h.buffer,f,d),h.version=f.version)}return{get:o,remove:a,update:l}}class lu extends _t{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),f=a+1,d=l+1,h=e/a,p=t/l,m=[],g=[],v=[],x=[];for(let _=0;_<d;_++){const w=_*p-o;for(let b=0;b<f;b++){const M=b*h-s;g.push(M,-w,0),v.push(0,0,1),x.push(b/a),x.push(1-_/l)}}for(let _=0;_<l;_++)for(let w=0;w<a;w++){const b=w+f*_,M=w+f*(_+1),C=w+1+f*(_+1),A=w+1+f*_;m.push(b,M,A),m.push(M,C,A)}this.setIndex(m),this.setAttribute("position",new je(g,3)),this.setAttribute("normal",new je(v,3)),this.setAttribute("uv",new je(x,2))}static fromJSON(e){return new lu(e.width,e.height,e.widthSegments,e.heightSegments)}}var R4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,L4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,k4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,D4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,O4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,N4="vec3 transformed = vec3( position );",z4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,F4=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,B4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,U4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,V4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,W4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,H4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,G4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,j4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,X4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Y4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,q4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Z4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,K4=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,J4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Q4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ez=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,tz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nz="gl_FragColor = linearToOutputTexel( gl_FragColor );",iz=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,rz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,sz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,oz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,az=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,hz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,pz=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,mz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,gz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xz=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,_z=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Sz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Mz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Ez=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Tz=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Cz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Az=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Pz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Rz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Iz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Dz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Oz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Nz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Bz=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Uz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Vz=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Wz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Hz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,$z=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Gz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,qz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Zz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Kz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Jz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Qz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,e5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,t5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,n5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,i5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,r5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,s5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,o5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,a5=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,l5=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,c5=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,u5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,f5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,d5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,h5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,p5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,m5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,g5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,y5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,v5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,x5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,_5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,w5=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,S5=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,b5=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,M5=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,E5=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,T5=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,C5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const A5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,P5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,R5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,L5=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,I5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,k5=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,D5=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,O5=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,N5=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,z5=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,F5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,B5=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,U5=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,V5=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W5=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,H5=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$5=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,G5=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j5=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,X5=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y5=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,q5=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Z5=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K5=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Q5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rF=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sF=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,oF=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xt={alphamap_fragment:R4,alphamap_pars_fragment:L4,alphatest_fragment:I4,alphatest_pars_fragment:k4,aomap_fragment:D4,aomap_pars_fragment:O4,begin_vertex:N4,beginnormal_vertex:z4,bsdfs:F4,iridescence_fragment:B4,bumpmap_pars_fragment:U4,clipping_planes_fragment:V4,clipping_planes_pars_fragment:W4,clipping_planes_pars_vertex:H4,clipping_planes_vertex:$4,color_fragment:G4,color_pars_fragment:j4,color_pars_vertex:X4,color_vertex:Y4,common:q4,cube_uv_reflection_fragment:Z4,defaultnormal_vertex:K4,displacementmap_pars_vertex:J4,displacementmap_vertex:Q4,emissivemap_fragment:ez,emissivemap_pars_fragment:tz,encodings_fragment:nz,encodings_pars_fragment:iz,envmap_fragment:rz,envmap_common_pars_fragment:sz,envmap_pars_fragment:oz,envmap_pars_vertex:az,envmap_physical_pars_fragment:xz,envmap_vertex:lz,fog_vertex:cz,fog_pars_vertex:uz,fog_fragment:fz,fog_pars_fragment:dz,gradientmap_pars_fragment:hz,lightmap_fragment:pz,lightmap_pars_fragment:mz,lights_lambert_fragment:gz,lights_lambert_pars_fragment:yz,lights_pars_begin:vz,lights_toon_fragment:_z,lights_toon_pars_fragment:wz,lights_phong_fragment:Sz,lights_phong_pars_fragment:bz,lights_physical_fragment:Mz,lights_physical_pars_fragment:Ez,lights_fragment_begin:Tz,lights_fragment_maps:Cz,lights_fragment_end:Az,logdepthbuf_fragment:Pz,logdepthbuf_pars_fragment:Rz,logdepthbuf_pars_vertex:Lz,logdepthbuf_vertex:Iz,map_fragment:kz,map_pars_fragment:Dz,map_particle_fragment:Oz,map_particle_pars_fragment:Nz,metalnessmap_fragment:zz,metalnessmap_pars_fragment:Fz,morphcolor_vertex:Bz,morphnormal_vertex:Uz,morphtarget_pars_vertex:Vz,morphtarget_vertex:Wz,normal_fragment_begin:Hz,normal_fragment_maps:$z,normal_pars_fragment:Gz,normal_pars_vertex:jz,normal_vertex:Xz,normalmap_pars_fragment:Yz,clearcoat_normal_fragment_begin:qz,clearcoat_normal_fragment_maps:Zz,clearcoat_pars_fragment:Kz,iridescence_pars_fragment:Jz,output_fragment:Qz,packing:e5,premultiplied_alpha_fragment:t5,project_vertex:n5,dithering_fragment:i5,dithering_pars_fragment:r5,roughnessmap_fragment:s5,roughnessmap_pars_fragment:o5,shadowmap_pars_fragment:a5,shadowmap_pars_vertex:l5,shadowmap_vertex:c5,shadowmask_pars_fragment:u5,skinbase_vertex:f5,skinning_pars_vertex:d5,skinning_vertex:h5,skinnormal_vertex:p5,specularmap_fragment:m5,specularmap_pars_fragment:g5,tonemapping_fragment:y5,tonemapping_pars_fragment:v5,transmission_fragment:x5,transmission_pars_fragment:_5,uv_pars_fragment:w5,uv_pars_vertex:S5,uv_vertex:b5,uv2_pars_fragment:M5,uv2_pars_vertex:E5,uv2_vertex:T5,worldpos_vertex:C5,background_vert:A5,background_frag:P5,backgroundCube_vert:R5,backgroundCube_frag:L5,cube_vert:I5,cube_frag:k5,depth_vert:D5,depth_frag:O5,distanceRGBA_vert:N5,distanceRGBA_frag:z5,equirect_vert:F5,equirect_frag:B5,linedashed_vert:U5,linedashed_frag:V5,meshbasic_vert:W5,meshbasic_frag:H5,meshlambert_vert:$5,meshlambert_frag:G5,meshmatcap_vert:j5,meshmatcap_frag:X5,meshnormal_vert:Y5,meshnormal_frag:q5,meshphong_vert:Z5,meshphong_frag:K5,meshphysical_vert:J5,meshphysical_frag:Q5,meshtoon_vert:eF,meshtoon_frag:tF,points_vert:nF,points_frag:iF,shadow_vert:rF,shadow_frag:sF,sprite_vert:oF,sprite_frag:aF},Re={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zi},uv2Transform:{value:new Zi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zi}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zi}}},Wr={basic:{uniforms:_i([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:_i([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Oe(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:_i([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:_i([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:_i([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Oe(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:_i([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:_i([Re.points,Re.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:_i([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:_i([Re.common,Re.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:_i([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:_i([Re.sprite,Re.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new Zi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:_i([Re.common,Re.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:_i([Re.lights,Re.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};Wr.physical={uniforms:_i([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ye(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const kp={r:0,b:0,g:0};function lF(n,e,t,i,r,s,o){const a=new Oe(0);let l=s===!0?0:1,f,d,h=null,p=0,m=null;function g(x,_){let w=!1,b=_.isScene===!0?_.background:null;b&&b.isTexture&&(b=(_.backgroundBlurriness>0?t:e).get(b));const M=n.xr,C=M.getSession&&M.getSession();C&&C.environmentBlendMode==="additive"&&(b=null),b===null?v(a,l):b&&b.isColor&&(v(b,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===su)?(d===void 0&&(d=new qn(new ha(1,1,1),new ps({name:"BackgroundCubeMaterial",uniforms:qc(Wr.backgroundCube.uniforms),vertexShader:Wr.backgroundCube.vertexShader,fragmentShader:Wr.backgroundCube.fragmentShader,side:Ji,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(A,R,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.toneMapped=b.encoding!==qt,(h!==b||p!==b.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,h=b,p=b.version,m=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(f===void 0&&(f=new qn(new lu(2,2),new ps({name:"BackgroundMaterial",uniforms:qc(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:Zo,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=b,f.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,f.material.toneMapped=b.encoding!==qt,b.matrixAutoUpdate===!0&&b.updateMatrix(),f.material.uniforms.uvTransform.value.copy(b.matrix),(h!==b||p!==b.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,h=b,p=b.version,m=n.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null))}function v(x,_){x.getRGB(kp,TP(n)),i.buffers.color.setClear(kp.r,kp.g,kp.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(x,_=1){a.set(x),l=_,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,v(a,l)},render:g}}function cF(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=x(null);let f=l,d=!1;function h(V,q,ee,oe,N){let Y=!1;if(o){const Z=v(oe,ee,q);f!==Z&&(f=Z,m(f.object)),Y=_(V,oe,ee,N),Y&&w(V,oe,ee,N)}else{const Z=q.wireframe===!0;(f.geometry!==oe.id||f.program!==ee.id||f.wireframe!==Z)&&(f.geometry=oe.id,f.program=ee.id,f.wireframe=Z,Y=!0)}N!==null&&t.update(N,34963),(Y||d)&&(d=!1,T(V,q,ee,oe),N!==null&&n.bindBuffer(34963,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(V){return i.isWebGL2?n.bindVertexArray(V):s.bindVertexArrayOES(V)}function g(V){return i.isWebGL2?n.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function v(V,q,ee){const oe=ee.wireframe===!0;let N=a[V.id];N===void 0&&(N={},a[V.id]=N);let Y=N[q.id];Y===void 0&&(Y={},N[q.id]=Y);let Z=Y[oe];return Z===void 0&&(Z=x(p()),Y[oe]=Z),Z}function x(V){const q=[],ee=[],oe=[];for(let N=0;N<r;N++)q[N]=0,ee[N]=0,oe[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:ee,attributeDivisors:oe,object:V,attributes:{},index:null}}function _(V,q,ee,oe){const N=f.attributes,Y=q.attributes;let Z=0;const j=ee.getAttributes();for(const K in j)if(j[K].location>=0){const ge=N[K];let ve=Y[K];if(ve===void 0&&(K==="instanceMatrix"&&V.instanceMatrix&&(ve=V.instanceMatrix),K==="instanceColor"&&V.instanceColor&&(ve=V.instanceColor)),ge===void 0||ge.attribute!==ve||ve&&ge.data!==ve.data)return!0;Z++}return f.attributesNum!==Z||f.index!==oe}function w(V,q,ee,oe){const N={},Y=q.attributes;let Z=0;const j=ee.getAttributes();for(const K in j)if(j[K].location>=0){let ge=Y[K];ge===void 0&&(K==="instanceMatrix"&&V.instanceMatrix&&(ge=V.instanceMatrix),K==="instanceColor"&&V.instanceColor&&(ge=V.instanceColor));const ve={};ve.attribute=ge,ge&&ge.data&&(ve.data=ge.data),N[K]=ve,Z++}f.attributes=N,f.attributesNum=Z,f.index=oe}function b(){const V=f.newAttributes;for(let q=0,ee=V.length;q<ee;q++)V[q]=0}function M(V){C(V,0)}function C(V,q){const ee=f.newAttributes,oe=f.enabledAttributes,N=f.attributeDivisors;ee[V]=1,oe[V]===0&&(n.enableVertexAttribArray(V),oe[V]=1),N[V]!==q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,q),N[V]=q)}function A(){const V=f.newAttributes,q=f.enabledAttributes;for(let ee=0,oe=q.length;ee<oe;ee++)q[ee]!==V[ee]&&(n.disableVertexAttribArray(ee),q[ee]=0)}function R(V,q,ee,oe,N,Y){i.isWebGL2===!0&&(ee===5124||ee===5125)?n.vertexAttribIPointer(V,q,ee,N,Y):n.vertexAttribPointer(V,q,ee,oe,N,Y)}function T(V,q,ee,oe){if(i.isWebGL2===!1&&(V.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const N=oe.attributes,Y=ee.getAttributes(),Z=q.defaultAttributeValues;for(const j in Y){const K=Y[j];if(K.location>=0){let ue=N[j];if(ue===void 0&&(j==="instanceMatrix"&&V.instanceMatrix&&(ue=V.instanceMatrix),j==="instanceColor"&&V.instanceColor&&(ue=V.instanceColor)),ue!==void 0){const ge=ue.normalized,ve=ue.itemSize,re=t.get(ue);if(re===void 0)continue;const ze=re.buffer,Ie=re.type,Xe=re.bytesPerElement;if(ue.isInterleavedBufferAttribute){const Ae=ue.data,Ye=Ae.stride,de=ue.offset;if(Ae.isInstancedInterleavedBuffer){for(let le=0;le<K.locationSize;le++)C(K.location+le,Ae.meshPerAttribute);V.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let le=0;le<K.locationSize;le++)M(K.location+le);n.bindBuffer(34962,ze);for(let le=0;le<K.locationSize;le++)R(K.location+le,ve/K.locationSize,Ie,ge,Ye*Xe,(de+ve/K.locationSize*le)*Xe)}else{if(ue.isInstancedBufferAttribute){for(let Ae=0;Ae<K.locationSize;Ae++)C(K.location+Ae,ue.meshPerAttribute);V.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Ae=0;Ae<K.locationSize;Ae++)M(K.location+Ae);n.bindBuffer(34962,ze);for(let Ae=0;Ae<K.locationSize;Ae++)R(K.location+Ae,ve/K.locationSize,Ie,ge,ve*Xe,ve/K.locationSize*Ae*Xe)}}else if(Z!==void 0){const ge=Z[j];if(ge!==void 0)switch(ge.length){case 2:n.vertexAttrib2fv(K.location,ge);break;case 3:n.vertexAttrib3fv(K.location,ge);break;case 4:n.vertexAttrib4fv(K.location,ge);break;default:n.vertexAttrib1fv(K.location,ge)}}}}A()}function D(){$();for(const V in a){const q=a[V];for(const ee in q){const oe=q[ee];for(const N in oe)g(oe[N].object),delete oe[N];delete q[ee]}delete a[V]}}function k(V){if(a[V.id]===void 0)return;const q=a[V.id];for(const ee in q){const oe=q[ee];for(const N in oe)g(oe[N].object),delete oe[N];delete q[ee]}delete a[V.id]}function O(V){for(const q in a){const ee=a[q];if(ee[V.id]===void 0)continue;const oe=ee[V.id];for(const N in oe)g(oe[N].object),delete oe[N];delete ee[V.id]}}function $(){W(),d=!0,f!==l&&(f=l,m(f.object))}function W(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:$,resetDefaultState:W,dispose:D,releaseStatesOfGeometry:k,releaseStatesOfProgram:O,initAttributes:b,enableAttribute:M,disableUnusedAttributes:A}}function uF(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function a(f,d){n.drawArrays(s,f,d),t.update(d,s,1)}function l(f,d,h){if(h===0)return;let p,m;if(r)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,f,d,h),t.update(d,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function fF(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const f=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),p=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),v=n.getParameter(34921),x=n.getParameter(36347),_=n.getParameter(36348),w=n.getParameter(36349),b=p>0,M=o||e.has("OES_texture_float"),C=b&&M,A=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:b,floatFragmentTextures:M,floatVertexTextures:C,maxSamples:A}}function dF(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Bs,a=new Zi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p,m){const g=h.length!==0||p||i!==0||r;return r=p,t=d(h,m,0),i=h.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,f()},this.setState=function(h,p,m){const g=h.clippingPlanes,v=h.clipIntersection,x=h.clipShadows,_=n.get(h);if(!r||g===null||g.length===0||s&&!x)s?d(null):f();else{const w=s?0:i,b=w*4;let M=_.clippingState||null;l.value=M,M=d(g,p,b,m);for(let C=0;C!==b;++C)M[C]=t[C];_.clippingState=M,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=w}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,p,m,g){const v=h!==null?h.length:0;let x=null;if(v!==0){if(x=l.value,g!==!0||x===null){const _=m+v*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(x===null||x.length<_)&&(x=new Float32Array(_));for(let b=0,M=m;b!==v;++b,M+=4)o.copy(h[b]).applyMatrix4(w,a),o.normal.toArray(x,M),x[M+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,x}}function hF(n){let e=new WeakMap;function t(o,a){return a===rd?o.mapping=Ko:a===sd&&(o.mapping=Jo),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===rd||a===sd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new PP(l.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Xs extends Nd{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Tc=4,fE=[.125,.215,.35,.446,.526,.582],Ua=20,vv=new Xs,dE=new Oe;let xv=null;const Fa=(1+Math.sqrt(5))/2,ec=1/Fa,hE=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,Fa,ec),new z(0,Fa,-ec),new z(ec,0,Fa),new z(-ec,0,Fa),new z(Fa,ec,0),new z(-Fa,ec,0)];class b1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){xv=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xv),e.scissorTest=!1,Dp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ko||e.mapping===Jo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xv=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Mn,minFilter:Mn,generateMipmaps:!1,type:Xc,format:Di,encoding:ea,depthBuffer:!1},r=pE(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pE(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pF(s)),this._blurMaterial=mF(s,e,t)}return r}_compileMaterial(e){const t=new qn(this._lodPlanes[0],e);this._renderer.compile(t,vv)}_sceneToCubeUV(e,t,i,r){const a=new yn(90,1,t,i),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(dE),d.toneMapping=Gr,d.autoClear=!1;const m=new da({name:"PMREM.Background",side:Ji,depthWrite:!1,depthTest:!1}),g=new qn(new ha,m);let v=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,v=!0):(m.color.copy(dE),v=!0);for(let _=0;_<6;_++){const w=_%3;w===0?(a.up.set(0,l[_],0),a.lookAt(f[_],0,0)):w===1?(a.up.set(0,0,l[_]),a.lookAt(0,f[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,f[_]));const b=this._cubeSize;Dp(r,w*b,_>2?b:0,b,b),d.setRenderTarget(r),v&&d.render(g,a),d.render(e,a)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ko||e.mapping===Jo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=gE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mE());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Dp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,vv)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=hE[(r-1)%hE.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new qn(this._lodPlanes[r],f),p=f.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Ua-1),v=s/g,x=isFinite(s)?1+Math.floor(d*v):Ua;x>Ua&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Ua}`);const _=[];let w=0;for(let R=0;R<Ua;++R){const T=R/v,D=Math.exp(-T*T/2);_.push(D),R===0?w+=D:R<x&&(w+=2*D)}for(let R=0;R<_.length;R++)_[R]=_[R]/w;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=_,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:b}=this;p.dTheta.value=g,p.mipInt.value=b-i;const M=this._sizeLods[r],C=3*M*(r>b-Tc?r-b+Tc:0),A=4*(this._cubeSize-M);Dp(t,C,A,3*M,2*M),l.setRenderTarget(t),l.render(h,vv)}}function pF(n){const e=[],t=[],i=[];let r=n;const s=n-Tc+1+fE.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Tc?l=fE[o-n+Tc-1]:o===0&&(l=0),i.push(l);const f=1/(a-2),d=-f,h=1+f,p=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,g=6,v=3,x=2,_=1,w=new Float32Array(v*g*m),b=new Float32Array(x*g*m),M=new Float32Array(_*g*m);for(let A=0;A<m;A++){const R=A%3*2/3-1,T=A>2?0:-1,D=[R,T,0,R+2/3,T,0,R+2/3,T+1,0,R,T,0,R+2/3,T+1,0,R,T+1,0];w.set(D,v*g*A),b.set(p,x*g*A);const k=[A,A,A,A,A,A];M.set(k,_*g*A)}const C=new _t;C.setAttribute("position",new Xt(w,v)),C.setAttribute("uv",new Xt(b,x)),C.setAttribute("faceIndex",new Xt(M,_)),e.push(C),r>Tc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function pE(n,e,t){const i=new Cr(n,e,t);return i.texture.mapping=su,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Dp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function mF(n,e,t){const i=new Float32Array(Ua),r=new z(0,1,0);return new ps({name:"SphericalGaussianBlur",defines:{n:Ua,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function mE(){return new ps({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function gE(){return new ps({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Zs,depthTest:!1,depthWrite:!1})}function mw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gF(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,f=l===rd||l===sd,d=l===Ko||l===Jo;if(f||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new b1(n)),h=f?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(f&&h&&h.height>0||d&&h&&r(h)){t===null&&(t=new b1(n));const p=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const f=6;for(let d=0;d<f;d++)a[d]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function yF(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function vF(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const g in p)e.update(p[g],34962);const m=h.morphAttributes;for(const g in m){const v=m[g];for(let x=0,_=v.length;x<_;x++)e.update(v[x],34962)}}function f(h){const p=[],m=h.index,g=h.attributes.position;let v=0;if(m!==null){const w=m.array;v=m.version;for(let b=0,M=w.length;b<M;b+=3){const C=w[b+0],A=w[b+1],R=w[b+2];p.push(C,A,A,R,R,C)}}else{const w=g.array;v=g.version;for(let b=0,M=w.length/3-1;b<M;b+=3){const C=b+0,A=b+1,R=b+2;p.push(C,A,A,R,R,C)}}const x=new(MP(p)?pw:hw)(p,1);x.version=v;const _=s.get(h);_&&e.remove(_),s.set(h,x)}function d(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&f(h)}else f(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:d}}function xF(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function f(p){a=p.type,l=p.bytesPerElement}function d(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function h(p,m,g){if(g===0)return;let v,x;if(r)v=n,x="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](s,m,a,p*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=f,this.render=d,this.renderInstances=h}function _F(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function wF(n,e){return n[0]-e[0]}function SF(n,e){return Math.abs(e[1])-Math.abs(n[1])}function bF(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Ut,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function l(f,d,h,p){const m=f.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,x=v!==void 0?v.length:0;let _=s.get(d);if(_===void 0||_.count!==x){let ee=function(){V.dispose(),s.delete(d),d.removeEventListener("dispose",ee)};var g=ee;_!==void 0&&_.texture.dispose();const M=d.morphAttributes.position!==void 0,C=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,R=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],D=d.morphAttributes.color||[];let k=0;M===!0&&(k=1),C===!0&&(k=2),A===!0&&(k=3);let O=d.attributes.position.count*k,$=1;O>e.maxTextureSize&&($=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const W=new Float32Array(O*$*4*x),V=new Od(W,O,$,x);V.type=Gs,V.needsUpdate=!0;const q=k*4;for(let oe=0;oe<x;oe++){const N=R[oe],Y=T[oe],Z=D[oe],j=O*$*4*oe;for(let K=0;K<N.count;K++){const ue=K*q;M===!0&&(o.fromBufferAttribute(N,K),W[j+ue+0]=o.x,W[j+ue+1]=o.y,W[j+ue+2]=o.z,W[j+ue+3]=0),C===!0&&(o.fromBufferAttribute(Y,K),W[j+ue+4]=o.x,W[j+ue+5]=o.y,W[j+ue+6]=o.z,W[j+ue+7]=0),A===!0&&(o.fromBufferAttribute(Z,K),W[j+ue+8]=o.x,W[j+ue+9]=o.y,W[j+ue+10]=o.z,W[j+ue+11]=Z.itemSize===4?o.w:1)}}_={count:x,texture:V,size:new ye(O,$)},s.set(d,_),d.addEventListener("dispose",ee)}let w=0;for(let M=0;M<m.length;M++)w+=m[M];const b=d.morphTargetsRelative?1:1-w;p.getUniforms().setValue(n,"morphTargetBaseInfluence",b),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=m===void 0?0:m.length;let x=i[d.id];if(x===void 0||x.length!==v){x=[];for(let C=0;C<v;C++)x[C]=[C,0];i[d.id]=x}for(let C=0;C<v;C++){const A=x[C];A[0]=C,A[1]=m[C]}x.sort(SF);for(let C=0;C<8;C++)C<v&&x[C][1]?(a[C][0]=x[C][0],a[C][1]=x[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(wF);const _=d.morphAttributes.position,w=d.morphAttributes.normal;let b=0;for(let C=0;C<8;C++){const A=a[C],R=A[0],T=A[1];R!==Number.MAX_SAFE_INTEGER&&T?(_&&d.getAttribute("morphTarget"+C)!==_[R]&&d.setAttribute("morphTarget"+C,_[R]),w&&d.getAttribute("morphNormal"+C)!==w[R]&&d.setAttribute("morphNormal"+C,w[R]),r[C]=T,b+=T):(_&&d.hasAttribute("morphTarget"+C)===!0&&d.deleteAttribute("morphTarget"+C),w&&d.hasAttribute("morphNormal"+C)===!0&&d.deleteAttribute("morphNormal"+C),r[C]=0)}const M=d.morphTargetsRelative?1:1-b;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function MF(n,e,t,i){let r=new WeakMap;function s(l){const f=i.render.frame,d=l.geometry,h=e.get(l,d);return r.get(h)!==f&&(e.update(h),r.set(h,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){r=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const LP=new jn,IP=new Od,kP=new qg,DP=new zd,yE=[],vE=[],xE=new Float32Array(16),_E=new Float32Array(9),wE=new Float32Array(4);function cu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=yE[r];if(s===void 0&&(s=new Float32Array(r),yE[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function On(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Nn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Kg(n,e){let t=vE[e];t===void 0&&(t=new Int32Array(e),vE[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function EF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function TF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2fv(this.addr,e),Nn(t,e)}}function CF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(On(t,e))return;n.uniform3fv(this.addr,e),Nn(t,e)}}function AF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4fv(this.addr,e),Nn(t,e)}}function PF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Nn(t,e)}else{if(On(t,i))return;wE.set(i),n.uniformMatrix2fv(this.addr,!1,wE),Nn(t,i)}}function RF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Nn(t,e)}else{if(On(t,i))return;_E.set(i),n.uniformMatrix3fv(this.addr,!1,_E),Nn(t,i)}}function LF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Nn(t,e)}else{if(On(t,i))return;xE.set(i),n.uniformMatrix4fv(this.addr,!1,xE),Nn(t,i)}}function IF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function kF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2iv(this.addr,e),Nn(t,e)}}function DF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3iv(this.addr,e),Nn(t,e)}}function OF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4iv(this.addr,e),Nn(t,e)}}function NF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function zF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2uiv(this.addr,e),Nn(t,e)}}function FF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3uiv(this.addr,e),Nn(t,e)}}function BF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4uiv(this.addr,e),Nn(t,e)}}function UF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||LP,r)}function VF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||kP,r)}function WF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||DP,r)}function HF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||IP,r)}function $F(n){switch(n){case 5126:return EF;case 35664:return TF;case 35665:return CF;case 35666:return AF;case 35674:return PF;case 35675:return RF;case 35676:return LF;case 5124:case 35670:return IF;case 35667:case 35671:return kF;case 35668:case 35672:return DF;case 35669:case 35673:return OF;case 5125:return NF;case 36294:return zF;case 36295:return FF;case 36296:return BF;case 35678:case 36198:case 36298:case 36306:case 35682:return UF;case 35679:case 36299:case 36307:return VF;case 35680:case 36300:case 36308:case 36293:return WF;case 36289:case 36303:case 36311:case 36292:return HF}}function GF(n,e){n.uniform1fv(this.addr,e)}function jF(n,e){const t=cu(e,this.size,2);n.uniform2fv(this.addr,t)}function XF(n,e){const t=cu(e,this.size,3);n.uniform3fv(this.addr,t)}function YF(n,e){const t=cu(e,this.size,4);n.uniform4fv(this.addr,t)}function qF(n,e){const t=cu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ZF(n,e){const t=cu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function KF(n,e){const t=cu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function JF(n,e){n.uniform1iv(this.addr,e)}function QF(n,e){n.uniform2iv(this.addr,e)}function eB(n,e){n.uniform3iv(this.addr,e)}function tB(n,e){n.uniform4iv(this.addr,e)}function nB(n,e){n.uniform1uiv(this.addr,e)}function iB(n,e){n.uniform2uiv(this.addr,e)}function rB(n,e){n.uniform3uiv(this.addr,e)}function sB(n,e){n.uniform4uiv(this.addr,e)}function oB(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||LP,s[o])}function aB(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||kP,s[o])}function lB(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||DP,s[o])}function cB(n,e,t){const i=this.cache,r=e.length,s=Kg(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||IP,s[o])}function uB(n){switch(n){case 5126:return GF;case 35664:return jF;case 35665:return XF;case 35666:return YF;case 35674:return qF;case 35675:return ZF;case 35676:return KF;case 5124:case 35670:return JF;case 35667:case 35671:return QF;case 35668:case 35672:return eB;case 35669:case 35673:return tB;case 5125:return nB;case 36294:return iB;case 36295:return rB;case 36296:return sB;case 35678:case 36198:case 36298:case 36306:case 35682:return oB;case 35679:case 36299:case 36307:return aB;case 35680:case 36300:case 36308:case 36293:return lB;case 36289:case 36303:case 36311:case 36292:return cB}}class fB{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=$F(t.type)}}class dB{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=uB(t.type)}}class hB{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const _v=/(\w+)(\])?(\[|\.)?/g;function SE(n,e){n.seq.push(e),n.map[e.id]=e}function pB(n,e,t){const i=n.name,r=i.length;for(_v.lastIndex=0;;){const s=_v.exec(i),o=_v.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===r){SE(t,f===void 0?new fB(a,n,e):new dB(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new hB(a),SE(t,h)),t=h}}}class km{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);pB(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function bE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let mB=0;function gB(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function yB(n){switch(n){case ea:return["Linear","( value )"];case qt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function ME(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+gB(n.getShaderSource(e),o)}else return r}function vB(n,e){const t=yB(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function xB(n,e){let t;switch(e){case qA:t="Linear";break;case ZA:t="Reinhard";break;case KA:t="OptimizedCineon";break;case aw:t="ACESFilmic";break;case JA:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function _B(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_f).join(`
`)}function wB(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function SB(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function _f(n){return n!==""}function EE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bB=/^[ \t]*#include +<([\w\d./]+)>/gm;function M1(n){return n.replace(bB,MB)}function MB(n,e){const t=xt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return M1(t)}const EB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CE(n){return n.replace(EB,TB)}function TB(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function AE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function CB(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===jg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$a&&(e="SHADOWMAP_TYPE_VSM"),e}function AB(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ko:case Jo:e="ENVMAP_TYPE_CUBE";break;case su:e="ENVMAP_TYPE_CUBE_UV";break}return e}function PB(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Jo:e="ENVMAP_MODE_REFRACTION";break}return e}function RB(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Dd:e="ENVMAP_BLENDING_MULTIPLY";break;case XA:e="ENVMAP_BLENDING_MIX";break;case YA:e="ENVMAP_BLENDING_ADD";break}return e}function LB(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function IB(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=CB(t),f=AB(t),d=PB(t),h=RB(t),p=LB(t),m=t.isWebGL2?"":_B(t),g=wB(s),v=r.createProgram();let x,_,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=[g].filter(_f).join(`
`),x.length>0&&(x+=`
`),_=[m,g].filter(_f).join(`
`),_.length>0&&(_+=`
`)):(x=[AE(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_f).join(`
`),_=[m,AE(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Gr?"#define TONE_MAPPING":"",t.toneMapping!==Gr?xt.tonemapping_pars_fragment:"",t.toneMapping!==Gr?xB("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xt.encodings_pars_fragment,vB("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_f).join(`
`)),o=M1(o),o=EE(o,t),o=TE(o,t),a=M1(a),a=EE(a,t),a=TE(a,t),o=CE(o),a=CE(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,_=["#define varying in",t.glslVersion===w1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===w1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const b=w+x+o,M=w+_+a,C=bE(r,35633,b),A=bE(r,35632,M);if(r.attachShader(v,C),r.attachShader(v,A),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const D=r.getProgramInfoLog(v).trim(),k=r.getShaderInfoLog(C).trim(),O=r.getShaderInfoLog(A).trim();let $=!0,W=!0;if(r.getProgramParameter(v,35714)===!1){$=!1;const V=ME(r,C,"vertex"),q=ME(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+`

Program Info Log: `+D+`
`+V+`
`+q)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(k===""||O==="")&&(W=!1);W&&(this.diagnostics={runnable:$,programLog:D,vertexShader:{log:k,prefix:x},fragmentShader:{log:O,prefix:_}})}r.deleteShader(C),r.deleteShader(A);let R;this.getUniforms=function(){return R===void 0&&(R=new km(r,v)),R};let T;return this.getAttributes=function(){return T===void 0&&(T=SB(r,v)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=mB++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=C,this.fragmentShader=A,this}let kB=0;class DB{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new OB(e),t.set(e,i)),i}}class OB{constructor(e){this.id=kB++,this.code=e,this.usedTimes=0}}function NB(n,e,t,i,r,s,o){const a=new rl,l=new DB,f=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(T,D,k,O,$){const W=O.fog,V=$.geometry,q=T.isMeshStandardMaterial?O.environment:null,ee=(T.isMeshStandardMaterial?t:e).get(T.envMap||q),oe=ee&&ee.mapping===su?ee.image.height:null,N=g[T.type];T.precision!==null&&(m=r.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const Y=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Z=Y!==void 0?Y.length:0;let j=0;V.morphAttributes.position!==void 0&&(j=1),V.morphAttributes.normal!==void 0&&(j=2),V.morphAttributes.color!==void 0&&(j=3);let K,ue,ge,ve;if(N){const Ye=Wr[N];K=Ye.vertexShader,ue=Ye.fragmentShader}else K=T.vertexShader,ue=T.fragmentShader,l.update(T),ge=l.getVertexShaderID(T),ve=l.getFragmentShaderID(T);const re=n.getRenderTarget(),ze=T.alphaTest>0,Ie=T.clearcoat>0,Xe=T.iridescence>0;return{isWebGL2:d,shaderID:N,shaderName:T.type,vertexShader:K,fragmentShader:ue,defines:T.defines,customVertexShaderID:ge,customFragmentShaderID:ve,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,instancing:$.isInstancedMesh===!0,instancingColor:$.isInstancedMesh===!0&&$.instanceColor!==null,supportsVertexTextures:p,outputEncoding:re===null?n.outputEncoding:re.isXRRenderTarget===!0?re.texture.encoding:ea,map:!!T.map,matcap:!!T.matcap,envMap:!!ee,envMapMode:ee&&ee.mapping,envMapCubeUVHeight:oe,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===xP,tangentSpaceNormalMap:T.normalMapType===fa,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===qt,clearcoat:Ie,clearcoatMap:Ie&&!!T.clearcoatMap,clearcoatRoughnessMap:Ie&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:Ie&&!!T.clearcoatNormalMap,iridescence:Xe,iridescenceMap:Xe&&!!T.iridescenceMap,iridescenceThicknessMap:Xe&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===el,alphaMap:!!T.alphaMap,alphaTest:ze,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!V.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!W,useFog:T.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:$.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:j,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Gr,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Yi,flipSided:T.side===Ji,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function x(T){const D=[];if(T.shaderID?D.push(T.shaderID):(D.push(T.customVertexShaderID),D.push(T.customFragmentShaderID)),T.defines!==void 0)for(const k in T.defines)D.push(k),D.push(T.defines[k]);return T.isRawShaderMaterial===!1&&(_(D,T),w(D,T),D.push(n.outputEncoding)),D.push(T.customProgramCacheKey),D.join()}function _(T,D){T.push(D.precision),T.push(D.outputEncoding),T.push(D.envMapMode),T.push(D.envMapCubeUVHeight),T.push(D.combine),T.push(D.vertexUvs),T.push(D.fogExp2),T.push(D.sizeAttenuation),T.push(D.morphTargetsCount),T.push(D.morphAttributeCount),T.push(D.numDirLights),T.push(D.numPointLights),T.push(D.numSpotLights),T.push(D.numSpotLightMaps),T.push(D.numHemiLights),T.push(D.numRectAreaLights),T.push(D.numDirLightShadows),T.push(D.numPointLightShadows),T.push(D.numSpotLightShadows),T.push(D.numSpotLightShadowsWithMaps),T.push(D.shadowMapType),T.push(D.toneMapping),T.push(D.numClippingPlanes),T.push(D.numClipIntersection),T.push(D.depthPacking)}function w(T,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),T.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.physicallyCorrectLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.specularIntensityMap&&a.enable(15),D.specularColorMap&&a.enable(16),D.transmission&&a.enable(17),D.transmissionMap&&a.enable(18),D.thicknessMap&&a.enable(19),D.sheen&&a.enable(20),D.sheenColorMap&&a.enable(21),D.sheenRoughnessMap&&a.enable(22),D.decodeVideoTexture&&a.enable(23),D.opaque&&a.enable(24),T.push(a.mask)}function b(T){const D=g[T.type];let k;if(D){const O=Wr[D];k=CP.clone(O.uniforms)}else k=T.uniforms;return k}function M(T,D){let k;for(let O=0,$=f.length;O<$;O++){const W=f[O];if(W.cacheKey===D){k=W,++k.usedTimes;break}}return k===void 0&&(k=new IB(n,D,T,s),f.push(k)),k}function C(T){if(--T.usedTimes===0){const D=f.indexOf(T);f[D]=f[f.length-1],f.pop(),T.destroy()}}function A(T){l.remove(T)}function R(){l.dispose()}return{getParameters:v,getProgramCacheKey:x,getUniforms:b,acquireProgram:M,releaseProgram:C,releaseShaderCache:A,programs:f,dispose:R}}function zB(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function FB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function RE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,p,m,g,v,x){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:m,groupOrder:g,renderOrder:h.renderOrder,z:v,group:x},n[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=m,_.groupOrder=g,_.renderOrder=h.renderOrder,_.z=v,_.group=x),e++,_}function a(h,p,m,g,v,x){const _=o(h,p,m,g,v,x);m.transmission>0?i.push(_):m.transparent===!0?r.push(_):t.push(_)}function l(h,p,m,g,v,x){const _=o(h,p,m,g,v,x);m.transmission>0?i.unshift(_):m.transparent===!0?r.unshift(_):t.unshift(_)}function f(h,p){t.length>1&&t.sort(h||FB),i.length>1&&i.sort(p||PE),r.length>1&&r.sort(p||PE)}function d(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:f}}function BB(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new RE,n.set(i,[o])):r>=s.length?(o=new RE,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function UB(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Oe};break;case"SpotLight":t={position:new z,direction:new z,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function VB(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let WB=0;function HB(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function $B(n,e){const t=new UB,i=VB(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new z);const s=new z,o=new pt,a=new pt;function l(d,h){let p=0,m=0,g=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let v=0,x=0,_=0,w=0,b=0,M=0,C=0,A=0,R=0,T=0;d.sort(HB);const D=h!==!0?Math.PI:1;for(let O=0,$=d.length;O<$;O++){const W=d[O],V=W.color,q=W.intensity,ee=W.distance,oe=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=V.r*q*D,m+=V.g*q*D,g+=V.b*q*D;else if(W.isLightProbe)for(let N=0;N<9;N++)r.probe[N].addScaledVector(W.sh.coefficients[N],q);else if(W.isDirectionalLight){const N=t.get(W);if(N.color.copy(W.color).multiplyScalar(W.intensity*D),W.castShadow){const Y=W.shadow,Z=i.get(W);Z.shadowBias=Y.bias,Z.shadowNormalBias=Y.normalBias,Z.shadowRadius=Y.radius,Z.shadowMapSize=Y.mapSize,r.directionalShadow[v]=Z,r.directionalShadowMap[v]=oe,r.directionalShadowMatrix[v]=W.shadow.matrix,M++}r.directional[v]=N,v++}else if(W.isSpotLight){const N=t.get(W);N.position.setFromMatrixPosition(W.matrixWorld),N.color.copy(V).multiplyScalar(q*D),N.distance=ee,N.coneCos=Math.cos(W.angle),N.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),N.decay=W.decay,r.spot[_]=N;const Y=W.shadow;if(W.map&&(r.spotLightMap[R]=W.map,R++,Y.updateMatrices(W),W.castShadow&&T++),r.spotLightMatrix[_]=Y.matrix,W.castShadow){const Z=i.get(W);Z.shadowBias=Y.bias,Z.shadowNormalBias=Y.normalBias,Z.shadowRadius=Y.radius,Z.shadowMapSize=Y.mapSize,r.spotShadow[_]=Z,r.spotShadowMap[_]=oe,A++}_++}else if(W.isRectAreaLight){const N=t.get(W);N.color.copy(V).multiplyScalar(q),N.halfWidth.set(W.width*.5,0,0),N.halfHeight.set(0,W.height*.5,0),r.rectArea[w]=N,w++}else if(W.isPointLight){const N=t.get(W);if(N.color.copy(W.color).multiplyScalar(W.intensity*D),N.distance=W.distance,N.decay=W.decay,W.castShadow){const Y=W.shadow,Z=i.get(W);Z.shadowBias=Y.bias,Z.shadowNormalBias=Y.normalBias,Z.shadowRadius=Y.radius,Z.shadowMapSize=Y.mapSize,Z.shadowCameraNear=Y.camera.near,Z.shadowCameraFar=Y.camera.far,r.pointShadow[x]=Z,r.pointShadowMap[x]=oe,r.pointShadowMatrix[x]=W.shadow.matrix,C++}r.point[x]=N,x++}else if(W.isHemisphereLight){const N=t.get(W);N.skyColor.copy(W.color).multiplyScalar(q*D),N.groundColor.copy(W.groundColor).multiplyScalar(q*D),r.hemi[b]=N,b++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Re.LTC_FLOAT_1,r.rectAreaLTC2=Re.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Re.LTC_HALF_1,r.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=g;const k=r.hash;(k.directionalLength!==v||k.pointLength!==x||k.spotLength!==_||k.rectAreaLength!==w||k.hemiLength!==b||k.numDirectionalShadows!==M||k.numPointShadows!==C||k.numSpotShadows!==A||k.numSpotMaps!==R)&&(r.directional.length=v,r.spot.length=_,r.rectArea.length=w,r.point.length=x,r.hemi.length=b,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=A+R-T,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=T,k.directionalLength=v,k.pointLength=x,k.spotLength=_,k.rectAreaLength=w,k.hemiLength=b,k.numDirectionalShadows=M,k.numPointShadows=C,k.numSpotShadows=A,k.numSpotMaps=R,r.version=WB++)}function f(d,h){let p=0,m=0,g=0,v=0,x=0;const _=h.matrixWorldInverse;for(let w=0,b=d.length;w<b;w++){const M=d[w];if(M.isDirectionalLight){const C=r.directional[p];C.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(_),p++}else if(M.isSpotLight){const C=r.spot[g];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(_),C.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(_),g++}else if(M.isRectAreaLight){const C=r.rectArea[v];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(_),a.identity(),o.copy(M.matrixWorld),o.premultiply(_),a.extractRotation(o),C.halfWidth.set(M.width*.5,0,0),C.halfHeight.set(0,M.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),v++}else if(M.isPointLight){const C=r.point[m];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(_),m++}else if(M.isHemisphereLight){const C=r.hemi[x];C.direction.setFromMatrixPosition(M.matrixWorld),C.direction.transformDirection(_),x++}}}return{setup:l,setupView:f,state:r}}function LE(n,e){const t=new $B(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function f(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:f,pushLight:o,pushShadow:a}}function GB(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new LE(n,e),t.set(s,[l])):o>=a.length?(l=new LE(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class gw extends Jn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yw extends Jn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const jB=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,XB=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YB(n,e,t){let i=new Zg;const r=new ye,s=new ye,o=new Ut,a=new gw({depthPacking:vP}),l=new yw,f={},d=t.maxTextureSize,h={0:Ji,1:Zo,2:Yi},p=new ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ye},radius:{value:4}},vertexShader:jB,fragmentShader:XB}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new _t;g.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new qn(g,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jg,this.render=function(M,C,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||M.length===0)return;const R=n.getRenderTarget(),T=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),k=n.state;k.setBlending(Zs),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let O=0,$=M.length;O<$;O++){const W=M[O],V=W.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;r.copy(V.mapSize);const q=V.getFrameExtents();if(r.multiply(q),s.copy(V.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/q.x),r.x=s.x*q.x,V.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/q.y),r.y=s.y*q.y,V.mapSize.y=s.y)),V.map===null){const oe=this.type!==$a?{minFilter:Sn,magFilter:Sn}:{};V.map=new Cr(r.x,r.y,oe),V.map.texture.name=W.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const ee=V.getViewportCount();for(let oe=0;oe<ee;oe++){const N=V.getViewport(oe);o.set(s.x*N.x,s.y*N.y,s.x*N.z,s.y*N.w),k.viewport(o),V.updateMatrices(W,oe),i=V.getFrustum(),b(C,A,V.camera,W,this.type)}V.isPointLightShadow!==!0&&this.type===$a&&_(V,A),V.needsUpdate=!1}x.needsUpdate=!1,n.setRenderTarget(R,T,D)};function _(M,C){const A=e.update(v);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Cr(r.x,r.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(C,null,A,p,v,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(C,null,A,m,v,null)}function w(M,C,A,R,T,D){let k=null;const O=A.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(O!==void 0)k=O;else if(k=A.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const $=k.uuid,W=C.uuid;let V=f[$];V===void 0&&(V={},f[$]=V);let q=V[W];q===void 0&&(q=k.clone(),V[W]=q),k=q}return k.visible=C.visible,k.wireframe=C.wireframe,D===$a?k.side=C.shadowSide!==null?C.shadowSide:C.side:k.side=C.shadowSide!==null?C.shadowSide:h[C.side],k.alphaMap=C.alphaMap,k.alphaTest=C.alphaTest,k.map=C.map,k.clipShadows=C.clipShadows,k.clippingPlanes=C.clippingPlanes,k.clipIntersection=C.clipIntersection,k.displacementMap=C.displacementMap,k.displacementScale=C.displacementScale,k.displacementBias=C.displacementBias,k.wireframeLinewidth=C.wireframeLinewidth,k.linewidth=C.linewidth,A.isPointLight===!0&&k.isMeshDistanceMaterial===!0&&(k.referencePosition.setFromMatrixPosition(A.matrixWorld),k.nearDistance=R,k.farDistance=T),k}function b(M,C,A,R,T){if(M.visible===!1)return;if(M.layers.test(C.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&T===$a)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,M.matrixWorld);const O=e.update(M),$=M.material;if(Array.isArray($)){const W=O.groups;for(let V=0,q=W.length;V<q;V++){const ee=W[V],oe=$[ee.materialIndex];if(oe&&oe.visible){const N=w(M,oe,R,A.near,A.far,T);n.renderBufferDirect(A,null,O,N,M,ee)}}}else if($.visible){const W=w(M,$,R,A.near,A.far,T);n.renderBufferDirect(A,null,O,W,M,null)}}const k=M.children;for(let O=0,$=k.length;O<$;O++)b(k[O],C,A,R,T)}}function qB(n,e,t){const i=t.isWebGL2;function r(){let G=!1;const ae=new Ut;let we=null;const Le=new Ut(0,0,0,0);return{setMask:function(Je){we!==Je&&!G&&(n.colorMask(Je,Je,Je,Je),we=Je)},setLocked:function(Je){G=Je},setClear:function(Je,Mt,Ft,Wt,pi){pi===!0&&(Je*=Wt,Mt*=Wt,Ft*=Wt),ae.set(Je,Mt,Ft,Wt),Le.equals(ae)===!1&&(n.clearColor(Je,Mt,Ft,Wt),Le.copy(ae))},reset:function(){G=!1,we=null,Le.set(-1,0,0,0)}}}function s(){let G=!1,ae=null,we=null,Le=null;return{setTest:function(Je){Je?ze(2929):Ie(2929)},setMask:function(Je){ae!==Je&&!G&&(n.depthMask(Je),ae=Je)},setFunc:function(Je){if(we!==Je){switch(Je){case UA:n.depthFunc(512);break;case VA:n.depthFunc(519);break;case WA:n.depthFunc(513);break;case og:n.depthFunc(515);break;case HA:n.depthFunc(514);break;case $A:n.depthFunc(518);break;case GA:n.depthFunc(516);break;case jA:n.depthFunc(517);break;default:n.depthFunc(515)}we=Je}},setLocked:function(Je){G=Je},setClear:function(Je){Le!==Je&&(n.clearDepth(Je),Le=Je)},reset:function(){G=!1,ae=null,we=null,Le=null}}}function o(){let G=!1,ae=null,we=null,Le=null,Je=null,Mt=null,Ft=null,Wt=null,pi=null;return{setTest:function(Lt){G||(Lt?ze(2960):Ie(2960))},setMask:function(Lt){ae!==Lt&&!G&&(n.stencilMask(Lt),ae=Lt)},setFunc:function(Lt,zn,Rn){(we!==Lt||Le!==zn||Je!==Rn)&&(n.stencilFunc(Lt,zn,Rn),we=Lt,Le=zn,Je=Rn)},setOp:function(Lt,zn,Rn){(Mt!==Lt||Ft!==zn||Wt!==Rn)&&(n.stencilOp(Lt,zn,Rn),Mt=Lt,Ft=zn,Wt=Rn)},setLocked:function(Lt){G=Lt},setClear:function(Lt){pi!==Lt&&(n.clearStencil(Lt),pi=Lt)},reset:function(){G=!1,ae=null,we=null,Le=null,Je=null,Mt=null,Ft=null,Wt=null,pi=null}}}const a=new r,l=new s,f=new o,d=new WeakMap,h=new WeakMap;let p={},m={},g=new WeakMap,v=[],x=null,_=!1,w=null,b=null,M=null,C=null,A=null,R=null,T=null,D=!1,k=null,O=null,$=null,W=null,V=null;const q=n.getParameter(35661);let ee=!1,oe=0;const N=n.getParameter(7938);N.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(N)[1]),ee=oe>=1):N.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),ee=oe>=2);let Y=null,Z={};const j=n.getParameter(3088),K=n.getParameter(2978),ue=new Ut().fromArray(j),ge=new Ut().fromArray(K);function ve(G,ae,we){const Le=new Uint8Array(4),Je=n.createTexture();n.bindTexture(G,Je),n.texParameteri(G,10241,9728),n.texParameteri(G,10240,9728);for(let Mt=0;Mt<we;Mt++)n.texImage2D(ae+Mt,0,6408,1,1,0,6408,5121,Le);return Je}const re={};re[3553]=ve(3553,3553,1),re[34067]=ve(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),f.setClear(0),ze(2929),l.setFunc(og),Ce(!1),rt(Yx),ze(2884),Me(Zs);function ze(G){p[G]!==!0&&(n.enable(G),p[G]=!0)}function Ie(G){p[G]!==!1&&(n.disable(G),p[G]=!1)}function Xe(G,ae){return m[G]!==ae?(n.bindFramebuffer(G,ae),m[G]=ae,i&&(G===36009&&(m[36160]=ae),G===36160&&(m[36009]=ae)),!0):!1}function Ae(G,ae){let we=v,Le=!1;if(G)if(we=g.get(ae),we===void 0&&(we=[],g.set(ae,we)),G.isWebGLMultipleRenderTargets){const Je=G.texture;if(we.length!==Je.length||we[0]!==36064){for(let Mt=0,Ft=Je.length;Mt<Ft;Mt++)we[Mt]=36064+Mt;we.length=Je.length,Le=!0}}else we[0]!==36064&&(we[0]=36064,Le=!0);else we[0]!==1029&&(we[0]=1029,Le=!0);Le&&(t.isWebGL2?n.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function Ye(G){return x!==G?(n.useProgram(G),x=G,!0):!1}const de={[Ba]:32774,[PA]:32778,[RA]:32779};if(i)de[Jx]=32775,de[Qx]=32776;else{const G=e.get("EXT_blend_minmax");G!==null&&(de[Jx]=G.MIN_EXT,de[Qx]=G.MAX_EXT)}const le={[LA]:0,[IA]:1,[kA]:768,[sw]:770,[BA]:776,[zA]:774,[OA]:772,[DA]:769,[ow]:771,[FA]:775,[NA]:773};function Me(G,ae,we,Le,Je,Mt,Ft,Wt){if(G===Zs){_===!0&&(Ie(3042),_=!1);return}if(_===!1&&(ze(3042),_=!0),G!==AA){if(G!==w||Wt!==D){if((b!==Ba||A!==Ba)&&(n.blendEquation(32774),b=Ba,A=Ba),Wt)switch(G){case el:n.blendFuncSeparate(1,771,1,771);break;case qx:n.blendFunc(1,1);break;case Zx:n.blendFuncSeparate(0,769,0,1);break;case Kx:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case el:n.blendFuncSeparate(770,771,1,771);break;case qx:n.blendFunc(770,1);break;case Zx:n.blendFuncSeparate(0,769,0,1);break;case Kx:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}M=null,C=null,R=null,T=null,w=G,D=Wt}return}Je=Je||ae,Mt=Mt||we,Ft=Ft||Le,(ae!==b||Je!==A)&&(n.blendEquationSeparate(de[ae],de[Je]),b=ae,A=Je),(we!==M||Le!==C||Mt!==R||Ft!==T)&&(n.blendFuncSeparate(le[we],le[Le],le[Mt],le[Ft]),M=we,C=Le,R=Mt,T=Ft),w=G,D=!1}function ke(G,ae){G.side===Yi?Ie(2884):ze(2884);let we=G.side===Ji;ae&&(we=!we),Ce(we),G.blending===el&&G.transparent===!1?Me(Zs):Me(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),l.setFunc(G.depthFunc),l.setTest(G.depthTest),l.setMask(G.depthWrite),a.setMask(G.colorWrite);const Le=G.stencilWrite;f.setTest(Le),Le&&(f.setMask(G.stencilWriteMask),f.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),f.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),Ze(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?ze(32926):Ie(32926)}function Ce(G){k!==G&&(G?n.frontFace(2304):n.frontFace(2305),k=G)}function rt(G){G!==EA?(ze(2884),G!==O&&(G===Yx?n.cullFace(1029):G===TA?n.cullFace(1028):n.cullFace(1032))):Ie(2884),O=G}function qe(G){G!==$&&(ee&&n.lineWidth(G),$=G)}function Ze(G,ae,we){G?(ze(32823),(W!==ae||V!==we)&&(n.polygonOffset(ae,we),W=ae,V=we)):Ie(32823)}function bt(G){G?ze(3089):Ie(3089)}function ht(G){G===void 0&&(G=33984+q-1),Y!==G&&(n.activeTexture(G),Y=G)}function U(G,ae,we){we===void 0&&(Y===null?we=33984+q-1:we=Y);let Le=Z[we];Le===void 0&&(Le={type:void 0,texture:void 0},Z[we]=Le),(Le.type!==G||Le.texture!==ae)&&(Y!==we&&(n.activeTexture(we),Y=we),n.bindTexture(G,ae||re[G]),Le.type=G,Le.texture=ae)}function I(){const G=Z[Y];G!==void 0&&G.type!==void 0&&(n.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function Q(){try{n.compressedTexImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Se(){try{n.texSubImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Te(){try{n.texSubImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Pe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function pe(){try{n.texStorage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function $e(){try{n.texStorage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function nt(){try{n.texImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Be(){try{n.texImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Ke(G){ue.equals(G)===!1&&(n.scissor(G.x,G.y,G.z,G.w),ue.copy(G))}function He(G){ge.equals(G)===!1&&(n.viewport(G.x,G.y,G.z,G.w),ge.copy(G))}function X(G,ae){let we=h.get(ae);we===void 0&&(we=new WeakMap,h.set(ae,we));let Le=we.get(G);Le===void 0&&(Le=n.getUniformBlockIndex(ae,G.name),we.set(G,Le))}function _e(G,ae){const Le=h.get(ae).get(G);d.get(ae)!==Le&&(n.uniformBlockBinding(ae,Le,G.__bindingPointIndex),d.set(ae,Le))}function Fe(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Y=null,Z={},m={},g=new WeakMap,v=[],x=null,_=!1,w=null,b=null,M=null,C=null,A=null,R=null,T=null,D=!1,k=null,O=null,$=null,W=null,V=null,ue.set(0,0,n.canvas.width,n.canvas.height),ge.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),f.reset()}return{buffers:{color:a,depth:l,stencil:f},enable:ze,disable:Ie,bindFramebuffer:Xe,drawBuffers:Ae,useProgram:Ye,setBlending:Me,setMaterial:ke,setFlipSided:Ce,setCullFace:rt,setLineWidth:qe,setPolygonOffset:Ze,setScissorTest:bt,activeTexture:ht,bindTexture:U,unbindTexture:I,compressedTexImage2D:Q,compressedTexImage3D:xe,texImage2D:nt,texImage3D:Be,updateUBOMapping:X,uniformBlockBinding:_e,texStorage2D:pe,texStorage3D:$e,texSubImage2D:Se,texSubImage3D:Te,compressedTexSubImage2D:et,compressedTexSubImage3D:Pe,scissor:Ke,viewport:He,reset:Fe}}function ZB(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,f=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(U,I){return _?new OffscreenCanvas(U,I):hd("canvas")}function b(U,I,Q,xe){let Se=1;if((U.width>xe||U.height>xe)&&(Se=xe/Math.max(U.width,U.height)),Se<1||I===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const Te=I?cg:Math.floor,et=Te(Se*U.width),Pe=Te(Se*U.height);v===void 0&&(v=w(et,Pe));const pe=Q?w(et,Pe):v;return pe.width=et,pe.height=Pe,pe.getContext("2d").drawImage(U,0,0,et,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+et+"x"+Pe+")."),pe}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function M(U){return S1(U.width)&&S1(U.height)}function C(U){return a?!1:U.wrapS!==ci||U.wrapT!==ci||U.minFilter!==Sn&&U.minFilter!==Mn}function A(U,I){return U.generateMipmaps&&I&&U.minFilter!==Sn&&U.minFilter!==Mn}function R(U){n.generateMipmap(U)}function T(U,I,Q,xe,Se=!1){if(a===!1)return I;if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Te=I;return I===6403&&(Q===5126&&(Te=33326),Q===5131&&(Te=33325),Q===5121&&(Te=33321)),I===33319&&(Q===5126&&(Te=33328),Q===5131&&(Te=33327),Q===5121&&(Te=33323)),I===6408&&(Q===5126&&(Te=34836),Q===5131&&(Te=34842),Q===5121&&(Te=xe===qt&&Se===!1?35907:32856),Q===32819&&(Te=32854),Q===32820&&(Te=32855)),(Te===33325||Te===33326||Te===33327||Te===33328||Te===34842||Te===34836)&&e.get("EXT_color_buffer_float"),Te}function D(U,I,Q){return A(U,Q)===!0||U.isFramebufferTexture&&U.minFilter!==Sn&&U.minFilter!==Mn?Math.log2(Math.max(I.width,I.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?I.mipmaps.length:1}function k(U){return U===Sn||U===ag||U===If?9728:9729}function O(U){const I=U.target;I.removeEventListener("dispose",O),W(I),I.isVideoTexture&&g.delete(I)}function $(U){const I=U.target;I.removeEventListener("dispose",$),q(I)}function W(U){const I=i.get(U);if(I.__webglInit===void 0)return;const Q=U.source,xe=x.get(Q);if(xe){const Se=xe[I.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&V(U),Object.keys(xe).length===0&&x.delete(Q)}i.remove(U)}function V(U){const I=i.get(U);n.deleteTexture(I.__webglTexture);const Q=U.source,xe=x.get(Q);delete xe[I.__cacheKey],o.memory.textures--}function q(U){const I=U.texture,Q=i.get(U),xe=i.get(I);if(xe.__webglTexture!==void 0&&(n.deleteTexture(xe.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)n.deleteFramebuffer(Q.__webglFramebuffer[Se]),Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer[Se]);else{if(n.deleteFramebuffer(Q.__webglFramebuffer),Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let Se=0;Se<Q.__webglColorRenderbuffer.length;Se++)Q.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(Q.__webglColorRenderbuffer[Se]);Q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Se=0,Te=I.length;Se<Te;Se++){const et=i.get(I[Se]);et.__webglTexture&&(n.deleteTexture(et.__webglTexture),o.memory.textures--),i.remove(I[Se])}i.remove(I),i.remove(U)}let ee=0;function oe(){ee=0}function N(){const U=ee;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),ee+=1,U}function Y(U){const I=[];return I.push(U.wrapS),I.push(U.wrapT),I.push(U.wrapR||0),I.push(U.magFilter),I.push(U.minFilter),I.push(U.anisotropy),I.push(U.internalFormat),I.push(U.format),I.push(U.type),I.push(U.generateMipmaps),I.push(U.premultiplyAlpha),I.push(U.flipY),I.push(U.unpackAlignment),I.push(U.encoding),I.join()}function Z(U,I){const Q=i.get(U);if(U.isVideoTexture&&bt(U),U.isRenderTargetTexture===!1&&U.version>0&&Q.__version!==U.version){const xe=U.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie(Q,U,I);return}}t.bindTexture(3553,Q.__webglTexture,33984+I)}function j(U,I){const Q=i.get(U);if(U.version>0&&Q.__version!==U.version){Ie(Q,U,I);return}t.bindTexture(35866,Q.__webglTexture,33984+I)}function K(U,I){const Q=i.get(U);if(U.version>0&&Q.__version!==U.version){Ie(Q,U,I);return}t.bindTexture(32879,Q.__webglTexture,33984+I)}function ue(U,I){const Q=i.get(U);if(U.version>0&&Q.__version!==U.version){Xe(Q,U,I);return}t.bindTexture(34067,Q.__webglTexture,33984+I)}const ge={[od]:10497,[ci]:33071,[ad]:33648},ve={[Sn]:9728,[ag]:9984,[If]:9986,[Mn]:9729,[lw]:9985,[Qo]:9987};function re(U,I,Q){if(Q?(n.texParameteri(U,10242,ge[I.wrapS]),n.texParameteri(U,10243,ge[I.wrapT]),(U===32879||U===35866)&&n.texParameteri(U,32882,ge[I.wrapR]),n.texParameteri(U,10240,ve[I.magFilter]),n.texParameteri(U,10241,ve[I.minFilter])):(n.texParameteri(U,10242,33071),n.texParameteri(U,10243,33071),(U===32879||U===35866)&&n.texParameteri(U,32882,33071),(I.wrapS!==ci||I.wrapT!==ci)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(U,10240,k(I.magFilter)),n.texParameteri(U,10241,k(I.minFilter)),I.minFilter!==Sn&&I.minFilter!==Mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===Sn||I.minFilter!==If&&I.minFilter!==Qo||I.type===Gs&&e.has("OES_texture_float_linear")===!1||a===!1&&I.type===Xc&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(U,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function ze(U,I){let Q=!1;U.__webglInit===void 0&&(U.__webglInit=!0,I.addEventListener("dispose",O));const xe=I.source;let Se=x.get(xe);Se===void 0&&(Se={},x.set(xe,Se));const Te=Y(I);if(Te!==U.__cacheKey){Se[Te]===void 0&&(Se[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),Se[Te].usedTimes++;const et=Se[U.__cacheKey];et!==void 0&&(Se[U.__cacheKey].usedTimes--,et.usedTimes===0&&V(I)),U.__cacheKey=Te,U.__webglTexture=Se[Te].texture}return Q}function Ie(U,I,Q){let xe=3553;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(xe=35866),I.isData3DTexture&&(xe=32879);const Se=ze(U,I),Te=I.source;t.bindTexture(xe,U.__webglTexture,33984+Q);const et=i.get(Te);if(Te.version!==et.__version||Se===!0){t.activeTexture(33984+Q),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const Pe=C(I)&&M(I.image)===!1;let pe=b(I.image,Pe,!1,d);pe=ht(I,pe);const $e=M(pe)||a,nt=s.convert(I.format,I.encoding);let Be=s.convert(I.type),Ke=T(I.internalFormat,nt,Be,I.encoding,I.isVideoTexture);re(xe,I,$e);let He;const X=I.mipmaps,_e=a&&I.isVideoTexture!==!0,Fe=et.__version===void 0||Se===!0,G=D(I,pe,$e);if(I.isDepthTexture)Ke=6402,a?I.type===Gs?Ke=36012:I.type===zo?Ke=33190:I.type===tl?Ke=35056:Ke=33189:I.type===Gs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===jo&&Ke===6402&&I.type!==cw&&I.type!==zo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=zo,Be=s.convert(I.type)),I.format===hl&&Ke===6402&&(Ke=34041,I.type!==tl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=tl,Be=s.convert(I.type))),Fe&&(_e?t.texStorage2D(3553,1,Ke,pe.width,pe.height):t.texImage2D(3553,0,Ke,pe.width,pe.height,0,nt,Be,null));else if(I.isDataTexture)if(X.length>0&&$e){_e&&Fe&&t.texStorage2D(3553,G,Ke,X[0].width,X[0].height);for(let ae=0,we=X.length;ae<we;ae++)He=X[ae],_e?t.texSubImage2D(3553,ae,0,0,He.width,He.height,nt,Be,He.data):t.texImage2D(3553,ae,Ke,He.width,He.height,0,nt,Be,He.data);I.generateMipmaps=!1}else _e?(Fe&&t.texStorage2D(3553,G,Ke,pe.width,pe.height),t.texSubImage2D(3553,0,0,0,pe.width,pe.height,nt,Be,pe.data)):t.texImage2D(3553,0,Ke,pe.width,pe.height,0,nt,Be,pe.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){_e&&Fe&&t.texStorage3D(35866,G,Ke,X[0].width,X[0].height,pe.depth);for(let ae=0,we=X.length;ae<we;ae++)He=X[ae],I.format!==Di?nt!==null?_e?t.compressedTexSubImage3D(35866,ae,0,0,0,He.width,He.height,pe.depth,nt,He.data,0,0):t.compressedTexImage3D(35866,ae,Ke,He.width,He.height,pe.depth,0,He.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?t.texSubImage3D(35866,ae,0,0,0,He.width,He.height,pe.depth,nt,Be,He.data):t.texImage3D(35866,ae,Ke,He.width,He.height,pe.depth,0,nt,Be,He.data)}else{_e&&Fe&&t.texStorage2D(3553,G,Ke,X[0].width,X[0].height);for(let ae=0,we=X.length;ae<we;ae++)He=X[ae],I.format!==Di?nt!==null?_e?t.compressedTexSubImage2D(3553,ae,0,0,He.width,He.height,nt,He.data):t.compressedTexImage2D(3553,ae,Ke,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?t.texSubImage2D(3553,ae,0,0,He.width,He.height,nt,Be,He.data):t.texImage2D(3553,ae,Ke,He.width,He.height,0,nt,Be,He.data)}else if(I.isDataArrayTexture)_e?(Fe&&t.texStorage3D(35866,G,Ke,pe.width,pe.height,pe.depth),t.texSubImage3D(35866,0,0,0,0,pe.width,pe.height,pe.depth,nt,Be,pe.data)):t.texImage3D(35866,0,Ke,pe.width,pe.height,pe.depth,0,nt,Be,pe.data);else if(I.isData3DTexture)_e?(Fe&&t.texStorage3D(32879,G,Ke,pe.width,pe.height,pe.depth),t.texSubImage3D(32879,0,0,0,0,pe.width,pe.height,pe.depth,nt,Be,pe.data)):t.texImage3D(32879,0,Ke,pe.width,pe.height,pe.depth,0,nt,Be,pe.data);else if(I.isFramebufferTexture){if(Fe)if(_e)t.texStorage2D(3553,G,Ke,pe.width,pe.height);else{let ae=pe.width,we=pe.height;for(let Le=0;Le<G;Le++)t.texImage2D(3553,Le,Ke,ae,we,0,nt,Be,null),ae>>=1,we>>=1}}else if(X.length>0&&$e){_e&&Fe&&t.texStorage2D(3553,G,Ke,X[0].width,X[0].height);for(let ae=0,we=X.length;ae<we;ae++)He=X[ae],_e?t.texSubImage2D(3553,ae,0,0,nt,Be,He):t.texImage2D(3553,ae,Ke,nt,Be,He);I.generateMipmaps=!1}else _e?(Fe&&t.texStorage2D(3553,G,Ke,pe.width,pe.height),t.texSubImage2D(3553,0,0,0,nt,Be,pe)):t.texImage2D(3553,0,Ke,nt,Be,pe);A(I,$e)&&R(xe),et.__version=Te.version,I.onUpdate&&I.onUpdate(I)}U.__version=I.version}function Xe(U,I,Q){if(I.image.length!==6)return;const xe=ze(U,I),Se=I.source;t.bindTexture(34067,U.__webglTexture,33984+Q);const Te=i.get(Se);if(Se.version!==Te.__version||xe===!0){t.activeTexture(33984+Q),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const et=I.isCompressedTexture||I.image[0].isCompressedTexture,Pe=I.image[0]&&I.image[0].isDataTexture,pe=[];for(let ae=0;ae<6;ae++)!et&&!Pe?pe[ae]=b(I.image[ae],!1,!0,f):pe[ae]=Pe?I.image[ae].image:I.image[ae],pe[ae]=ht(I,pe[ae]);const $e=pe[0],nt=M($e)||a,Be=s.convert(I.format,I.encoding),Ke=s.convert(I.type),He=T(I.internalFormat,Be,Ke,I.encoding),X=a&&I.isVideoTexture!==!0,_e=Te.__version===void 0||xe===!0;let Fe=D(I,$e,nt);re(34067,I,nt);let G;if(et){X&&_e&&t.texStorage2D(34067,Fe,He,$e.width,$e.height);for(let ae=0;ae<6;ae++){G=pe[ae].mipmaps;for(let we=0;we<G.length;we++){const Le=G[we];I.format!==Di?Be!==null?X?t.compressedTexSubImage2D(34069+ae,we,0,0,Le.width,Le.height,Be,Le.data):t.compressedTexImage2D(34069+ae,we,He,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):X?t.texSubImage2D(34069+ae,we,0,0,Le.width,Le.height,Be,Ke,Le.data):t.texImage2D(34069+ae,we,He,Le.width,Le.height,0,Be,Ke,Le.data)}}}else{G=I.mipmaps,X&&_e&&(G.length>0&&Fe++,t.texStorage2D(34067,Fe,He,pe[0].width,pe[0].height));for(let ae=0;ae<6;ae++)if(Pe){X?t.texSubImage2D(34069+ae,0,0,0,pe[ae].width,pe[ae].height,Be,Ke,pe[ae].data):t.texImage2D(34069+ae,0,He,pe[ae].width,pe[ae].height,0,Be,Ke,pe[ae].data);for(let we=0;we<G.length;we++){const Je=G[we].image[ae].image;X?t.texSubImage2D(34069+ae,we+1,0,0,Je.width,Je.height,Be,Ke,Je.data):t.texImage2D(34069+ae,we+1,He,Je.width,Je.height,0,Be,Ke,Je.data)}}else{X?t.texSubImage2D(34069+ae,0,0,0,Be,Ke,pe[ae]):t.texImage2D(34069+ae,0,He,Be,Ke,pe[ae]);for(let we=0;we<G.length;we++){const Le=G[we];X?t.texSubImage2D(34069+ae,we+1,0,0,Be,Ke,Le.image[ae]):t.texImage2D(34069+ae,we+1,He,Be,Ke,Le.image[ae])}}}A(I,nt)&&R(34067),Te.__version=Se.version,I.onUpdate&&I.onUpdate(I)}U.__version=I.version}function Ae(U,I,Q,xe,Se){const Te=s.convert(Q.format,Q.encoding),et=s.convert(Q.type),Pe=T(Q.internalFormat,Te,et,Q.encoding);i.get(I).__hasExternalTextures||(Se===32879||Se===35866?t.texImage3D(Se,0,Pe,I.width,I.height,I.depth,0,Te,et,null):t.texImage2D(Se,0,Pe,I.width,I.height,0,Te,et,null)),t.bindFramebuffer(36160,U),Ze(I)?p.framebufferTexture2DMultisampleEXT(36160,xe,Se,i.get(Q).__webglTexture,0,qe(I)):(Se===3553||Se>=34069&&Se<=34074)&&n.framebufferTexture2D(36160,xe,Se,i.get(Q).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ye(U,I,Q){if(n.bindRenderbuffer(36161,U),I.depthBuffer&&!I.stencilBuffer){let xe=33189;if(Q||Ze(I)){const Se=I.depthTexture;Se&&Se.isDepthTexture&&(Se.type===Gs?xe=36012:Se.type===zo&&(xe=33190));const Te=qe(I);Ze(I)?p.renderbufferStorageMultisampleEXT(36161,Te,xe,I.width,I.height):n.renderbufferStorageMultisample(36161,Te,xe,I.width,I.height)}else n.renderbufferStorage(36161,xe,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,U)}else if(I.depthBuffer&&I.stencilBuffer){const xe=qe(I);Q&&Ze(I)===!1?n.renderbufferStorageMultisample(36161,xe,35056,I.width,I.height):Ze(I)?p.renderbufferStorageMultisampleEXT(36161,xe,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,U)}else{const xe=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let Se=0;Se<xe.length;Se++){const Te=xe[Se],et=s.convert(Te.format,Te.encoding),Pe=s.convert(Te.type),pe=T(Te.internalFormat,et,Pe,Te.encoding),$e=qe(I);Q&&Ze(I)===!1?n.renderbufferStorageMultisample(36161,$e,pe,I.width,I.height):Ze(I)?p.renderbufferStorageMultisampleEXT(36161,$e,pe,I.width,I.height):n.renderbufferStorage(36161,pe,I.width,I.height)}}n.bindRenderbuffer(36161,null)}function de(U,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,U),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),Z(I.depthTexture,0);const xe=i.get(I.depthTexture).__webglTexture,Se=qe(I);if(I.depthTexture.format===jo)Ze(I)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,xe,0,Se):n.framebufferTexture2D(36160,36096,3553,xe,0);else if(I.depthTexture.format===hl)Ze(I)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,xe,0,Se):n.framebufferTexture2D(36160,33306,3553,xe,0);else throw new Error("Unknown depthTexture format")}function le(U){const I=i.get(U),Q=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!I.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");de(I.__webglFramebuffer,U)}else if(Q){I.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(36160,I.__webglFramebuffer[xe]),I.__webglDepthbuffer[xe]=n.createRenderbuffer(),Ye(I.__webglDepthbuffer[xe],U,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),Ye(I.__webglDepthbuffer,U,!1);t.bindFramebuffer(36160,null)}function Me(U,I,Q){const xe=i.get(U);I!==void 0&&Ae(xe.__webglFramebuffer,U,U.texture,36064,3553),Q!==void 0&&le(U)}function ke(U){const I=U.texture,Q=i.get(U),xe=i.get(I);U.addEventListener("dispose",$),U.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=I.version,o.memory.textures++);const Se=U.isWebGLCubeRenderTarget===!0,Te=U.isWebGLMultipleRenderTargets===!0,et=M(U)||a;if(Se){Q.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)Q.__webglFramebuffer[Pe]=n.createFramebuffer()}else{if(Q.__webglFramebuffer=n.createFramebuffer(),Te)if(r.drawBuffers){const Pe=U.texture;for(let pe=0,$e=Pe.length;pe<$e;pe++){const nt=i.get(Pe[pe]);nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&Ze(U)===!1){const Pe=Te?I:[I];Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer);for(let pe=0;pe<Pe.length;pe++){const $e=Pe[pe];Q.__webglColorRenderbuffer[pe]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Q.__webglColorRenderbuffer[pe]);const nt=s.convert($e.format,$e.encoding),Be=s.convert($e.type),Ke=T($e.internalFormat,nt,Be,$e.encoding,U.isXRRenderTarget===!0),He=qe(U);n.renderbufferStorageMultisample(36161,He,Ke,U.width,U.height),n.framebufferRenderbuffer(36160,36064+pe,36161,Q.__webglColorRenderbuffer[pe])}n.bindRenderbuffer(36161,null),U.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),Ye(Q.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(36160,null)}}if(Se){t.bindTexture(34067,xe.__webglTexture),re(34067,I,et);for(let Pe=0;Pe<6;Pe++)Ae(Q.__webglFramebuffer[Pe],U,I,36064,34069+Pe);A(I,et)&&R(34067),t.unbindTexture()}else if(Te){const Pe=U.texture;for(let pe=0,$e=Pe.length;pe<$e;pe++){const nt=Pe[pe],Be=i.get(nt);t.bindTexture(3553,Be.__webglTexture),re(3553,nt,et),Ae(Q.__webglFramebuffer,U,nt,36064+pe,3553),A(nt,et)&&R(3553)}t.unbindTexture()}else{let Pe=3553;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?Pe=U.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Pe,xe.__webglTexture),re(Pe,I,et),Ae(Q.__webglFramebuffer,U,I,36064,Pe),A(I,et)&&R(Pe),t.unbindTexture()}U.depthBuffer&&le(U)}function Ce(U){const I=M(U)||a,Q=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let xe=0,Se=Q.length;xe<Se;xe++){const Te=Q[xe];if(A(Te,I)){const et=U.isWebGLCubeRenderTarget?34067:3553,Pe=i.get(Te).__webglTexture;t.bindTexture(et,Pe),R(et),t.unbindTexture()}}}function rt(U){if(a&&U.samples>0&&Ze(U)===!1){const I=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],Q=U.width,xe=U.height;let Se=16384;const Te=[],et=U.stencilBuffer?33306:36096,Pe=i.get(U),pe=U.isWebGLMultipleRenderTargets===!0;if(pe)for(let $e=0;$e<I.length;$e++)t.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$e,36161,null),t.bindFramebuffer(36160,Pe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$e,3553,null,0);t.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let $e=0;$e<I.length;$e++){Te.push(36064+$e),U.depthBuffer&&Te.push(et);const nt=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(nt===!1&&(U.depthBuffer&&(Se|=256),U.stencilBuffer&&(Se|=1024)),pe&&n.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[$e]),nt===!0&&(n.invalidateFramebuffer(36008,[et]),n.invalidateFramebuffer(36009,[et])),pe){const Be=i.get(I[$e]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Be,0)}n.blitFramebuffer(0,0,Q,xe,0,0,Q,xe,Se,9728),m&&n.invalidateFramebuffer(36008,Te)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),pe)for(let $e=0;$e<I.length;$e++){t.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$e,36161,Pe.__webglColorRenderbuffer[$e]);const nt=i.get(I[$e]).__webglTexture;t.bindFramebuffer(36160,Pe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$e,3553,nt,0)}t.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}}function qe(U){return Math.min(h,U.samples)}function Ze(U){const I=i.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function bt(U){const I=o.render.frame;g.get(U)!==I&&(g.set(U,I),U.update())}function ht(U,I){const Q=U.encoding,xe=U.format,Se=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===lg||Q!==ea&&(Q===qt?a===!1?e.has("EXT_sRGB")===!0&&xe===Di?(U.format=lg,U.minFilter=Mn,U.generateMipmaps=!1):I=dw.sRGBToLinear(I):(xe!==Di||Se!==ro)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Q)),I}this.allocateTextureUnit=N,this.resetTextureUnits=oe,this.setTexture2D=Z,this.setTexture2DArray=j,this.setTexture3D=K,this.setTextureCube=ue,this.rebindTextures=Me,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=rt,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=Ze}function OP(n,e,t){const i=t.isWebGL2;function r(s,o=null){let a;if(s===ro)return 5121;if(s===nP)return 32819;if(s===iP)return 32820;if(s===QA)return 5120;if(s===eP)return 5122;if(s===cw)return 5123;if(s===tP)return 5124;if(s===zo)return 5125;if(s===Gs)return 5126;if(s===Xc)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===rP)return 6406;if(s===Di)return 6408;if(s===oP)return 6409;if(s===aP)return 6410;if(s===jo)return 6402;if(s===hl)return 34041;if(s===sP)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===lg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===lP)return 6403;if(s===cP)return 36244;if(s===uP)return 33319;if(s===fP)return 33320;if(s===dP)return 36249;if(s===Em||s===Tm||s===Cm||s===Am)if(o===qt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Em)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Tm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Cm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Am)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Em)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Tm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Cm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Am)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===e1||s===t1||s===n1||s===i1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===e1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===t1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===n1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===i1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===hP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===r1||s===s1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===r1)return o===qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===s1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===o1||s===a1||s===l1||s===c1||s===u1||s===f1||s===d1||s===h1||s===p1||s===m1||s===g1||s===y1||s===v1||s===x1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===o1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===a1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===l1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===c1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===u1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===f1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===d1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===h1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===p1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===m1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===g1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===y1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===v1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===x1)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===_1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===_1)return o===qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===tl?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class NP extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Cc extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const KB={type:"move"};class wv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const v of e.hand.values()){const x=t.getJointPose(v,i),_=this._getHandJoint(f,v);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=x.radius),_.visible=x!==null}const d=f.joints["index-finger-tip"],h=f.joints["thumb-tip"],p=d.position.distanceTo(h.position),m=.02,g=.005;f.inputState.pinching&&p>m+g?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&p<=m-g&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(KB)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Cc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class zP extends jn{constructor(e,t,i,r,s,o,a,l,f,d){if(d=d!==void 0?d:jo,d!==jo&&d!==hl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===jo&&(i=zo),i===void 0&&d===hl&&(i=tl),super(null,r,s,o,a,l,d,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Sn,this.minFilter=l!==void 0?l:Sn,this.flipY=!1,this.generateMipmaps=!1}}class JB extends vs{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,f=null,d=null,h=null,p=null,m=null;const g=t.getContextAttributes();let v=null,x=null;const _=[],w=[],b=new Set,M=new Map,C=new yn;C.layers.enable(1),C.viewport=new Ut;const A=new yn;A.layers.enable(2),A.viewport=new Ut;const R=[C,A],T=new NP;T.layers.enable(1),T.layers.enable(2);let D=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let K=_[j];return K===void 0&&(K=new wv,_[j]=K),K.getTargetRaySpace()},this.getControllerGrip=function(j){let K=_[j];return K===void 0&&(K=new wv,_[j]=K),K.getGripSpace()},this.getHand=function(j){let K=_[j];return K===void 0&&(K=new wv,_[j]=K),K.getHandSpace()};function O(j){const K=w.indexOf(j.inputSource);if(K===-1)return;const ue=_[K];ue!==void 0&&ue.dispatchEvent({type:j.type,data:j.inputSource})}function $(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",W);for(let j=0;j<_.length;j++){const K=w[j];K!==null&&(w[j]=null,_[j].disconnect(K))}D=null,k=null,e.setRenderTarget(v),p=null,h=null,d=null,r=null,x=null,Z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){s=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){a=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(j){l=j},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(j){if(r=j,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",$),r.addEventListener("inputsourceschange",W),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const K={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,K),r.updateRenderState({baseLayer:p}),x=new Cr(p.framebufferWidth,p.framebufferHeight,{format:Di,type:ro,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let K=null,ue=null,ge=null;g.depth&&(ge=g.stencil?35056:33190,K=g.stencil?hl:jo,ue=g.stencil?tl:zo);const ve={colorFormat:32856,depthFormat:ge,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(ve),r.updateRenderState({layers:[h]}),x=new Cr(h.textureWidth,h.textureHeight,{format:Di,type:ro,depthTexture:new zP(h.textureWidth,h.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,K),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const re=e.properties.get(x);re.__ignoreDepthValues=h.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),Z.setContext(r),Z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function W(j){for(let K=0;K<j.removed.length;K++){const ue=j.removed[K],ge=w.indexOf(ue);ge>=0&&(w[ge]=null,_[ge].disconnect(ue))}for(let K=0;K<j.added.length;K++){const ue=j.added[K];let ge=w.indexOf(ue);if(ge===-1){for(let re=0;re<_.length;re++)if(re>=w.length){w.push(ue),ge=re;break}else if(w[re]===null){w[re]=ue,ge=re;break}if(ge===-1)break}const ve=_[ge];ve&&ve.connect(ue)}}const V=new z,q=new z;function ee(j,K,ue){V.setFromMatrixPosition(K.matrixWorld),q.setFromMatrixPosition(ue.matrixWorld);const ge=V.distanceTo(q),ve=K.projectionMatrix.elements,re=ue.projectionMatrix.elements,ze=ve[14]/(ve[10]-1),Ie=ve[14]/(ve[10]+1),Xe=(ve[9]+1)/ve[5],Ae=(ve[9]-1)/ve[5],Ye=(ve[8]-1)/ve[0],de=(re[8]+1)/re[0],le=ze*Ye,Me=ze*de,ke=ge/(-Ye+de),Ce=ke*-Ye;K.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(Ce),j.translateZ(ke),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const rt=ze+ke,qe=Ie+ke,Ze=le-Ce,bt=Me+(ge-Ce),ht=Xe*Ie/qe*rt,U=Ae*Ie/qe*rt;j.projectionMatrix.makePerspective(Ze,bt,ht,U,rt,qe)}function oe(j,K){K===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(K.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(r===null)return;T.near=A.near=C.near=j.near,T.far=A.far=C.far=j.far,(D!==T.near||k!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),D=T.near,k=T.far);const K=j.parent,ue=T.cameras;oe(T,K);for(let ve=0;ve<ue.length;ve++)oe(ue[ve],K);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),j.matrix.copy(T.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale);const ge=j.children;for(let ve=0,re=ge.length;ve<re;ve++)ge[ve].updateMatrixWorld(!0);ue.length===2?ee(T,C,A):T.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(j){h!==null&&(h.fixedFoveation=j),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=j)},this.getPlanes=function(){return b};let N=null;function Y(j,K){if(f=K.getViewerPose(l||o),m=K,f!==null){const ue=f.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let ge=!1;ue.length!==T.cameras.length&&(T.cameras.length=0,ge=!0);for(let ve=0;ve<ue.length;ve++){const re=ue[ve];let ze=null;if(p!==null)ze=p.getViewport(re);else{const Xe=d.getViewSubImage(h,re);ze=Xe.viewport,ve===0&&(e.setRenderTargetTextures(x,Xe.colorTexture,h.ignoreDepthValues?void 0:Xe.depthStencilTexture),e.setRenderTarget(x))}let Ie=R[ve];Ie===void 0&&(Ie=new yn,Ie.layers.enable(ve),Ie.viewport=new Ut,R[ve]=Ie),Ie.matrix.fromArray(re.transform.matrix),Ie.projectionMatrix.fromArray(re.projectionMatrix),Ie.viewport.set(ze.x,ze.y,ze.width,ze.height),ve===0&&T.matrix.copy(Ie.matrix),ge===!0&&T.cameras.push(Ie)}}for(let ue=0;ue<_.length;ue++){const ge=w[ue],ve=_[ue];ge!==null&&ve!==void 0&&ve.update(ge,K,l||o)}if(N&&N(j,K),K.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:K.detectedPlanes});let ue=null;for(const ge of b)K.detectedPlanes.has(ge)||(ue===null&&(ue=[]),ue.push(ge));if(ue!==null)for(const ge of ue)b.delete(ge),M.delete(ge),i.dispatchEvent({type:"planeremoved",data:ge});for(const ge of K.detectedPlanes)if(!b.has(ge))b.add(ge),M.set(ge,K.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ge});else{const ve=M.get(ge);ge.lastChangedTime>ve&&(M.set(ge,ge.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ge}))}}m=null}const Z=new RP;Z.setAnimationLoop(Y),this.setAnimationLoop=function(j){N=j},this.dispose=function(){}}}function QB(n,e){function t(v,x){x.color.getRGB(v.fogColor.value,TP(n)),x.isFog?(v.fogNear.value=x.near,v.fogFar.value=x.far):x.isFogExp2&&(v.fogDensity.value=x.density)}function i(v,x,_,w,b){x.isMeshBasicMaterial||x.isMeshLambertMaterial?r(v,x):x.isMeshToonMaterial?(r(v,x),d(v,x)):x.isMeshPhongMaterial?(r(v,x),f(v,x)):x.isMeshStandardMaterial?(r(v,x),h(v,x),x.isMeshPhysicalMaterial&&p(v,x,b)):x.isMeshMatcapMaterial?(r(v,x),m(v,x)):x.isMeshDepthMaterial?r(v,x):x.isMeshDistanceMaterial?(r(v,x),g(v,x)):x.isMeshNormalMaterial?r(v,x):x.isLineBasicMaterial?(s(v,x),x.isLineDashedMaterial&&o(v,x)):x.isPointsMaterial?a(v,x,_,w):x.isSpriteMaterial?l(v,x):x.isShadowMaterial?(v.color.value.copy(x.color),v.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function r(v,x){v.opacity.value=x.opacity,x.color&&v.diffuse.value.copy(x.color),x.emissive&&v.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Ji&&(v.bumpScale.value*=-1)),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Ji&&v.normalScale.value.negate()),x.specularMap&&(v.specularMap.value=x.specularMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);const _=e.get(x).envMap;if(_&&(v.envMap.value=_,v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=x.reflectivity,v.ior.value=x.ior,v.refractionRatio.value=x.refractionRatio),x.lightMap){v.lightMap.value=x.lightMap;const M=n.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=x.lightMapIntensity*M}x.aoMap&&(v.aoMap.value=x.aoMap,v.aoMapIntensity.value=x.aoMapIntensity);let w;x.map?w=x.map:x.specularMap?w=x.specularMap:x.displacementMap?w=x.displacementMap:x.normalMap?w=x.normalMap:x.bumpMap?w=x.bumpMap:x.roughnessMap?w=x.roughnessMap:x.metalnessMap?w=x.metalnessMap:x.alphaMap?w=x.alphaMap:x.emissiveMap?w=x.emissiveMap:x.clearcoatMap?w=x.clearcoatMap:x.clearcoatNormalMap?w=x.clearcoatNormalMap:x.clearcoatRoughnessMap?w=x.clearcoatRoughnessMap:x.iridescenceMap?w=x.iridescenceMap:x.iridescenceThicknessMap?w=x.iridescenceThicknessMap:x.specularIntensityMap?w=x.specularIntensityMap:x.specularColorMap?w=x.specularColorMap:x.transmissionMap?w=x.transmissionMap:x.thicknessMap?w=x.thicknessMap:x.sheenColorMap?w=x.sheenColorMap:x.sheenRoughnessMap&&(w=x.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix));let b;x.aoMap?b=x.aoMap:x.lightMap&&(b=x.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uv2Transform.value.copy(b.matrix))}function s(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity}function o(v,x){v.dashSize.value=x.dashSize,v.totalSize.value=x.dashSize+x.gapSize,v.scale.value=x.scale}function a(v,x,_,w){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.size.value=x.size*_,v.scale.value=w*.5,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let b;x.map?b=x.map:x.alphaMap&&(b=x.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function l(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.rotation.value=x.rotation,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let _;x.map?_=x.map:x.alphaMap&&(_=x.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uvTransform.value.copy(_.matrix))}function f(v,x){v.specular.value.copy(x.specular),v.shininess.value=Math.max(x.shininess,1e-4)}function d(v,x){x.gradientMap&&(v.gradientMap.value=x.gradientMap)}function h(v,x){v.roughness.value=x.roughness,v.metalness.value=x.metalness,x.roughnessMap&&(v.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(v.metalnessMap.value=x.metalnessMap),e.get(x).envMap&&(v.envMapIntensity.value=x.envMapIntensity)}function p(v,x,_){v.ior.value=x.ior,x.sheen>0&&(v.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),v.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(v.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(v.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(v.clearcoat.value=x.clearcoat,v.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(v.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),v.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===Ji&&v.clearcoatNormalScale.value.negate())),x.iridescence>0&&(v.iridescence.value=x.iridescence,v.iridescenceIOR.value=x.iridescenceIOR,v.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(v.iridescenceMap.value=x.iridescenceMap),x.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=x.iridescenceThicknessMap)),x.transmission>0&&(v.transmission.value=x.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),x.transmissionMap&&(v.transmissionMap.value=x.transmissionMap),v.thickness.value=x.thickness,x.thicknessMap&&(v.thicknessMap.value=x.thicknessMap),v.attenuationDistance.value=x.attenuationDistance,v.attenuationColor.value.copy(x.attenuationColor)),v.specularIntensity.value=x.specularIntensity,v.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(v.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(v.specularColorMap.value=x.specularColorMap)}function m(v,x){x.matcap&&(v.matcap.value=x.matcap)}function g(v,x){v.referencePosition.value.copy(x.referencePosition),v.nearDistance.value=x.nearDistance,v.farDistance.value=x.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function eU(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(w,b){const M=b.program;i.uniformBlockBinding(w,M)}function f(w,b){let M=r[w.id];M===void 0&&(g(w),M=d(w),r[w.id]=M,w.addEventListener("dispose",x));const C=b.program;i.updateUBOMapping(w,C);const A=e.render.frame;s[w.id]!==A&&(p(w),s[w.id]=A)}function d(w){const b=h();w.__bindingPointIndex=b;const M=n.createBuffer(),C=w.__size,A=w.usage;return n.bindBuffer(35345,M),n.bufferData(35345,C,A),n.bindBuffer(35345,null),n.bindBufferBase(35345,b,M),M}function h(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const b=r[w.id],M=w.uniforms,C=w.__cache;n.bindBuffer(35345,b);for(let A=0,R=M.length;A<R;A++){const T=M[A];if(m(T,A,C)===!0){const D=T.__offset,k=Array.isArray(T.value)?T.value:[T.value];let O=0;for(let $=0;$<k.length;$++){const W=k[$],V=v(W);typeof W=="number"?(T.__data[0]=W,n.bufferSubData(35345,D+O,T.__data)):W.isMatrix3?(T.__data[0]=W.elements[0],T.__data[1]=W.elements[1],T.__data[2]=W.elements[2],T.__data[3]=W.elements[0],T.__data[4]=W.elements[3],T.__data[5]=W.elements[4],T.__data[6]=W.elements[5],T.__data[7]=W.elements[0],T.__data[8]=W.elements[6],T.__data[9]=W.elements[7],T.__data[10]=W.elements[8],T.__data[11]=W.elements[0]):(W.toArray(T.__data,O),O+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,D,T.__data)}}n.bindBuffer(35345,null)}function m(w,b,M){const C=w.value;if(M[b]===void 0){if(typeof C=="number")M[b]=C;else{const A=Array.isArray(C)?C:[C],R=[];for(let T=0;T<A.length;T++)R.push(A[T].clone());M[b]=R}return!0}else if(typeof C=="number"){if(M[b]!==C)return M[b]=C,!0}else{const A=Array.isArray(M[b])?M[b]:[M[b]],R=Array.isArray(C)?C:[C];for(let T=0;T<A.length;T++){const D=A[T];if(D.equals(R[T])===!1)return D.copy(R[T]),!0}}return!1}function g(w){const b=w.uniforms;let M=0;const C=16;let A=0;for(let R=0,T=b.length;R<T;R++){const D=b[R],k={boundary:0,storage:0},O=Array.isArray(D.value)?D.value:[D.value];for(let $=0,W=O.length;$<W;$++){const V=O[$],q=v(V);k.boundary+=q.boundary,k.storage+=q.storage}if(D.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=M,R>0){A=M%C;const $=C-A;A!==0&&$-k.boundary<0&&(M+=C-A,D.__offset=M)}M+=k.storage}return A=M%C,A>0&&(M+=C-A),w.__size=M,w.__cache={},this}function v(w){const b={boundary:0,storage:0};return typeof w=="number"?(b.boundary=4,b.storage=4):w.isVector2?(b.boundary=8,b.storage=8):w.isVector3||w.isColor?(b.boundary=16,b.storage=12):w.isVector4?(b.boundary=16,b.storage=16):w.isMatrix3?(b.boundary=48,b.storage=48):w.isMatrix4?(b.boundary=64,b.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),b}function x(w){const b=w.target;b.removeEventListener("dispose",x);const M=o.indexOf(b.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function _(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},s={}}return{bind:l,update:f,dispose:_}}function tU(){const n=hd("canvas");return n.style.display="block",n}function vw(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:tU(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let h=null,p=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ea,this.physicallyCorrectLights=!1,this.toneMapping=Gr,this.toneMappingExposure=1;const v=this;let x=!1,_=0,w=0,b=null,M=-1,C=null;const A=new Ut,R=new Ut;let T=null,D=e.width,k=e.height,O=1,$=null,W=null;const V=new Ut(0,0,D,k),q=new Ut(0,0,D,k);let ee=!1;const oe=new Zg;let N=!1,Y=!1,Z=null;const j=new pt,K=new ye,ue=new z,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return b===null?O:1}let re=t;function ze(F,ie){for(let he=0;he<F.length;he++){const ne=F[he],me=e.getContext(ne,ie);if(me!==null)return me}return null}try{const F={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Gg}`),e.addEventListener("webglcontextlost",Ke,!1),e.addEventListener("webglcontextrestored",He,!1),e.addEventListener("webglcontextcreationerror",X,!1),re===null){const ie=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ie.shift(),re=ze(ie,F),re===null)throw ze(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let Ie,Xe,Ae,Ye,de,le,Me,ke,Ce,rt,qe,Ze,bt,ht,U,I,Q,xe,Se,Te,et,Pe,pe,$e;function nt(){Ie=new yF(re),Xe=new fF(re,Ie,n),Ie.init(Xe),Pe=new OP(re,Ie,Xe),Ae=new qB(re,Ie,Xe),Ye=new _F,de=new zB,le=new ZB(re,Ie,Ae,de,Xe,Pe,Ye),Me=new hF(v),ke=new gF(v),Ce=new P4(re,Xe),pe=new cF(re,Ie,Ce,Xe),rt=new vF(re,Ce,Ye,pe),qe=new MF(re,rt,Ce,Ye),Se=new bF(re,Xe,le),I=new dF(de),Ze=new NB(v,Me,ke,Ie,Xe,pe,I),bt=new QB(v,de),ht=new BB,U=new GB(Ie,Xe),xe=new lF(v,Me,ke,Ae,qe,d,o),Q=new YB(v,qe,Xe),$e=new eU(re,Ye,Xe,Ae),Te=new uF(re,Ie,Ye,Xe),et=new xF(re,Ie,Ye,Xe),Ye.programs=Ze.programs,v.capabilities=Xe,v.extensions=Ie,v.properties=de,v.renderLists=ht,v.shadowMap=Q,v.state=Ae,v.info=Ye}nt();const Be=new JB(v,re);this.xr=Be,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const F=Ie.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Ie.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(F){F!==void 0&&(O=F,this.setSize(D,k,!1))},this.getSize=function(F){return F.set(D,k)},this.setSize=function(F,ie,he){if(Be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=F,k=ie,e.width=Math.floor(F*O),e.height=Math.floor(ie*O),he!==!1&&(e.style.width=F+"px",e.style.height=ie+"px"),this.setViewport(0,0,F,ie)},this.getDrawingBufferSize=function(F){return F.set(D*O,k*O).floor()},this.setDrawingBufferSize=function(F,ie,he){D=F,k=ie,O=he,e.width=Math.floor(F*he),e.height=Math.floor(ie*he),this.setViewport(0,0,F,ie)},this.getCurrentViewport=function(F){return F.copy(A)},this.getViewport=function(F){return F.copy(V)},this.setViewport=function(F,ie,he,ne){F.isVector4?V.set(F.x,F.y,F.z,F.w):V.set(F,ie,he,ne),Ae.viewport(A.copy(V).multiplyScalar(O).floor())},this.getScissor=function(F){return F.copy(q)},this.setScissor=function(F,ie,he,ne){F.isVector4?q.set(F.x,F.y,F.z,F.w):q.set(F,ie,he,ne),Ae.scissor(R.copy(q).multiplyScalar(O).floor())},this.getScissorTest=function(){return ee},this.setScissorTest=function(F){Ae.setScissorTest(ee=F)},this.setOpaqueSort=function(F){$=F},this.setTransparentSort=function(F){W=F},this.getClearColor=function(F){return F.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(F=!0,ie=!0,he=!0){let ne=0;F&&(ne|=16384),ie&&(ne|=256),he&&(ne|=1024),re.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ke,!1),e.removeEventListener("webglcontextrestored",He,!1),e.removeEventListener("webglcontextcreationerror",X,!1),ht.dispose(),U.dispose(),de.dispose(),Me.dispose(),ke.dispose(),qe.dispose(),pe.dispose(),$e.dispose(),Ze.dispose(),Be.dispose(),Be.removeEventListener("sessionstart",Le),Be.removeEventListener("sessionend",Je),Z&&(Z.dispose(),Z=null),Mt.stop()};function Ke(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const F=Ye.autoReset,ie=Q.enabled,he=Q.autoUpdate,ne=Q.needsUpdate,me=Q.type;nt(),Ye.autoReset=F,Q.enabled=ie,Q.autoUpdate=he,Q.needsUpdate=ne,Q.type=me}function X(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function _e(F){const ie=F.target;ie.removeEventListener("dispose",_e),Fe(ie)}function Fe(F){G(F),de.remove(F)}function G(F){const ie=de.get(F).programs;ie!==void 0&&(ie.forEach(function(he){Ze.releaseProgram(he)}),F.isShaderMaterial&&Ze.releaseShaderCache(F))}this.renderBufferDirect=function(F,ie,he,ne,me,it){ie===null&&(ie=ge);const ct=me.isMesh&&me.matrixWorld.determinant()<0,gt=w0(F,ie,he,ne,me);Ae.setMaterial(ne,ct);let wt=he.index,At=1;ne.wireframe===!0&&(wt=rt.getWireframeAttribute(he),At=2);const Et=he.drawRange,Tt=he.attributes.position;let dn=Et.start*At,mi=(Et.start+Et.count)*At;it!==null&&(dn=Math.max(dn,it.start*At),mi=Math.min(mi,(it.start+it.count)*At)),wt!==null?(dn=Math.max(dn,0),mi=Math.min(mi,wt.count)):Tt!=null&&(dn=Math.max(dn,0),mi=Math.min(mi,Tt.count));const Rr=mi-dn;if(Rr<0||Rr===1/0)return;pe.setup(me,ne,gt,he,wt);let _s,en=Te;if(wt!==null&&(_s=Ce.get(wt),en=et,en.setIndex(_s)),me.isMesh)ne.wireframe===!0?(Ae.setLineWidth(ne.wireframeLinewidth*ve()),en.setMode(1)):en.setMode(4);else if(me.isLine){let yt=ne.linewidth;yt===void 0&&(yt=1),Ae.setLineWidth(yt*ve()),me.isLineSegments?en.setMode(1):me.isLineLoop?en.setMode(2):en.setMode(3)}else me.isPoints?en.setMode(0):me.isSprite&&en.setMode(4);if(me.isInstancedMesh)en.renderInstances(dn,Rr,me.count);else if(he.isInstancedBufferGeometry){const yt=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,ga=Math.min(he.instanceCount,yt);en.renderInstances(dn,Rr,ga)}else en.render(dn,Rr)},this.compile=function(F,ie){function he(ne,me,it){ne.transparent===!0&&ne.side===xf?(ne.side=Ji,ne.needsUpdate=!0,Rn(ne,me,it),ne.side=Zo,ne.needsUpdate=!0,Rn(ne,me,it),ne.side=xf):Rn(ne,me,it)}p=U.get(F),p.init(),g.push(p),F.traverseVisible(function(ne){ne.isLight&&ne.layers.test(ie.layers)&&(p.pushLight(ne),ne.castShadow&&p.pushShadow(ne))}),p.setupLights(v.physicallyCorrectLights),F.traverse(function(ne){const me=ne.material;if(me)if(Array.isArray(me))for(let it=0;it<me.length;it++){const ct=me[it];he(ct,F,ne)}else he(me,F,ne)}),g.pop(),p=null};let ae=null;function we(F){ae&&ae(F)}function Le(){Mt.stop()}function Je(){Mt.start()}const Mt=new RP;Mt.setAnimationLoop(we),typeof self<"u"&&Mt.setContext(self),this.setAnimationLoop=function(F){ae=F,Be.setAnimationLoop(F),F===null?Mt.stop():Mt.start()},Be.addEventListener("sessionstart",Le),Be.addEventListener("sessionend",Je),this.render=function(F,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Be.enabled===!0&&Be.isPresenting===!0&&(Be.cameraAutoUpdate===!0&&Be.updateCamera(ie),ie=Be.getCamera()),F.isScene===!0&&F.onBeforeRender(v,F,ie,b),p=U.get(F,g.length),p.init(),g.push(p),j.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),oe.setFromProjectionMatrix(j),Y=this.localClippingEnabled,N=I.init(this.clippingPlanes,Y,ie),h=ht.get(F,m.length),h.init(),m.push(h),Ft(F,ie,0,v.sortObjects),h.finish(),v.sortObjects===!0&&h.sort($,W),N===!0&&I.beginShadows();const he=p.state.shadowsArray;if(Q.render(he,F,ie),N===!0&&I.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(h,F),p.setupLights(v.physicallyCorrectLights),ie.isArrayCamera){const ne=ie.cameras;for(let me=0,it=ne.length;me<it;me++){const ct=ne[me];Wt(h,F,ct,ct.viewport)}}else Wt(h,F,ie);b!==null&&(le.updateMultisampleRenderTarget(b),le.updateRenderTargetMipmap(b)),F.isScene===!0&&F.onAfterRender(v,F,ie),pe.resetDefaultState(),M=-1,C=null,g.pop(),g.length>0?p=g[g.length-1]:p=null,m.pop(),m.length>0?h=m[m.length-1]:h=null};function Ft(F,ie,he,ne){if(F.visible===!1)return;if(F.layers.test(ie.layers)){if(F.isGroup)he=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ie);else if(F.isLight)p.pushLight(F),F.castShadow&&p.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||oe.intersectsSprite(F)){ne&&ue.setFromMatrixPosition(F.matrixWorld).applyMatrix4(j);const ct=qe.update(F),gt=F.material;gt.visible&&h.push(F,ct,gt,he,ue.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(F.isSkinnedMesh&&F.skeleton.frame!==Ye.render.frame&&(F.skeleton.update(),F.skeleton.frame=Ye.render.frame),!F.frustumCulled||oe.intersectsObject(F))){ne&&ue.setFromMatrixPosition(F.matrixWorld).applyMatrix4(j);const ct=qe.update(F),gt=F.material;if(Array.isArray(gt)){const wt=ct.groups;for(let At=0,Et=wt.length;At<Et;At++){const Tt=wt[At],dn=gt[Tt.materialIndex];dn&&dn.visible&&h.push(F,ct,dn,he,ue.z,Tt)}}else gt.visible&&h.push(F,ct,gt,he,ue.z,null)}}const it=F.children;for(let ct=0,gt=it.length;ct<gt;ct++)Ft(it[ct],ie,he,ne)}function Wt(F,ie,he,ne){const me=F.opaque,it=F.transmissive,ct=F.transparent;p.setupLightsView(he),it.length>0&&pi(me,ie,he),ne&&Ae.viewport(A.copy(ne)),me.length>0&&Lt(me,ie,he),it.length>0&&Lt(it,ie,he),ct.length>0&&Lt(ct,ie,he),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function pi(F,ie,he){const ne=Xe.isWebGL2;Z===null&&(Z=new Cr(1,1,{generateMipmaps:!0,type:Ie.has("EXT_color_buffer_half_float")?Xc:ro,minFilter:Qo,samples:ne&&s===!0?4:0})),v.getDrawingBufferSize(K),ne?Z.setSize(K.x,K.y):Z.setSize(cg(K.x),cg(K.y));const me=v.getRenderTarget();v.setRenderTarget(Z),v.clear();const it=v.toneMapping;v.toneMapping=Gr,Lt(F,ie,he),v.toneMapping=it,le.updateMultisampleRenderTarget(Z),le.updateRenderTargetMipmap(Z),v.setRenderTarget(me)}function Lt(F,ie,he){const ne=ie.isScene===!0?ie.overrideMaterial:null;for(let me=0,it=F.length;me<it;me++){const ct=F[me],gt=ct.object,wt=ct.geometry,At=ne===null?ct.material:ne,Et=ct.group;gt.layers.test(he.layers)&&zn(gt,ie,he,wt,At,Et)}}function zn(F,ie,he,ne,me,it){F.onBeforeRender(v,ie,he,ne,me,it),F.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),me.onBeforeRender(v,ie,he,ne,F,it),me.transparent===!0&&me.side===xf?(me.side=Ji,me.needsUpdate=!0,v.renderBufferDirect(he,ie,ne,me,F,it),me.side=Zo,me.needsUpdate=!0,v.renderBufferDirect(he,ie,ne,me,F,it),me.side=xf):v.renderBufferDirect(he,ie,ne,me,F,it),F.onAfterRender(v,ie,he,ne,me,it)}function Rn(F,ie,he){ie.isScene!==!0&&(ie=ge);const ne=de.get(F),me=p.state.lights,it=p.state.shadowsArray,ct=me.state.version,gt=Ze.getParameters(F,me.state,it,ie,he),wt=Ze.getProgramCacheKey(gt);let At=ne.programs;ne.environment=F.isMeshStandardMaterial?ie.environment:null,ne.fog=ie.fog,ne.envMap=(F.isMeshStandardMaterial?ke:Me).get(F.envMap||ne.environment),At===void 0&&(F.addEventListener("dispose",_e),At=new Map,ne.programs=At);let Et=At.get(wt);if(Et!==void 0){if(ne.currentProgram===Et&&ne.lightsStateVersion===ct)return rh(F,gt),Et}else gt.uniforms=Ze.getUniforms(F),F.onBuild(he,gt,v),F.onBeforeCompile(gt,v),Et=Ze.acquireProgram(gt,wt),At.set(wt,Et),ne.uniforms=gt.uniforms;const Tt=ne.uniforms;(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(Tt.clippingPlanes=I.uniform),rh(F,gt),ne.needsLights=bu(F),ne.lightsStateVersion=ct,ne.needsLights&&(Tt.ambientLightColor.value=me.state.ambient,Tt.lightProbe.value=me.state.probe,Tt.directionalLights.value=me.state.directional,Tt.directionalLightShadows.value=me.state.directionalShadow,Tt.spotLights.value=me.state.spot,Tt.spotLightShadows.value=me.state.spotShadow,Tt.rectAreaLights.value=me.state.rectArea,Tt.ltc_1.value=me.state.rectAreaLTC1,Tt.ltc_2.value=me.state.rectAreaLTC2,Tt.pointLights.value=me.state.point,Tt.pointLightShadows.value=me.state.pointShadow,Tt.hemisphereLights.value=me.state.hemi,Tt.directionalShadowMap.value=me.state.directionalShadowMap,Tt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,Tt.spotShadowMap.value=me.state.spotShadowMap,Tt.spotLightMatrix.value=me.state.spotLightMatrix,Tt.spotLightMap.value=me.state.spotLightMap,Tt.pointShadowMap.value=me.state.pointShadowMap,Tt.pointShadowMatrix.value=me.state.pointShadowMatrix);const dn=Et.getUniforms(),mi=km.seqWithValue(dn.seq,Tt);return ne.currentProgram=Et,ne.uniformsList=mi,Et}function rh(F,ie){const he=de.get(F);he.outputEncoding=ie.outputEncoding,he.instancing=ie.instancing,he.skinning=ie.skinning,he.morphTargets=ie.morphTargets,he.morphNormals=ie.morphNormals,he.morphColors=ie.morphColors,he.morphTargetsCount=ie.morphTargetsCount,he.numClippingPlanes=ie.numClippingPlanes,he.numIntersection=ie.numClipIntersection,he.vertexAlphas=ie.vertexAlphas,he.vertexTangents=ie.vertexTangents,he.toneMapping=ie.toneMapping}function w0(F,ie,he,ne,me){ie.isScene!==!0&&(ie=ge),le.resetTextureUnits();const it=ie.fog,ct=ne.isMeshStandardMaterial?ie.environment:null,gt=b===null?v.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:ea,wt=(ne.isMeshStandardMaterial?ke:Me).get(ne.envMap||ct),At=ne.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,Et=!!ne.normalMap&&!!he.attributes.tangent,Tt=!!he.morphAttributes.position,dn=!!he.morphAttributes.normal,mi=!!he.morphAttributes.color,Rr=ne.toneMapped?v.toneMapping:Gr,_s=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,en=_s!==void 0?_s.length:0,yt=de.get(ne),ga=p.state.lights;if(N===!0&&(Y===!0||F!==C)){const Bt=F===C&&ne.id===M;I.setState(ne,F,Bt)}let hn=!1;ne.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==ga.state.version||yt.outputEncoding!==gt||me.isInstancedMesh&&yt.instancing===!1||!me.isInstancedMesh&&yt.instancing===!0||me.isSkinnedMesh&&yt.skinning===!1||!me.isSkinnedMesh&&yt.skinning===!0||yt.envMap!==wt||ne.fog===!0&&yt.fog!==it||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==I.numPlanes||yt.numIntersection!==I.numIntersection)||yt.vertexAlphas!==At||yt.vertexTangents!==Et||yt.morphTargets!==Tt||yt.morphNormals!==dn||yt.morphColors!==mi||yt.toneMapping!==Rr||Xe.isWebGL2===!0&&yt.morphTargetsCount!==en)&&(hn=!0):(hn=!0,yt.__version=ne.version);let ws=yt.currentProgram;hn===!0&&(ws=Rn(ne,ie,me));let Cl=!1,sr=!1,or=!1;const mt=ws.getUniforms(),Rt=yt.uniforms;if(Ae.useProgram(ws.program)&&(Cl=!0,sr=!0,or=!0),ne.id!==M&&(M=ne.id,sr=!0),Cl||C!==F){if(mt.setValue(re,"projectionMatrix",F.projectionMatrix),Xe.logarithmicDepthBuffer&&mt.setValue(re,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),C!==F&&(C=F,sr=!0,or=!0),ne.isShaderMaterial||ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshStandardMaterial||ne.envMap){const Bt=mt.map.cameraPosition;Bt!==void 0&&Bt.setValue(re,ue.setFromMatrixPosition(F.matrixWorld))}(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&mt.setValue(re,"isOrthographic",F.isOrthographicCamera===!0),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial||ne.isShadowMaterial||me.isSkinnedMesh)&&mt.setValue(re,"viewMatrix",F.matrixWorldInverse)}if(me.isSkinnedMesh){mt.setOptional(re,me,"bindMatrix"),mt.setOptional(re,me,"bindMatrixInverse");const Bt=me.skeleton;Bt&&(Xe.floatVertexTextures?(Bt.boneTexture===null&&Bt.computeBoneTexture(),mt.setValue(re,"boneTexture",Bt.boneTexture,le),mt.setValue(re,"boneTextureSize",Bt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ar=he.morphAttributes;if((ar.position!==void 0||ar.normal!==void 0||ar.color!==void 0&&Xe.isWebGL2===!0)&&Se.update(me,he,ne,ws),(sr||yt.receiveShadow!==me.receiveShadow)&&(yt.receiveShadow=me.receiveShadow,mt.setValue(re,"receiveShadow",me.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(Rt.envMap.value=wt,Rt.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),sr&&(mt.setValue(re,"toneMappingExposure",v.toneMappingExposure),yt.needsLights&&sh(Rt,or),it&&ne.fog===!0&&bt.refreshFogUniforms(Rt,it),bt.refreshMaterialUniforms(Rt,ne,O,k,Z),km.upload(re,yt.uniformsList,Rt,le)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(km.upload(re,yt.uniformsList,Rt,le),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&mt.setValue(re,"center",me.center),mt.setValue(re,"modelViewMatrix",me.modelViewMatrix),mt.setValue(re,"normalMatrix",me.normalMatrix),mt.setValue(re,"modelMatrix",me.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){const Bt=ne.uniformsGroups;for(let Fn=0,Ss=Bt.length;Fn<Ss;Fn++)if(Xe.isWebGL2){const bs=Bt[Fn];$e.update(bs,ws),$e.bind(bs,ws)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ws}function sh(F,ie){F.ambientLightColor.needsUpdate=ie,F.lightProbe.needsUpdate=ie,F.directionalLights.needsUpdate=ie,F.directionalLightShadows.needsUpdate=ie,F.pointLights.needsUpdate=ie,F.pointLightShadows.needsUpdate=ie,F.spotLights.needsUpdate=ie,F.spotLightShadows.needsUpdate=ie,F.rectAreaLights.needsUpdate=ie,F.hemisphereLights.needsUpdate=ie}function bu(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(F,ie,he){de.get(F.texture).__webglTexture=ie,de.get(F.depthTexture).__webglTexture=he;const ne=de.get(F);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=he===void 0,ne.__autoAllocateDepthBuffer||Ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(F,ie){const he=de.get(F);he.__webglFramebuffer=ie,he.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(F,ie=0,he=0){b=F,_=ie,w=he;let ne=!0,me=null,it=!1,ct=!1;if(F){const wt=de.get(F);wt.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(36160,null),ne=!1):wt.__webglFramebuffer===void 0?le.setupRenderTarget(F):wt.__hasExternalTextures&&le.rebindTextures(F,de.get(F.texture).__webglTexture,de.get(F.depthTexture).__webglTexture);const At=F.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(ct=!0);const Et=de.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(me=Et[ie],it=!0):Xe.isWebGL2&&F.samples>0&&le.useMultisampledRTT(F)===!1?me=de.get(F).__webglMultisampledFramebuffer:me=Et,A.copy(F.viewport),R.copy(F.scissor),T=F.scissorTest}else A.copy(V).multiplyScalar(O).floor(),R.copy(q).multiplyScalar(O).floor(),T=ee;if(Ae.bindFramebuffer(36160,me)&&Xe.drawBuffers&&ne&&Ae.drawBuffers(F,me),Ae.viewport(A),Ae.scissor(R),Ae.setScissorTest(T),it){const wt=de.get(F.texture);re.framebufferTexture2D(36160,36064,34069+ie,wt.__webglTexture,he)}else if(ct){const wt=de.get(F.texture),At=ie||0;re.framebufferTextureLayer(36160,36064,wt.__webglTexture,he||0,At)}M=-1},this.readRenderTargetPixels=function(F,ie,he,ne,me,it,ct){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=de.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&ct!==void 0&&(gt=gt[ct]),gt){Ae.bindFramebuffer(36160,gt);try{const wt=F.texture,At=wt.format,Et=wt.type;if(At!==Di&&Pe.convert(At)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Tt=Et===Xc&&(Ie.has("EXT_color_buffer_half_float")||Xe.isWebGL2&&Ie.has("EXT_color_buffer_float"));if(Et!==ro&&Pe.convert(Et)!==re.getParameter(35738)&&!(Et===Gs&&(Xe.isWebGL2||Ie.has("OES_texture_float")||Ie.has("WEBGL_color_buffer_float")))&&!Tt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=F.width-ne&&he>=0&&he<=F.height-me&&re.readPixels(ie,he,ne,me,Pe.convert(At),Pe.convert(Et),it)}finally{const wt=b!==null?de.get(b).__webglFramebuffer:null;Ae.bindFramebuffer(36160,wt)}}},this.copyFramebufferToTexture=function(F,ie,he=0){const ne=Math.pow(2,-he),me=Math.floor(ie.image.width*ne),it=Math.floor(ie.image.height*ne);le.setTexture2D(ie,0),re.copyTexSubImage2D(3553,he,0,0,F.x,F.y,me,it),Ae.unbindTexture()},this.copyTextureToTexture=function(F,ie,he,ne=0){const me=ie.image.width,it=ie.image.height,ct=Pe.convert(he.format),gt=Pe.convert(he.type);le.setTexture2D(he,0),re.pixelStorei(37440,he.flipY),re.pixelStorei(37441,he.premultiplyAlpha),re.pixelStorei(3317,he.unpackAlignment),ie.isDataTexture?re.texSubImage2D(3553,ne,F.x,F.y,me,it,ct,gt,ie.image.data):ie.isCompressedTexture?re.compressedTexSubImage2D(3553,ne,F.x,F.y,ie.mipmaps[0].width,ie.mipmaps[0].height,ct,ie.mipmaps[0].data):re.texSubImage2D(3553,ne,F.x,F.y,ct,gt,ie.image),ne===0&&he.generateMipmaps&&re.generateMipmap(3553),Ae.unbindTexture()},this.copyTextureToTexture3D=function(F,ie,he,ne,me=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const it=F.max.x-F.min.x+1,ct=F.max.y-F.min.y+1,gt=F.max.z-F.min.z+1,wt=Pe.convert(ne.format),At=Pe.convert(ne.type);let Et;if(ne.isData3DTexture)le.setTexture3D(ne,0),Et=32879;else if(ne.isDataArrayTexture)le.setTexture2DArray(ne,0),Et=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(37440,ne.flipY),re.pixelStorei(37441,ne.premultiplyAlpha),re.pixelStorei(3317,ne.unpackAlignment);const Tt=re.getParameter(3314),dn=re.getParameter(32878),mi=re.getParameter(3316),Rr=re.getParameter(3315),_s=re.getParameter(32877),en=he.isCompressedTexture?he.mipmaps[0]:he.image;re.pixelStorei(3314,en.width),re.pixelStorei(32878,en.height),re.pixelStorei(3316,F.min.x),re.pixelStorei(3315,F.min.y),re.pixelStorei(32877,F.min.z),he.isDataTexture||he.isData3DTexture?re.texSubImage3D(Et,me,ie.x,ie.y,ie.z,it,ct,gt,wt,At,en.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Et,me,ie.x,ie.y,ie.z,it,ct,gt,wt,en.data)):re.texSubImage3D(Et,me,ie.x,ie.y,ie.z,it,ct,gt,wt,At,en),re.pixelStorei(3314,Tt),re.pixelStorei(32878,dn),re.pixelStorei(3316,mi),re.pixelStorei(3315,Rr),re.pixelStorei(32877,_s),me===0&&ne.generateMipmaps&&re.generateMipmap(Et),Ae.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?le.setTextureCube(F,0):F.isData3DTexture?le.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?le.setTexture2DArray(F,0):le.setTexture2D(F,0),Ae.unbindTexture()},this.resetState=function(){_=0,w=0,b=null,Ae.reset(),pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class FP extends vw{}FP.prototype.isWebGL1Renderer=!0;class Jg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Oe(e),this.density=t}clone(){return new Jg(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Qg{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Oe(e),this.near=t,this.far=i}clone(){return new Qg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ug extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class e0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=fd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const vi=new z;class pl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix4(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.applyNormalMatrix(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.transformDirection(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=js(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Xt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xw extends Jn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let tc;const sf=new z,nc=new z,ic=new z,rc=new ye,of=new ye,BP=new pt,Op=new z,af=new z,Np=new z,IE=new ye,Sv=new ye,kE=new ye;class UP extends zt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",tc===void 0){tc=new _t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new e0(t,5);tc.setIndex([0,1,2,0,2,3]),tc.setAttribute("position",new pl(i,3,0,!1)),tc.setAttribute("uv",new pl(i,2,3,!1))}this.geometry=tc,this.material=e!==void 0?e:new xw,this.center=new ye(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nc.setFromMatrixScale(this.matrixWorld),BP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ic.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nc.multiplyScalar(-ic.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;zp(Op.set(-.5,-.5,0),ic,o,nc,r,s),zp(af.set(.5,-.5,0),ic,o,nc,r,s),zp(Np.set(.5,.5,0),ic,o,nc,r,s),IE.set(0,0),Sv.set(1,0),kE.set(1,1);let a=e.ray.intersectTriangle(Op,af,Np,!1,sf);if(a===null&&(zp(af.set(-.5,.5,0),ic,o,nc,r,s),Sv.set(0,1),a=e.ray.intersectTriangle(Op,Np,af,!1,sf),a===null))return;const l=e.ray.origin.distanceTo(sf);l<e.near||l>e.far||t.push({distance:l,point:sf.clone(),uv:wr.getUV(sf,Op,af,Np,IE,Sv,kE,new ye),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function zp(n,e,t,i,r,s){rc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(of.x=s*rc.x-r*rc.y,of.y=r*rc.x+s*rc.y):of.copy(rc),n.copy(e),n.x+=of.x,n.y+=of.y,n.applyMatrix4(BP)}const Fp=new z,DE=new z;class VP extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Fp.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Fp);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Fp.setFromMatrixPosition(e.matrixWorld),DE.setFromMatrixPosition(this.matrixWorld);const i=Fp.distanceTo(DE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const OE=new z,NE=new Ut,zE=new Ut,nU=new z,FE=new pt;class WP extends qn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pt,this.bindMatrixInverse=new pt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ut,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;NE.fromBufferAttribute(r.attributes.skinIndex,e),zE.fromBufferAttribute(r.attributes.skinWeight,e),OE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zE.getComponent(s);if(o!==0){const a=NE.getComponent(s);FE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(nU.copy(OE).applyMatrix4(FE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class _w extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zc extends jn{constructor(e=null,t=1,i=1,r,s,o,a,l,f=Sn,d=Sn,h,p){super(null,o,a,l,f,d,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BE=new pt,iU=new pt;class t0{constructor(e=[],t=[]){this.uuid=Qi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new pt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:iU;BE.multiplyMatrices(a,t[s]),BE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new t0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=wP(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zc(t,e,e,Di,Gs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new _w),this.bones.push(o),this.boneInverses.push(new pt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Zc extends Xt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const UE=new pt,VE=new pt,Bp=[],rU=new pt,lf=new qn;class HP extends qn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,rU)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(lf.geometry=this.geometry,lf.material=this.material,lf.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,UE),VE.multiplyMatrices(i,UE),lf.matrixWorld=VE,lf.raycast(e,Bp);for(let o=0,a=Bp.length;o<a;o++){const l=Bp[o];l.instanceId=s,l.object=this,t.push(l)}Bp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ci extends Jn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const WE=new z,HE=new z,$E=new pt,bv=new ou,Up=new Sl;class ta extends zt{constructor(e=new _t,t=new Ci){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)WE.fromBufferAttribute(t,r-1),HE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=WE.distanceTo(HE);e.setAttribute("lineDistance",new je(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Up.copy(i.boundingSphere),Up.applyMatrix4(r),Up.radius+=s,e.ray.intersectsSphere(Up)===!1)return;$E.copy(r).invert(),bv.copy(e.ray).applyMatrix4($E);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=new z,d=new z,h=new z,p=new z,m=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){const _=Math.max(0,o.start),w=Math.min(g.count,o.start+o.count);for(let b=_,M=w-1;b<M;b+=m){const C=g.getX(b),A=g.getX(b+1);if(f.fromBufferAttribute(x,C),d.fromBufferAttribute(x,A),bv.distanceSqToSegment(f,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),w=Math.min(x.count,o.start+o.count);for(let b=_,M=w-1;b<M;b+=m){if(f.fromBufferAttribute(x,b),d.fromBufferAttribute(x,b+1),bv.distanceSqToSegment(f,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(p);A<e.near||A>e.far||t.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const GE=new z,jE=new z;class xs extends ta{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)GE.fromBufferAttribute(t,r),jE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+GE.distanceTo(jE);e.setAttribute("lineDistance",new je(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $P extends ta{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ww extends Jn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const XE=new pt,E1=new ou,Vp=new Sl,Wp=new z;class GP extends zt{constructor(e=new _t,t=new ww){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Vp.copy(i.boundingSphere),Vp.applyMatrix4(r),Vp.radius+=s,e.ray.intersectsSphere(Vp)===!1)return;XE.copy(r).invert(),E1.copy(e.ray).applyMatrix4(XE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=i.index,h=i.attributes.position;if(f!==null){const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=p,v=m;g<v;g++){const x=f.getX(g);Wp.fromBufferAttribute(h,x),YE(Wp,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=p,v=m;g<v;g++)Wp.fromBufferAttribute(h,g),YE(Wp,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function YE(n,e,t,i,r,s,o){const a=E1.distanceSqToPoint(n);if(a<t){const l=new z;E1.closestPointToPoint(n,l),l.applyMatrix4(i);const f=r.ray.origin.distanceTo(l);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class sU extends jn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Mn,this.magFilter=s!==void 0?s:Mn,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oU extends jn{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Sn,this.minFilter=Sn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Sw extends jn{constructor(e,t,i,r,s,o,a,l,f,d,h,p){super(null,o,a,l,f,d,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aU extends Sw{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ci}}class lU extends jn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,f;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],p=i[r+1]-d,m=(o-d)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ye:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new pt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new z)}s[0]=new z,o[0]=new z;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),h<=f&&(f=h,i.set(0,1,0)),p<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(En(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(En(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class n0 extends qr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new ye,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=f-this.aY;l=p*d-m*h+this.aX,f=p*h+m*d+this.aY}return i.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jP extends n0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function bw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){r(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,d,h){let p=(o-s)/f-(a-s)/(f+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Hp=new z,Mv=new bw,Ev=new bw,Tv=new bw;class XP extends qr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,d;this.closed||a>0?f=r[(a-1)%s]:(Hp.subVectors(r[0],r[1]).add(r[0]),f=Hp);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Hp.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Hp),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(f.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(d),m);v<1e-4&&(v=1),g<1e-4&&(g=v),x<1e-4&&(x=v),Mv.initNonuniformCatmullRom(f.x,h.x,p.x,d.x,g,v,x),Ev.initNonuniformCatmullRom(f.y,h.y,p.y,d.y,g,v,x),Tv.initNonuniformCatmullRom(f.z,h.z,p.z,d.z,g,v,x)}else this.curveType==="catmullrom"&&(Mv.initCatmullRom(f.x,h.x,p.x,d.x,this.tension),Ev.initCatmullRom(f.y,h.y,p.y,d.y,this.tension),Tv.initCatmullRom(f.z,h.z,p.z,d.z,this.tension));return i.set(Mv.calc(l),Ev.calc(l),Tv.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function qE(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function cU(n,e){const t=1-n;return t*t*e}function uU(n,e){return 2*(1-n)*n*e}function fU(n,e){return n*n*e}function Df(n,e,t,i){return cU(n,e)+uU(n,t)+fU(n,i)}function dU(n,e){const t=1-n;return t*t*t*e}function hU(n,e){const t=1-n;return 3*t*t*n*e}function pU(n,e){return 3*(1-n)*n*n*e}function mU(n,e){return n*n*n*e}function Of(n,e,t,i,r){return dU(n,e)+hU(n,t)+pU(n,i)+mU(n,r)}class Mw extends qr{constructor(e=new ye,t=new ye,i=new ye,r=new ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ye){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Of(e,r.x,s.x,o.x,a.x),Of(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YP extends qr{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Of(e,r.x,s.x,o.x,a.x),Of(e,r.y,s.y,o.y,a.y),Of(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class i0 extends qr{constructor(e=new ye,t=new ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ye){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ye;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pd extends qr{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ew extends qr{constructor(e=new ye,t=new ye,i=new ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ye){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Df(e,r.x,s.x,o.x),Df(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tw extends qr{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Df(e,r.x,s.x,o.x),Df(e,r.y,s.y,o.y),Df(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends qr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ye){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],f=r[o],d=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(qE(a,l.x,f.x,d.x,h.x),qE(a,l.y,f.y,d.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ye().fromArray(r))}return this}}var Aw=Object.freeze({__proto__:null,ArcCurve:jP,CatmullRomCurve3:XP,CubicBezierCurve:Mw,CubicBezierCurve3:YP,EllipseCurve:n0,LineCurve:i0,LineCurve3:pd,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Tw,SplineCurve:Cw});class qP extends qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new i0(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const d=l[f];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Aw[r.type]().fromJSON(r))}return this}}let md=class extends qP{constructor(e){super(),this.type="Path",this.currentPoint=new ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new i0(this.currentPoint.clone(),new ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ew(this.currentPoint.clone(),new ye(e,t),new ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Mw(this.currentPoint.clone(),new ye(e,t),new ye(i,r),new ye(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Cw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const f=new n0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=f.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class uu extends _t{constructor(e=[new ye(0,-.5),new ye(.5,0),new ye(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=En(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],d=1/t,h=new z,p=new ye,m=new z,g=new z,v=new z;let x=0,_=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:x=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,m.x=_*1,m.y=-x,m.z=_*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:x=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,m.x=_*1,m.y=-x,m.z=_*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let w=0;w<=t;w++){const b=i+w*d*r,M=Math.sin(b),C=Math.cos(b);for(let A=0;A<=e.length-1;A++){h.x=e[A].x*M,h.y=e[A].y,h.z=e[A].x*C,o.push(h.x,h.y,h.z),p.x=w/t,p.y=A/(e.length-1),a.push(p.x,p.y);const R=l[3*A+0]*M,T=l[3*A+1],D=l[3*A+0]*C;f.push(R,T,D)}}for(let w=0;w<t;w++)for(let b=0;b<e.length-1;b++){const M=b+w*e.length,C=M,A=M+e.length,R=M+e.length+1,T=M+1;s.push(C,A,T),s.push(R,T,A)}this.setIndex(s),this.setAttribute("position",new je(o,3)),this.setAttribute("uv",new je(a,2)),this.setAttribute("normal",new je(f,3))}static fromJSON(e){return new uu(e.points,e.segments,e.phiStart,e.phiLength)}}class Fd extends uu{constructor(e=1,t=1,i=4,r=8){const s=new md;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Fd(e.radius,e.length,e.capSegments,e.radialSegments)}}class Bd extends _t{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new z,d=new ye;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=i+h/t*r;f.x=e*Math.cos(m),f.y=e*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new je(o,3)),this.setAttribute("normal",new je(a,3)),this.setAttribute("uv",new je(l,2))}static fromJSON(e){return new Bd(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class pa extends _t{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],p=[],m=[];let g=0;const v=[],x=i/2;let _=0;w(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new je(h,3)),this.setAttribute("normal",new je(p,3)),this.setAttribute("uv",new je(m,2));function w(){const M=new z,C=new z;let A=0;const R=(t-e)/i;for(let T=0;T<=s;T++){const D=[],k=T/s,O=k*(t-e)+e;for(let $=0;$<=r;$++){const W=$/r,V=W*l+a,q=Math.sin(V),ee=Math.cos(V);C.x=O*q,C.y=-k*i+x,C.z=O*ee,h.push(C.x,C.y,C.z),M.set(q,R,ee).normalize(),p.push(M.x,M.y,M.z),m.push(W,1-k),D.push(g++)}v.push(D)}for(let T=0;T<r;T++)for(let D=0;D<s;D++){const k=v[D][T],O=v[D+1][T],$=v[D+1][T+1],W=v[D][T+1];d.push(k,O,W),d.push(O,$,W),A+=6}f.addGroup(_,A,0),_+=A}function b(M){const C=g,A=new ye,R=new z;let T=0;const D=M===!0?e:t,k=M===!0?1:-1;for(let $=1;$<=r;$++)h.push(0,x*k,0),p.push(0,k,0),m.push(.5,.5),g++;const O=g;for(let $=0;$<=r;$++){const V=$/r*l+a,q=Math.cos(V),ee=Math.sin(V);R.x=D*ee,R.y=x*k,R.z=D*q,h.push(R.x,R.y,R.z),p.push(0,k,0),A.x=q*.5+.5,A.y=ee*.5*k+.5,m.push(A.x,A.y),g++}for(let $=0;$<r;$++){const W=C+$,V=O+$;M===!0?d.push(V,V+1,W):d.push(V+1,V,W),T+=3}f.addGroup(_,T,M===!0?1:2),_+=T}}static fromJSON(e){return new pa(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fu extends pa{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new fu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fo extends _t{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),f(i),d(),this.setAttribute("position",new je(s,3)),this.setAttribute("normal",new je(s.slice(),3)),this.setAttribute("uv",new je(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const b=new z,M=new z,C=new z;for(let A=0;A<t.length;A+=3)m(t[A+0],b),m(t[A+1],M),m(t[A+2],C),l(b,M,C,w)}function l(w,b,M,C){const A=C+1,R=[];for(let T=0;T<=A;T++){R[T]=[];const D=w.clone().lerp(M,T/A),k=b.clone().lerp(M,T/A),O=A-T;for(let $=0;$<=O;$++)$===0&&T===A?R[T][$]=D:R[T][$]=D.clone().lerp(k,$/O)}for(let T=0;T<A;T++)for(let D=0;D<2*(A-T)-1;D++){const k=Math.floor(D/2);D%2===0?(p(R[T][k+1]),p(R[T+1][k]),p(R[T][k])):(p(R[T][k+1]),p(R[T+1][k+1]),p(R[T+1][k]))}}function f(w){const b=new z;for(let M=0;M<s.length;M+=3)b.x=s[M+0],b.y=s[M+1],b.z=s[M+2],b.normalize().multiplyScalar(w),s[M+0]=b.x,s[M+1]=b.y,s[M+2]=b.z}function d(){const w=new z;for(let b=0;b<s.length;b+=3){w.x=s[b+0],w.y=s[b+1],w.z=s[b+2];const M=x(w)/2/Math.PI+.5,C=_(w)/Math.PI+.5;o.push(M,1-C)}g(),h()}function h(){for(let w=0;w<o.length;w+=6){const b=o[w+0],M=o[w+2],C=o[w+4],A=Math.max(b,M,C),R=Math.min(b,M,C);A>.9&&R<.1&&(b<.2&&(o[w+0]+=1),M<.2&&(o[w+2]+=1),C<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,b){const M=w*3;b.x=e[M+0],b.y=e[M+1],b.z=e[M+2]}function g(){const w=new z,b=new z,M=new z,C=new z,A=new ye,R=new ye,T=new ye;for(let D=0,k=0;D<s.length;D+=9,k+=6){w.set(s[D+0],s[D+1],s[D+2]),b.set(s[D+3],s[D+4],s[D+5]),M.set(s[D+6],s[D+7],s[D+8]),A.set(o[k+0],o[k+1]),R.set(o[k+2],o[k+3]),T.set(o[k+4],o[k+5]),C.copy(w).add(b).add(M).divideScalar(3);const O=x(C);v(A,k+0,w,O),v(R,k+2,b,O),v(T,k+4,M,O)}}function v(w,b,M,C){C<0&&w.x===1&&(o[b]=w.x-1),M.x===0&&M.z===0&&(o[b]=C/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function _(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}static fromJSON(e){return new fo(e.vertices,e.indices,e.radius,e.details)}}class Ud extends fo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ud(e.radius,e.detail)}}const $p=new z,Gp=new z,Cv=new z,jp=new wr;class ZP extends _t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(nl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],d=["a","b","c"],h=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(f[0]=o.getX(g),f[1]=o.getX(g+1),f[2]=o.getX(g+2)):(f[0]=g,f[1]=g+1,f[2]=g+2);const{a:v,b:x,c:_}=jp;if(v.fromBufferAttribute(a,f[0]),x.fromBufferAttribute(a,f[1]),_.fromBufferAttribute(a,f[2]),jp.getNormal(Cv),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let w=0;w<3;w++){const b=(w+1)%3,M=h[w],C=h[b],A=jp[d[w]],R=jp[d[b]],T=`${M}_${C}`,D=`${C}_${M}`;D in p&&p[D]?(Cv.dot(p[D].normal)<=s&&(m.push(A.x,A.y,A.z),m.push(R.x,R.y,R.z)),p[D]=null):T in p||(p[T]={index0:f[w],index1:f[b],normal:Cv.clone()})}}for(const g in p)if(p[g]){const{index0:v,index1:x}=p[g];$p.fromBufferAttribute(a,v),Gp.fromBufferAttribute(a,x),m.push($p.x,$p.y,$p.z),m.push(Gp.x,Gp.y,Gp.z)}this.setAttribute("position",new je(m,3))}}}class sl extends md{constructor(e){super(e),this.uuid=Qi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new md().fromJSON(r))}return this}}const gU={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=KP(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,d,h,p,m;if(i&&(s=wU(n,e,s,t)),n.length>80*t){a=f=n[0],l=d=n[1];for(let g=t;g<r;g+=t)h=n[g],p=n[g+1],h<a&&(a=h),p<l&&(l=p),h>f&&(f=h),p>d&&(d=p);m=Math.max(f-a,d-l),m=m!==0?32767/m:0}return gd(s,o,t,a,l,m,0),o}};function KP(n,e,t,i,r){let s,o;if(r===IU(n,e,t,i)>0)for(s=e;s<t;s+=i)o=ZE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=ZE(s,n[s],n[s+1],o);return o&&r0(o,o.next)&&(vd(o),o=o.next),o}function ml(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(r0(t,t.next)||ln(t.prev,t,t.next)===0)){if(vd(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function gd(n,e,t,i,r,s,o){if(!n)return;!o&&s&&TU(n,i,r,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?vU(n,i,r,s):yU(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),vd(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=xU(ml(n),e,t),gd(n,e,t,i,r,s,2)):o===2&&_U(n,e,t,i,r,s):gd(ml(n),e,t,i,r,s,1);break}}}function yU(n){const e=n.prev,t=n,i=n.next;if(ln(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,f=i.y,d=r<s?r<o?r:o:s<o?s:o,h=a<l?a<f?a:f:l<f?l:f,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>f?a:f:l>f?l:f;let g=i.next;for(;g!==e;){if(g.x>=d&&g.x<=p&&g.y>=h&&g.y<=m&&Ac(r,a,s,l,o,f,g.x,g.y)&&ln(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function vU(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ln(r,s,o)>=0)return!1;const a=r.x,l=s.x,f=o.x,d=r.y,h=s.y,p=o.y,m=a<l?a<f?a:f:l<f?l:f,g=d<h?d<p?d:p:h<p?h:p,v=a>l?a>f?a:f:l>f?l:f,x=d>h?d>p?d:p:h>p?h:p,_=T1(m,g,e,t,i),w=T1(v,x,e,t,i);let b=n.prevZ,M=n.nextZ;for(;b&&b.z>=_&&M&&M.z<=w;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=x&&b!==r&&b!==o&&Ac(a,d,l,h,f,p,b.x,b.y)&&ln(b.prev,b,b.next)>=0||(b=b.prevZ,M.x>=m&&M.x<=v&&M.y>=g&&M.y<=x&&M!==r&&M!==o&&Ac(a,d,l,h,f,p,M.x,M.y)&&ln(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;b&&b.z>=_;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=x&&b!==r&&b!==o&&Ac(a,d,l,h,f,p,b.x,b.y)&&ln(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;M&&M.z<=w;){if(M.x>=m&&M.x<=v&&M.y>=g&&M.y<=x&&M!==r&&M!==o&&Ac(a,d,l,h,f,p,M.x,M.y)&&ln(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function xU(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!r0(r,s)&&JP(r,i,i.next,s)&&yd(r,s)&&yd(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),vd(i),vd(i.next),i=n=s),i=i.next}while(i!==n);return ml(i)}function _U(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&PU(o,a)){let l=QP(o,a);o=ml(o,o.next),l=ml(l,l.next),gd(o,e,t,i,r,s,0),gd(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function wU(n,e,t,i){const r=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,f=KP(n,a,l,i,!1),f===f.next&&(f.steiner=!0),r.push(AU(f));for(r.sort(SU),s=0;s<r.length;s++)t=bU(r[s],t);return t}function SU(n,e){return n.x-e.x}function bU(n,e){const t=MU(n,e);if(!t)return e;const i=QP(t,n);return ml(i,i.next),ml(t,t.next)}function MU(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,f=r.y;let d=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Ac(o<f?s:i,o,l,f,o<f?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),yd(t,n)&&(h<d||h===d&&(t.x>r.x||t.x===r.x&&EU(r,t)))&&(r=t,d=h)),t=t.next;while(t!==a);return r}function EU(n,e){return ln(n.prev,n,e.prev)<0&&ln(e.next,n,n.next)<0}function TU(n,e,t,i){let r=n;do r.z===0&&(r.z=T1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,CU(r)}function CU(n){let e,t,i,r,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<f&&(a++,i=i.nextZ,!!i);e++);for(l=f;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function T1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function AU(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ac(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function PU(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!RU(n,e)&&(yd(n,e)&&yd(e,n)&&LU(n,e)&&(ln(n.prev,n,e.prev)||ln(n,e.prev,e))||r0(n,e)&&ln(n.prev,n,n.next)>0&&ln(e.prev,e,e.next)>0)}function ln(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function r0(n,e){return n.x===e.x&&n.y===e.y}function JP(n,e,t,i){const r=Yp(ln(n,e,t)),s=Yp(ln(n,e,i)),o=Yp(ln(t,i,n)),a=Yp(ln(t,i,e));return!!(r!==s&&o!==a||r===0&&Xp(n,t,e)||s===0&&Xp(n,i,e)||o===0&&Xp(t,n,i)||a===0&&Xp(t,e,i))}function Xp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Yp(n){return n>0?1:n<0?-1:0}function RU(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&JP(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function yd(n,e){return ln(n.prev,n,n.next)<0?ln(n,e,n.next)>=0&&ln(n,n.prev,e)>=0:ln(n,e,n.prev)<0||ln(n,n.next,e)<0}function LU(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function QP(n,e){const t=new C1(n.i,n.x,n.y),i=new C1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function ZE(n,e,t,i){const r=new C1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function vd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function C1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function IU(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class fs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return fs.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];KE(e),JE(i,e);let o=e.length;t.forEach(KE);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,JE(i,t[l]);const a=gU.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function KE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function JE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Vd extends _t{constructor(e=new sl([new ye(.5,.5),new ye(-.5,.5),new ye(-.5,-.5),new ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new je(r,3)),this.setAttribute("uv",new je(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:kU;let b,M=!1,C,A,R,T;_&&(b=_.getSpacedPoints(d),M=!0,p=!1,C=_.computeFrenetFrames(d,!1),A=new z,R=new z,T=new z),p||(x=0,m=0,g=0,v=0);const D=a.extractPoints(f);let k=D.shape;const O=D.holes;if(!fs.isClockWise(k)){k=k.reverse();for(let de=0,le=O.length;de<le;de++){const Me=O[de];fs.isClockWise(Me)&&(O[de]=Me.reverse())}}const W=fs.triangulateShape(k,O),V=k;for(let de=0,le=O.length;de<le;de++){const Me=O[de];k=k.concat(Me)}function q(de,le,Me){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().multiplyScalar(Me).add(de)}const ee=k.length,oe=W.length;function N(de,le,Me){let ke,Ce,rt;const qe=de.x-le.x,Ze=de.y-le.y,bt=Me.x-de.x,ht=Me.y-de.y,U=qe*qe+Ze*Ze,I=qe*ht-Ze*bt;if(Math.abs(I)>Number.EPSILON){const Q=Math.sqrt(U),xe=Math.sqrt(bt*bt+ht*ht),Se=le.x-Ze/Q,Te=le.y+qe/Q,et=Me.x-ht/xe,Pe=Me.y+bt/xe,pe=((et-Se)*ht-(Pe-Te)*bt)/(qe*ht-Ze*bt);ke=Se+qe*pe-de.x,Ce=Te+Ze*pe-de.y;const $e=ke*ke+Ce*Ce;if($e<=2)return new ye(ke,Ce);rt=Math.sqrt($e/2)}else{let Q=!1;qe>Number.EPSILON?bt>Number.EPSILON&&(Q=!0):qe<-Number.EPSILON?bt<-Number.EPSILON&&(Q=!0):Math.sign(Ze)===Math.sign(ht)&&(Q=!0),Q?(ke=-Ze,Ce=qe,rt=Math.sqrt(U)):(ke=qe,Ce=Ze,rt=Math.sqrt(U/2))}return new ye(ke/rt,Ce/rt)}const Y=[];for(let de=0,le=V.length,Me=le-1,ke=de+1;de<le;de++,Me++,ke++)Me===le&&(Me=0),ke===le&&(ke=0),Y[de]=N(V[de],V[Me],V[ke]);const Z=[];let j,K=Y.concat();for(let de=0,le=O.length;de<le;de++){const Me=O[de];j=[];for(let ke=0,Ce=Me.length,rt=Ce-1,qe=ke+1;ke<Ce;ke++,rt++,qe++)rt===Ce&&(rt=0),qe===Ce&&(qe=0),j[ke]=N(Me[ke],Me[rt],Me[qe]);Z.push(j),K=K.concat(j)}for(let de=0;de<x;de++){const le=de/x,Me=m*Math.cos(le*Math.PI/2),ke=g*Math.sin(le*Math.PI/2)+v;for(let Ce=0,rt=V.length;Ce<rt;Ce++){const qe=q(V[Ce],Y[Ce],ke);ze(qe.x,qe.y,-Me)}for(let Ce=0,rt=O.length;Ce<rt;Ce++){const qe=O[Ce];j=Z[Ce];for(let Ze=0,bt=qe.length;Ze<bt;Ze++){const ht=q(qe[Ze],j[Ze],ke);ze(ht.x,ht.y,-Me)}}}const ue=g+v;for(let de=0;de<ee;de++){const le=p?q(k[de],K[de],ue):k[de];M?(R.copy(C.normals[0]).multiplyScalar(le.x),A.copy(C.binormals[0]).multiplyScalar(le.y),T.copy(b[0]).add(R).add(A),ze(T.x,T.y,T.z)):ze(le.x,le.y,0)}for(let de=1;de<=d;de++)for(let le=0;le<ee;le++){const Me=p?q(k[le],K[le],ue):k[le];M?(R.copy(C.normals[de]).multiplyScalar(Me.x),A.copy(C.binormals[de]).multiplyScalar(Me.y),T.copy(b[de]).add(R).add(A),ze(T.x,T.y,T.z)):ze(Me.x,Me.y,h/d*de)}for(let de=x-1;de>=0;de--){const le=de/x,Me=m*Math.cos(le*Math.PI/2),ke=g*Math.sin(le*Math.PI/2)+v;for(let Ce=0,rt=V.length;Ce<rt;Ce++){const qe=q(V[Ce],Y[Ce],ke);ze(qe.x,qe.y,h+Me)}for(let Ce=0,rt=O.length;Ce<rt;Ce++){const qe=O[Ce];j=Z[Ce];for(let Ze=0,bt=qe.length;Ze<bt;Ze++){const ht=q(qe[Ze],j[Ze],ke);M?ze(ht.x,ht.y+b[d-1].y,b[d-1].x+Me):ze(ht.x,ht.y,h+Me)}}}ge(),ve();function ge(){const de=r.length/3;if(p){let le=0,Me=ee*le;for(let ke=0;ke<oe;ke++){const Ce=W[ke];Ie(Ce[2]+Me,Ce[1]+Me,Ce[0]+Me)}le=d+x*2,Me=ee*le;for(let ke=0;ke<oe;ke++){const Ce=W[ke];Ie(Ce[0]+Me,Ce[1]+Me,Ce[2]+Me)}}else{for(let le=0;le<oe;le++){const Me=W[le];Ie(Me[2],Me[1],Me[0])}for(let le=0;le<oe;le++){const Me=W[le];Ie(Me[0]+ee*d,Me[1]+ee*d,Me[2]+ee*d)}}i.addGroup(de,r.length/3-de,0)}function ve(){const de=r.length/3;let le=0;re(V,le),le+=V.length;for(let Me=0,ke=O.length;Me<ke;Me++){const Ce=O[Me];re(Ce,le),le+=Ce.length}i.addGroup(de,r.length/3-de,1)}function re(de,le){let Me=de.length;for(;--Me>=0;){const ke=Me;let Ce=Me-1;Ce<0&&(Ce=de.length-1);for(let rt=0,qe=d+x*2;rt<qe;rt++){const Ze=ee*rt,bt=ee*(rt+1),ht=le+ke+Ze,U=le+Ce+Ze,I=le+Ce+bt,Q=le+ke+bt;Xe(ht,U,I,Q)}}}function ze(de,le,Me){l.push(de),l.push(le),l.push(Me)}function Ie(de,le,Me){Ae(de),Ae(le),Ae(Me);const ke=r.length/3,Ce=w.generateTopUV(i,r,ke-3,ke-2,ke-1);Ye(Ce[0]),Ye(Ce[1]),Ye(Ce[2])}function Xe(de,le,Me,ke){Ae(de),Ae(le),Ae(ke),Ae(le),Ae(Me),Ae(ke);const Ce=r.length/3,rt=w.generateSideWallUV(i,r,Ce-6,Ce-3,Ce-2,Ce-1);Ye(rt[0]),Ye(rt[1]),Ye(rt[3]),Ye(rt[1]),Ye(rt[2]),Ye(rt[3])}function Ae(de){r.push(l[de*3+0]),r.push(l[de*3+1]),r.push(l[de*3+2])}function Ye(de){s.push(de.x),s.push(de.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return DU(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Aw[r.type]().fromJSON(r)),new Vd(i,e.options)}}const kU={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],f=e[r*3],d=e[r*3+1];return[new ye(s,o),new ye(a,l),new ye(f,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[i*3],d=e[i*3+1],h=e[i*3+2],p=e[r*3],m=e[r*3+1],g=e[r*3+2],v=e[s*3],x=e[s*3+1],_=e[s*3+2];return Math.abs(a-d)<Math.abs(o-f)?[new ye(o,1-l),new ye(f,1-h),new ye(p,1-g),new ye(v,1-_)]:[new ye(a,1-l),new ye(d,1-h),new ye(m,1-g),new ye(x,1-_)]}};function DU(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Wd extends fo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wd(e.radius,e.detail)}}class du extends fo{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new du(e.radius,e.detail)}}class Hd extends _t{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],f=[],d=[];let h=e;const p=(t-e)/r,m=new z,g=new ye;for(let v=0;v<=r;v++){for(let x=0;x<=i;x++){const _=s+x/i*o;m.x=h*Math.cos(_),m.y=h*Math.sin(_),l.push(m.x,m.y,m.z),f.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y)}h+=p}for(let v=0;v<r;v++){const x=v*(i+1);for(let _=0;_<i;_++){const w=_+x,b=w,M=w+i+1,C=w+i+2,A=w+1;a.push(b,M,A),a.push(M,C,A)}}this.setIndex(a),this.setAttribute("position",new je(l,3)),this.setAttribute("normal",new je(f,3)),this.setAttribute("uv",new je(d,2))}static fromJSON(e){return new Hd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $d extends _t{constructor(e=new sl([new ye(0,.5),new ye(-.5,-.5),new ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new je(r,3)),this.setAttribute("normal",new je(s,3)),this.setAttribute("uv",new je(o,2));function f(d){const h=r.length/3,p=d.extractPoints(t);let m=p.shape;const g=p.holes;fs.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,_=g.length;x<_;x++){const w=g[x];fs.isClockWise(w)===!0&&(g[x]=w.reverse())}const v=fs.triangulateShape(m,g);for(let x=0,_=g.length;x<_;x++){const w=g[x];m=m.concat(w)}for(let x=0,_=m.length;x<_;x++){const w=m[x];r.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let x=0,_=v.length;x<_;x++){const w=v[x],b=w[0]+h,M=w[1]+h,C=w[2]+h;i.push(b,M,C),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return OU(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new $d(i,e.curveSegments)}}function OU(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class hu extends _t{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let f=0;const d=[],h=new z,p=new z,m=[],g=[],v=[],x=[];for(let _=0;_<=i;_++){const w=[],b=_/i;let M=0;_==0&&o==0?M=.5/t:_==i&&l==Math.PI&&(M=-.5/t);for(let C=0;C<=t;C++){const A=C/t;h.x=-e*Math.cos(r+A*s)*Math.sin(o+b*a),h.y=e*Math.cos(o+b*a),h.z=e*Math.sin(r+A*s)*Math.sin(o+b*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),v.push(p.x,p.y,p.z),x.push(A+M,1-b),w.push(f++)}d.push(w)}for(let _=0;_<i;_++)for(let w=0;w<t;w++){const b=d[_][w+1],M=d[_][w],C=d[_+1][w],A=d[_+1][w+1];(_!==0||o>0)&&m.push(b,M,A),(_!==i-1||l<Math.PI)&&m.push(M,C,A)}this.setIndex(m),this.setAttribute("position",new je(g,3)),this.setAttribute("normal",new je(v,3)),this.setAttribute("uv",new je(x,2))}static fromJSON(e){return new hu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Gd extends fo{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gd(e.radius,e.detail)}}class jd extends _t{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],f=[],d=new z,h=new z,p=new z;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const v=g/r*s,x=m/i*Math.PI*2;h.x=(e+t*Math.cos(x))*Math.cos(v),h.y=(e+t*Math.cos(x))*Math.sin(v),h.z=t*Math.sin(x),a.push(h.x,h.y,h.z),d.x=e*Math.cos(v),d.y=e*Math.sin(v),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),f.push(g/r),f.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const v=(r+1)*m+g-1,x=(r+1)*(m-1)+g-1,_=(r+1)*(m-1)+g,w=(r+1)*m+g;o.push(v,x,w),o.push(x,_,w)}this.setIndex(o),this.setAttribute("position",new je(a,3)),this.setAttribute("normal",new je(l,3)),this.setAttribute("uv",new je(f,2))}static fromJSON(e){return new jd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Xd extends _t{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],f=[],d=[],h=new z,p=new z,m=new z,g=new z,v=new z,x=new z,_=new z;for(let b=0;b<=i;++b){const M=b/i*s*Math.PI*2;w(M,s,o,e,m),w(M+.01,s,o,e,g),x.subVectors(g,m),_.addVectors(g,m),v.crossVectors(x,_),_.crossVectors(v,x),v.normalize(),_.normalize();for(let C=0;C<=r;++C){const A=C/r*Math.PI*2,R=-t*Math.cos(A),T=t*Math.sin(A);h.x=m.x+(R*_.x+T*v.x),h.y=m.y+(R*_.y+T*v.y),h.z=m.z+(R*_.z+T*v.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),f.push(p.x,p.y,p.z),d.push(b/i),d.push(C/r)}}for(let b=1;b<=i;b++)for(let M=1;M<=r;M++){const C=(r+1)*(b-1)+(M-1),A=(r+1)*b+(M-1),R=(r+1)*b+M,T=(r+1)*(b-1)+M;a.push(C,A,T),a.push(A,R,T)}this.setIndex(a),this.setAttribute("position",new je(l,3)),this.setAttribute("normal",new je(f,3)),this.setAttribute("uv",new je(d,2));function w(b,M,C,A,R){const T=Math.cos(b),D=Math.sin(b),k=C/M*b,O=Math.cos(k);R.x=A*(2+O)*.5*T,R.y=A*(2+O)*D*.5,R.z=A*Math.sin(k)*.5}}static fromJSON(e){return new Xd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class na extends _t{constructor(e=new Tw(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new z,l=new z,f=new ye;let d=new z;const h=[],p=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new je(h,3)),this.setAttribute("normal",new je(p,3)),this.setAttribute("uv",new je(m,2));function v(){for(let b=0;b<t;b++)x(b);x(s===!1?t:0),w(),_()}function x(b){d=e.getPointAt(b/t,d);const M=o.normals[b],C=o.binormals[b];for(let A=0;A<=r;A++){const R=A/r*Math.PI*2,T=Math.sin(R),D=-Math.cos(R);l.x=D*M.x+T*C.x,l.y=D*M.y+T*C.y,l.z=D*M.z+T*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,h.push(a.x,a.y,a.z)}}function _(){for(let b=1;b<=t;b++)for(let M=1;M<=r;M++){const C=(r+1)*(b-1)+(M-1),A=(r+1)*b+(M-1),R=(r+1)*b+M,T=(r+1)*(b-1)+M;g.push(C,A,T),g.push(A,R,T)}}function w(){for(let b=0;b<=t;b++)for(let M=0;M<=r;M++)f.x=b/t,f.y=M/r,m.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new na(new Aw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eR extends _t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,d=l.length;f<d;++f){const h=l[f],p=h.start,m=h.count;for(let g=p,v=p+m;g<v;g+=3)for(let x=0;x<3;x++){const _=a.getX(g+x),w=a.getX(g+(x+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,w),QE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const d=3*a+f,h=3*a+(f+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),QE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new je(t,3))}}}function QE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var e2=Object.freeze({__proto__:null,BoxGeometry:ha,CapsuleGeometry:Fd,CircleGeometry:Bd,ConeGeometry:fu,CylinderGeometry:pa,DodecahedronGeometry:Ud,EdgesGeometry:ZP,ExtrudeGeometry:Vd,IcosahedronGeometry:Wd,LatheGeometry:uu,OctahedronGeometry:du,PlaneGeometry:lu,PolyhedronGeometry:fo,RingGeometry:Hd,ShapeGeometry:$d,SphereGeometry:hu,TetrahedronGeometry:Gd,TorusGeometry:jd,TorusKnotGeometry:Xd,TubeGeometry:na,WireframeGeometry:eR});class tR extends Jn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nR extends ps{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Pw extends Jn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iR extends Pw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rR extends Jn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sR extends Jn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oR extends Jn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aR extends Jn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lR extends Jn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cR extends Ci{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function yr(n,e,t){return Rw(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ya(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Rw(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uR(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function A1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function Lw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function NU(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],d=f.getValueSize(),h=[],p=[];for(let m=0;m<f.times.length;++m){const g=f.times[m]*r;if(!(g<t||g>=i)){h.push(f.times[m]);for(let v=0;v<d;++v)p.push(f.values[m*d+v])}}h.length!==0&&(f.times=Ya(h,f.times.constructor),f.values=Ya(p,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function zU(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(f===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const m=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=d,w=h-d;v=yr(a.values,_,w)}else if(s>=a.times[g]){const _=g*h+d,w=_+h-d;v=yr(a.values,_,w)}else{const _=a.createInterpolant(),w=d,b=h-d;_.evaluate(s),v=yr(_.resultBuffer,w,b)}l==="quaternion"&&new fi().fromArray(v).normalize().conjugate().toArray(v);const x=f.times.length;for(let _=0;_<x;++_){const w=_*m+p;if(l==="quaternion")fi.multiplyQuaternionsFlat(f.values,w,v,0,f.values,w);else{const b=m-p*2;for(let M=0;M<b;++M)f.values[w+M]-=v[M]}}}return n.blendMode=uw,n}var FU=Object.freeze({__proto__:null,arraySlice:yr,convertArray:Ya,isTypedArray:Rw,getKeyframeOrder:uR,sortedArray:A1,flattenJSON:Lw,subclip:NU,makeClipAdditive:zU});class Yd{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fR extends Yd{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ga,endingEnd:Ga}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ja:s=e,a=2*t-i;break;case ud:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case ja:o=e,l=2*i-t;break;case ud:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const f=(i-t)*.5,d=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),v=g*g,x=v*g,_=-p*x+2*p*v-p*g,w=(1+p)*x+(-1.5-2*p)*v+(-.5+p)*g+1,b=(-1-m)*x+(1.5+m)*v+.5*g,M=m*x-m*v;for(let C=0;C!==a;++C)s[C]=_*o[d+C]+w*o[f+C]+b*o[l+C]+M*o[h+C];return s}}class Iw extends Yd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,d=(i-t)/(r-t),h=1-d;for(let p=0;p!==a;++p)s[p]=o[f+p]*h+o[l+p]*d;return s}}class dR extends Yd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zr{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ya(t,this.TimeBufferType),this.values=Ya(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ya(e.times,Array),values:Ya(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new dR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Iw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ld:t=this.InterpolantFactoryMethodDiscrete;break;case cd:t=this.InterpolantFactoryMethodLinear;break;case Pm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ld;case this.InterpolantFactoryMethodLinear:return cd;case this.InterpolantFactoryMethodSmooth:return Pm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=yr(i,s,o),this.values=yr(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Rw(r))for(let a=0,l=r.length;a!==l;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=yr(this.times),t=yr(this.values),i=this.getValueSize(),r=this.getInterpolation()===Pm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],d=e[a+1];if(f!==d&&(a!==1||f!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let g=0;g!==i;++g){const v=t[h+g];if(v!==t[p+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,f=0;f!==i;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=yr(e,0,o),this.values=yr(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=yr(this.times,0),t=yr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Zr.prototype.TimeBufferType=Float32Array;Zr.prototype.ValueBufferType=Float32Array;Zr.prototype.DefaultInterpolation=cd;class bl extends Zr{}bl.prototype.ValueTypeName="bool";bl.prototype.ValueBufferType=Array;bl.prototype.DefaultInterpolation=ld;bl.prototype.InterpolantFactoryMethodLinear=void 0;bl.prototype.InterpolantFactoryMethodSmooth=void 0;class kw extends Zr{}kw.prototype.ValueTypeName="color";class xd extends Zr{}xd.prototype.ValueTypeName="number";class hR extends Yd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let f=e*a;for(let d=f+a;f!==d;f+=4)fi.slerpFlat(s,0,o,f-a,o,f,l);return s}}class pu extends Zr{InterpolantFactoryMethodLinear(e){return new hR(this.times,this.values,this.getValueSize(),e)}}pu.prototype.ValueTypeName="quaternion";pu.prototype.DefaultInterpolation=cd;pu.prototype.InterpolantFactoryMethodSmooth=void 0;class Ml extends Zr{}Ml.prototype.ValueTypeName="string";Ml.prototype.ValueBufferType=Array;Ml.prototype.DefaultInterpolation=ld;Ml.prototype.InterpolantFactoryMethodLinear=void 0;Ml.prototype.InterpolantFactoryMethodSmooth=void 0;class _d extends Zr{}_d.prototype.ValueTypeName="vector";class wd{constructor(e,t=-1,i,r=Yg){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Qi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(UU(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Zr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const d=uR(l);l=A1(l,1,d),f=A1(f,1,d),!r&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new xd(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],d=f.name.match(s);if(d&&d.length>1){const h=d[1];let p=r[h];p||(r[h]=p=[]),p.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,g,v){if(m.length!==0){const x=[],_=[];Lw(m,x,_,g),x.length!==0&&v.push(new h(p,x,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let h=0;h<f.length;h++){const p=f[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let v=0;v<p[g].morphTargets.length;v++)m[p[g].morphTargets[v]]=-1;for(const v in m){const x=[],_=[];for(let w=0;w!==p[g].morphTargets.length;++w){const b=p[g];x.push(b.time),_.push(b.morphTarget===v?1:0)}r.push(new xd(".morphTargetInfluence["+v+"]",x,_))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(_d,m+".position",p,"pos",r),i(pu,m+".quaternion",p,"rot",r),i(_d,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function BU(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xd;case"vector":case"vector2":case"vector3":case"vector4":return _d;case"color":return kw;case"quaternion":return pu;case"bool":case"boolean":return bl;case"string":return Ml}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function UU(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=BU(n.type);if(n.times===void 0){const t=[],i=[];Lw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const gl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};let Dw=class{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return f.push(d,h),this},this.removeHandler=function(d){const h=f.indexOf(d);return h!==-1&&f.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=f.length;h<p;h+=2){const m=f[h],g=f[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}};const pR=new Dw;let rr=class{constructor(e){this.manager=e!==void 0?e:pR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Os={};class VU extends Error{constructor(e,t){super(e),this.response=t}}class so extends rr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=gl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Os[e]!==void 0){Os[e].push({onLoad:t,onProgress:i,onError:r});return}Os[e]=[],Os[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=Os[e],h=f.body.getReader(),p=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),m=p?parseInt(p):0,g=m!==0;let v=0;const x=new ReadableStream({start(_){w();function w(){h.read().then(({done:b,value:M})=>{if(b)_.close();else{v+=M.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let A=0,R=d.length;A<R;A++){const T=d[A];T.onProgress&&T.onProgress(C)}_.enqueue(M),w()}})}}});return new Response(x)}else throw new VU(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return f.json();default:if(a===void 0)return f.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return f.arrayBuffer().then(g=>m.decode(g))}}}).then(f=>{gl.add(e,f);const d=Os[e];delete Os[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onLoad&&m.onLoad(f)}}).catch(f=>{const d=Os[e];if(d===void 0)throw this.manager.itemError(e),f;delete Os[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onError&&m.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new so(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=wd.parse(e[i]);t.push(r)}return t}}class HU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Sw,l=new so(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function d(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},f+=1,f===6&&(m.mipmapCount===1&&(a.minFilter=Mn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<p.mipmapCount;v++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+v]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Mn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}let Sd=class extends rr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=hd("img");function l(){d(),gl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}};class $U extends rr{constructor(e){super(e)}load(e,t,i,r){const s=new zd,o=new Sd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(d){s.images[f]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)l(f);return s}}class GU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new zc,a=new so(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const f=s.parse(l);f&&(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:ci,o.wrapT=f.wrapT!==void 0?f.wrapT:ci,o.magFilter=f.magFilter!==void 0?f.magFilter:Mn,o.minFilter=f.minFilter!==void 0?f.minFilter:Mn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Qo),f.mipmapCount===1&&(o.minFilter=Mn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}let jU=class extends rr{constructor(e){super(e)}load(e,t,i,r){const s=new jn,o=new Sd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}};class ma extends zt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class mR extends ma{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Av=new pt,t2=new z,n2=new z;class Ow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ye(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zg,this._frameExtents=new ye(1,1),this._viewportCount=1,this._viewports=[new Ut(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;t2.setFromMatrixPosition(e.matrixWorld),t.position.copy(t2),n2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(n2),t.updateMatrixWorld(),Av.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Av),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Av)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XU extends Ow{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=dd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gR extends ma{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.target=new zt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new XU}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const i2=new pt,cf=new z,Pv=new z;class YU extends Ow{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ye(4,2),this._viewportCount=6,this._viewports=[new Ut(2,1,1,1),new Ut(0,1,1,1),new Ut(3,1,1,1),new Ut(1,1,1,1),new Ut(3,0,1,1),new Ut(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),cf.setFromMatrixPosition(e.matrixWorld),i.position.copy(cf),Pv.copy(i.position),Pv.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Pv),i.updateMatrixWorld(),r.makeTranslation(-cf.x,-cf.y,-cf.z),i2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i2)}}class yR extends ma{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new YU}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qU extends Ow{constructor(){super(new Xs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vR extends ma{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.target=new zt,this.shadow=new qU}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xR extends ma{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _R extends ma{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class s0 extends ma{constructor(e=new wR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class o0 extends rr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new so(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=o0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Oe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Oe().setHex(o.value);break;case"v2":r.uniforms[s].value=new ye().fromArray(o.value);break;case"v3":r.uniforms[s].value=new z().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Ut().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Zi().fromArray(o.value);break;case"m4":r.uniforms[s].value=new pt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ye().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:tR,SpriteMaterial:xw,RawShaderMaterial:nR,ShaderMaterial:ps,PointsMaterial:ww,MeshPhysicalMaterial:iR,MeshStandardMaterial:Pw,MeshPhongMaterial:rR,MeshToonMaterial:sR,MeshNormalMaterial:oR,MeshLambertMaterial:aR,MeshDepthMaterial:gw,MeshDistanceMaterial:yw,MeshBasicMaterial:da,MeshMatcapMaterial:lR,LineDashedMaterial:cR,LineBasicMaterial:Ci,Material:Jn};return new t[e]}}class P1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SR extends _t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class bR extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new so(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,g){if(t[g]!==void 0)return t[g];const x=m.interleavedBuffers[g],_=s(m,x.buffer),w=Ec(x.type,_),b=new e0(w,x.stride);return b.uuid=x.uuid,t[g]=b,b}function s(m,g){if(i[g]!==void 0)return i[g];const x=m.arrayBuffers[g],_=new Uint32Array(x).buffer;return i[g]=_,_}const o=e.isInstancedBufferGeometry?new SR:new _t,a=e.data.index;if(a!==void 0){const m=Ec(a.type,a.array);o.setIndex(new Xt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const x=r(e.data,g.data);v=new pl(x,g.itemSize,g.offset,g.normalized)}else{const x=Ec(g.type,g.array),_=g.isInstancedBufferAttribute?Zc:Xt;v=new _(x,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),o.setAttribute(m,v)}const f=e.data.morphAttributes;if(f)for(const m in f){const g=f[m],v=[];for(let x=0,_=g.length;x<_;x++){const w=g[x];let b;if(w.isInterleavedBufferAttribute){const M=r(e.data,w.data);b=new pl(M,w.itemSize,w.offset,w.normalized)}else{const M=Ec(w.type,w.array);b=new Xt(M,w.itemSize,w.normalized)}w.name!==void 0&&(b.name=w.name),v.push(b)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,g=h.length;m!==g;++m){const v=h[m];o.addGroup(v.start,v.count,v.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Sl(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ZU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?P1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new so(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?P1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new so(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new sl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new t0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new bR;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in e2?a=e2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new o0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=wd.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(d)}else return l.data?{data:Ec(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Dw(t);s=new Sd(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const h=e[f],p=h.url;if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const x=p[g],_=a(x);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new zc(_.data,_.width,_.height)))}r[h.uuid]=new Xa(m)}else{const m=a(h.url);r[h.uuid]=new Xa(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Ec(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Sd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const d=[];for(let h=0,p=f.length;h<p;h++){const m=f[h],g=await s(m);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new zc(g.data,g.width,g.height)))}i[l.uuid]=new Xa(d)}else{const d=await s(l.url);i[l.uuid]=new Xa(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],f=l.data;let d;Array.isArray(f)?(d=new zd,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new zc:d=new jn,f&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,KU)),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],r2),d.wrapT=i(a.wrap[1],r2)),a.format!==void 0&&(d.format=a.format),a.type!==void 0&&(d.type=a.type),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,s2)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,s2)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const x=p[g];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function f(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,h;switch(e.type){case"Scene":o=new ug,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Oe(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Qg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Jg(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Xs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new xR(e.color,e.intensity);break;case"DirectionalLight":o=new vR(e.color,e.intensity);break;case"PointLight":o=new yR(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new _R(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new gR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new mR(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new s0().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=l(e.material),o=new WP(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=l(e.material),o=new qn(d,h);break;case"InstancedMesh":d=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new HP(d,h,p),o.instanceMatrix=new Zc(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Zc(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new VP;break;case"Line":o=new ta(a(e.geometry),l(e.material));break;case"LineLoop":o=new $P(a(e.geometry),l(e.material));break;case"LineSegments":o=new xs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new GP(a(e.geometry),l(e.material));break;case"Sprite":o=new UP(l(e.material));break;case"Group":o=new Cc;break;case"Bone":o=new _w;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const KU={UVMapping:Xg,CubeReflectionMapping:Ko,CubeRefractionMapping:Jo,EquirectangularReflectionMapping:rd,EquirectangularRefractionMapping:sd,CubeUVReflectionMapping:su},r2={RepeatWrapping:od,ClampToEdgeWrapping:ci,MirroredRepeatWrapping:ad},s2={NearestFilter:Sn,NearestMipmapNearestFilter:ag,NearestMipmapLinearFilter:If,LinearFilter:Mn,LinearMipmapNearestFilter:lw,LinearMipmapLinearFilter:Qo};class JU extends rr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){gl.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let qp;class Nw{static getContext(){return qp===void 0&&(qp=new(window.AudioContext||window.webkitAudioContext)),qp}static setContext(e){qp=e}}class QU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new so(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);Nw.getContext().decodeAudioData(l,function(d){t(d)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class e6 extends s0{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Oe().set(e),s=new Oe().set(t),o=new z(r.r,r.g,r.b),a=new z(s.r,s.g,s.b),l=Math.sqrt(Math.PI),f=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}class t6 extends s0{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Oe().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const o2=new pt,a2=new pt,Pa=new pt;class n6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Pa.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(nl*t.fov*.5)/t.zoom;let a,l;a2.elements[12]=-r,o2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Pa.elements[0]=2*t.near/(l-a),Pa.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Pa),a=-o*t.aspect-s,l=o*t.aspect-s,Pa.elements[0]=2*t.near/(l-a),Pa.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Pa)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(a2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(o2)}}class zw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=l2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=l2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function l2(){return(typeof performance>"u"?Date:performance).now()}const Ra=new z,c2=new fi,i6=new z,La=new z;class r6 extends zt{constructor(){super(),this.type="AudioListener",this.context=Nw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ra,c2,i6),La.set(0,0,-1).applyQuaternion(c2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ra.x,r),t.positionY.linearRampToValueAtTime(Ra.y,r),t.positionZ.linearRampToValueAtTime(Ra.z,r),t.forwardX.linearRampToValueAtTime(La.x,r),t.forwardY.linearRampToValueAtTime(La.y,r),t.forwardZ.linearRampToValueAtTime(La.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Ra.x,Ra.y,Ra.z),t.setOrientation(La.x,La.y,La.z,i.x,i.y,i.z)}}class MR extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ia=new z,u2=new fi,s6=new z,ka=new z;class o6 extends MR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ia,u2,s6),ka.set(0,0,1).applyQuaternion(u2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ia.x,i),t.positionY.linearRampToValueAtTime(Ia.y,i),t.positionZ.linearRampToValueAtTime(Ia.z,i),t.orientationX.linearRampToValueAtTime(ka.x,i),t.orientationY.linearRampToValueAtTime(ka.y,i),t.orientationZ.linearRampToValueAtTime(ka.z,i)}else t.setPosition(Ia.x,Ia.y,Ia.z),t.setOrientation(ka.x,ka.y,ka.z)}}class a6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class ER{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){fi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;fi.multiplyQuaternionsFlat(e,o,e,t,e,i),fi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Fw="\\[\\]\\.:\\/",l6=new RegExp("["+Fw+"]","g"),Bw="[^"+Fw+"]",c6="[^"+Fw.replace("\\.","")+"]",u6=/((?:WC+[\/:])*)/.source.replace("WC",Bw),f6=/(WCOD+)?/.source.replace("WCOD",c6),d6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Bw),h6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Bw),p6=new RegExp("^"+u6+f6+d6+h6+"$"),m6=["material","materials","bones","map"];class g6{constructor(e,t,i){const r=i||It.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class It{constructor(e,t,i){this.path=t,this.parsedPath=i||It.parseTrackName(t),this.node=It.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new It.Composite(e,t,i):new It(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(l6,"")}static parseTrackName(e){const t=p6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);m6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=It.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}It.Composite=g6;It.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};It.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};It.prototype.GetterByBindingType=[It.prototype._getValue_direct,It.prototype._getValue_array,It.prototype._getValue_arrayElement,It.prototype._getValue_toArray];It.prototype.SetterByBindingTypeAndVersioning=[[It.prototype._setValue_direct,It.prototype._setValue_direct_setNeedsUpdate,It.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[It.prototype._setValue_array,It.prototype._setValue_array_setNeedsUpdate,It.prototype._setValue_array_setMatrixWorldNeedsUpdate],[It.prototype._setValue_arrayElement,It.prototype._setValue_arrayElement_setNeedsUpdate,It.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[It.prototype._setValue_fromArray,It.prototype._setValue_fromArray_setNeedsUpdate,It.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class y6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Qi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let v=0,x=o;v!==x;++v)s[v].push(new It(p,i[v],r[v]))}else if(g<f){a=e[g];const v=--f,x=e[v];t[x.uuid]=g,e[g]=x,t[m]=v,e[v]=p;for(let _=0,w=o;_!==w;++_){const b=s[_],M=b[v];let C=b[g];b[g]=M,C===void 0&&(C=new It(p,i[_],r[_])),b[v]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,d=t[f];if(d!==void 0&&d>=s){const h=s++,p=e[h];t[p.uuid]=d,e[d]=p,t[f]=h,e[h]=l;for(let m=0,g=r;m!==g;++m){const v=i[m],x=v[h],_=v[d];v[d]=x,v[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],d=f.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const p=--s,m=e[p],g=--o,v=e[g];t[m.uuid]=h,e[h]=m,t[v.uuid]=p,e[p]=v,e.pop();for(let x=0,_=r;x!==_;++x){const w=i[x],b=w[p],M=w[g];w[h]=b,w[p]=M,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let g=0,v=r;g!==v;++g){const x=i[g];x[h]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,d=this.nCachedObjects_,h=new Array(f);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let p=d,m=l.length;p!==m;++p){const g=l[p];h[p]=new It(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class v6{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ga,endingEnd:Ga};for(let f=0;f!==o;++f){const d=s[f].createInterpolant(null);a[f]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case uw:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),f[d].accumulateAdditive(a);break;case Yg:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),f[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===gP;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===pP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=ja,r.endingEnd=ja):(e?r.endingStart=this.zeroSlopeAtStart?ja:Ga:r.endingStart=ud,t?r.endingEnd=this.zeroSlopeAtEnd?ja:Ga:r.endingEnd=ud)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const x6=new Float32Array(1);class _6 extends vs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,f=this._bindingsByRootAndName;let d=f[l];d===void 0&&(d={},f[l]=d);for(let h=0;h!==s;++h){const p=r[h],m=p.name;let g=d[m];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;g=new ER(It.create(i,m,v),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,l[d]=f,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Iw(new Float32Array(2),new Float32Array(2),1,x6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?wd.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Yg),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const d=new v6(this,o,t,i);return this._bindAction(d,f),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?wd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const d=f._cacheIndex,h=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Uw{constructor(e){this.value=e}clone(){return new Uw(this.value.clone===void 0?this.value:this.value.clone())}}let w6=0;class S6 extends vs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:w6++}),this.name="",this.usage=fd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class b6 extends e0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class M6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class TR{constructor(e,t,i=0,r=1/0){this.ray=new ou(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new rl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return R1(e,this,i,t),i.sort(f2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)R1(e[r],this,i,t);return i.sort(f2),i}}function f2(n,e){return n.distance-e.distance}function R1(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)R1(r[s],e,t,!0)}}class L1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class E6{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const d2=new ye;class T6{constructor(e=new ye(1/0,1/0),t=new ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=d2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return d2.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const h2=new z,Zp=new z;class C6{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){h2.subVectors(e,this.start),Zp.subVectors(this.end,this.start);const i=Zp.dot(Zp);let s=Zp.dot(h2)/i;return t&&(s=En(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const p2=new z;class A6 extends zt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new _t,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new je(r,3));const s=new Ci({fog:!1,toneMapped:!1});this.cone=new xs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),p2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(p2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ao=new z,Kp=new pt,Rv=new pt;class P6 extends xs{constructor(e){const t=CR(e),i=new _t,r=[],s=[],o=new Oe(0,0,1),a=new Oe(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new je(r,3)),i.setAttribute("color",new je(s,3));const l=new Ci({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Rv.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Kp.multiplyMatrices(Rv,a.matrixWorld),Ao.setFromMatrixPosition(Kp),r.setXYZ(o,Ao.x,Ao.y,Ao.z),Kp.multiplyMatrices(Rv,a.parent.matrixWorld),Ao.setFromMatrixPosition(Kp),r.setXYZ(o+1,Ao.x,Ao.y,Ao.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CR(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,CR(n.children[t]));return e}class R6 extends qn{constructor(e,t,i){const r=new hu(t,4,2),s=new da({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const L6=new z,m2=new Oe,g2=new Oe;class I6 extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new du(t);r.rotateY(Math.PI*.5),this.material=new da({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Xt(o,3)),this.add(new qn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");m2.copy(this.light.color),g2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?m2:g2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(L6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class k6 extends xs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Oe(i),r=new Oe(r);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=p===s?i:r;v.toArray(f,m),m+=3,v.toArray(f,m),m+=3,v.toArray(f,m),m+=3,v.toArray(f,m),m+=3}const d=new _t;d.setAttribute("position",new je(l,3)),d.setAttribute("color",new je(f,3));const h=new Ci({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class D6 extends xs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Oe(s),o=new Oe(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const v=h&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<i;h++){const p=h&1?s:o,m=e-e/i*h;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),x=Math.sin(v)*m,_=Math.cos(v)*m;a.push(x,0,_),l.push(p.r,p.g,p.b),v=(g+1)/r*(Math.PI*2),x=Math.sin(v)*m,_=Math.cos(v)*m,a.push(x,0,_),l.push(p.r,p.g,p.b)}}const f=new _t;f.setAttribute("position",new je(a,3)),f.setAttribute("color",new je(l,3));const d=new Ci({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const y2=new z,Jp=new z,v2=new z;class O6 extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new _t;r.setAttribute("position",new je([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ci({fog:!1,toneMapped:!1});this.lightPlane=new ta(r,s),this.add(this.lightPlane),r=new _t,r.setAttribute("position",new je([0,0,0,0,0,1],3)),this.targetLine=new ta(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),y2.setFromMatrixPosition(this.light.matrixWorld),Jp.setFromMatrixPosition(this.light.target.matrixWorld),v2.subVectors(Jp,y2),this.lightPlane.lookAt(Jp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jp),this.targetLine.scale.z=v2.length()}}const Qp=new z,mn=new Nd;class N6 extends xs{constructor(e){const t=new _t,i=new Ci({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new je(r,3)),t.setAttribute("color",new je(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Oe(16755200),d=new Oe(16711680),h=new Oe(43775),p=new Oe(16777215),m=new Oe(3355443);this.setColors(f,d,h,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wn("c",t,e,mn,0,0,-1),wn("t",t,e,mn,0,0,1),wn("n1",t,e,mn,-i,-r,-1),wn("n2",t,e,mn,i,-r,-1),wn("n3",t,e,mn,-i,r,-1),wn("n4",t,e,mn,i,r,-1),wn("f1",t,e,mn,-i,-r,1),wn("f2",t,e,mn,i,-r,1),wn("f3",t,e,mn,-i,r,1),wn("f4",t,e,mn,i,r,1),wn("u1",t,e,mn,i*.7,r*1.1,-1),wn("u2",t,e,mn,-i*.7,r*1.1,-1),wn("u3",t,e,mn,0,r*2,-1),wn("cf1",t,e,mn,-i,0,1),wn("cf2",t,e,mn,i,0,1),wn("cf3",t,e,mn,0,-r,1),wn("cf4",t,e,mn,0,r,1),wn("cn1",t,e,mn,-i,0,-1),wn("cn2",t,e,mn,i,0,-1),wn("cn3",t,e,mn,0,-r,-1),wn("cn4",t,e,mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wn(n,e,t,i,r,s,o){Qp.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,d=a.length;f<d;f++)l.setXYZ(a[f],Qp.x,Qp.y,Qp.z)}}const em=new wl;class z6 extends xs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new _t;s.setIndex(new Xt(i,1)),s.setAttribute("position",new Xt(r,3)),super(s,new Ci({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&em.setFromObject(this.object),em.isEmpty())return;const t=em.min,i=em.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class F6 extends xs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new _t;s.setIndex(new Xt(i,1)),s.setAttribute("position",new je(r,3)),super(s,new Ci({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class B6 extends ta{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new _t;o.setAttribute("position",new je(s,3)),o.computeBoundingSphere(),super(o,new Ci({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new _t;l.setAttribute("position",new je(a,3)),l.computeBoundingSphere(),this.add(new qn(l,new da({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const x2=new z;let tm,Lv;class U6 extends zt{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",tm===void 0&&(tm=new _t,tm.setAttribute("position",new je([0,0,0,0,1,0],3)),Lv=new pa(0,.5,1,5,1),Lv.translate(0,-.5,0)),this.position.copy(t),this.line=new ta(tm,new Ci({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qn(Lv,new da({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{x2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(x2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class V6 extends xs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new _t;r.setAttribute("position",new je(t,3)),r.setAttribute("color",new je(i,3));const s=new Ci({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Oe,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class W6{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new md,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const w=[];for(let b=0,M=_.length;b<M;b++){const C=_[b],A=new sl;A.curves=C.curves,w.push(A)}return w}function i(_,w){const b=w.length;let M=!1;for(let C=b-1,A=0;A<b;C=A++){let R=w[C],T=w[A],D=T.x-R.x,k=T.y-R.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(R=w[A],D=-D,T=w[C],k=-k),_.y<R.y||_.y>T.y)continue;if(_.y===R.y){if(_.x===R.x)return!0}else{const O=k*(_.x-R.x)-D*(_.y-R.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(_.y!==R.y)continue;if(T.x<=_.x&&_.x<=R.x||R.x<=_.x&&_.x<=T.x)return!0}}return M}const r=fs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const f=[];if(s.length===1)return a=s[0],l=new sl,l.curves=a.curves,f.push(l),f;let d=!r(s[0].getPoints());d=e?!d:d;const h=[],p=[];let m=[],g=0,v;p[g]=void 0,m[g]=[];for(let _=0,w=s.length;_<w;_++)a=s[_],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!d&&p[g]&&g++,p[g]={s:new sl,p:v},p[g].s.curves=a.curves,d&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!p[0])return t(s);if(p.length>1){let _=!1,w=0;for(let b=0,M=p.length;b<M;b++)h[b]=[];for(let b=0,M=p.length;b<M;b++){const C=m[b];for(let A=0;A<C.length;A++){const R=C[A];let T=!0;for(let D=0;D<p.length;D++)i(R.p,p[D].p)&&(b!==D&&w++,T?(T=!1,h[D].push(R)):_=!0);T&&h[b].push(R)}}w>0&&_===!1&&(m=h)}let x;for(let _=0,w=p.length;_<w;_++){l=p[_].s,f.push(l),x=m[_];for(let b=0,M=x.length;b<M;b++)l.holes.push(x[b].h)}return f}}const Vs=H6();function H6(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):f<-14?(i[l]=1024>>-f-14,i[l|256]=1024>>-f-14|32768,r[l]=-f-1,r[l|256]=-f-1):f<=15?(i[l]=f+15<<10,i[l|256]=f+15<<10|32768,r[l]=13,r[l|256]=13):f<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,d=0;for(;!(f&8388608);)f<<=1,d-=8388608;f&=-8388609,d+=947912704,s[l]=f|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function $6(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=En(n,-65504,65504),Vs.floatView[0]=n;const e=Vs.uint32View[0],t=e>>23&511;return Vs.baseTable[t]+((e&8388607)>>Vs.shiftTable[t])}function G6(n){const e=n>>10;return Vs.uint32View[0]=Vs.mantissaTable[Vs.offsetTable[e]+(n&1023)]+Vs.exponentTable[e],Vs.floatView[0]}var j6=Object.freeze({__proto__:null,toHalfFloat:$6,fromHalfFloat:G6});function X6(){console.error("THREE.ImmediateRenderObject has been removed.")}class Y6 extends Cr{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class q6 extends Od{constructor(e,t,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,r)}}class Z6 extends qg{constructor(e,t,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,r)}}class K6 extends ha{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class J6 extends Fd{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class Q6 extends Bd{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class e8 extends fu{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class t8 extends pa{constructor(e,t,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,l)}}class n8 extends Ud{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class i8 extends Vd{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class r8 extends Wd{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class s8 extends uu{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class o8 extends du{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class a8 extends lu{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class l8 extends fo{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class c8 extends Hd{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class u8 extends $d{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class f8 extends hu{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class d8 extends Gd{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class h8 extends jd{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class p8 extends Xd{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class m8 extends na{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gg);const g8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aw,AddEquation:Ba,AddOperation:YA,AdditiveAnimationBlendMode:uw,AdditiveBlending:qx,AlphaFormat:rP,AlwaysDepth:VA,AlwaysStencilFunc:_P,AmbientLight:xR,AmbientLightProbe:t6,AnimationClip:wd,AnimationLoader:WU,AnimationMixer:_6,AnimationObjectGroup:y6,AnimationUtils:FU,ArcCurve:jP,ArrayCamera:NP,ArrowHelper:U6,Audio:MR,AudioAnalyser:a6,AudioContext:Nw,AudioListener:r6,AudioLoader:QU,AxesHelper:V6,BackSide:Ji,BasicDepthPacking:yP,BasicShadowMap:CA,Bone:_w,BooleanKeyframeTrack:bl,Box2:T6,Box3:wl,Box3Helper:F6,BoxBufferGeometry:K6,BoxGeometry:ha,BoxHelper:z6,BufferAttribute:Xt,BufferGeometry:_t,BufferGeometryLoader:bR,ByteType:QA,Cache:gl,Camera:Nd,CameraHelper:N6,CanvasTexture:lU,CapsuleBufferGeometry:J6,CapsuleGeometry:Fd,CatmullRomCurve3:XP,CineonToneMapping:KA,CircleBufferGeometry:Q6,CircleGeometry:Bd,ClampToEdgeWrapping:ci,Clock:zw,Color:Oe,ColorKeyframeTrack:kw,ColorManagement:ai,CompressedArrayTexture:aU,CompressedTexture:Sw,CompressedTextureLoader:HU,ConeBufferGeometry:e8,ConeGeometry:fu,CubeCamera:AP,CubeReflectionMapping:Ko,CubeRefractionMapping:Jo,CubeTexture:zd,CubeTextureLoader:$U,CubeUVReflectionMapping:su,CubicBezierCurve:Mw,CubicBezierCurve3:YP,CubicInterpolant:fR,CullFaceBack:Yx,CullFaceFront:TA,CullFaceFrontBack:uN,CullFaceNone:EA,Curve:qr,CurvePath:qP,CustomBlending:AA,CustomToneMapping:JA,CylinderBufferGeometry:t8,CylinderGeometry:pa,Cylindrical:E6,Data3DTexture:qg,DataArrayTexture:Od,DataTexture:zc,DataTexture2DArray:q6,DataTexture3D:Z6,DataTextureLoader:GU,DataUtils:j6,DecrementStencilOp:SN,DecrementWrapStencilOp:MN,DefaultLoadingManager:pR,DepthFormat:jo,DepthStencilFormat:hl,DepthTexture:zP,DirectionalLight:vR,DirectionalLightHelper:O6,DiscreteInterpolant:dR,DodecahedronBufferGeometry:n8,DodecahedronGeometry:Ud,DoubleSide:Yi,DstAlphaFactor:OA,DstColorFactor:zA,DynamicCopyUsage:BN,DynamicDrawUsage:kN,DynamicReadUsage:NN,EdgesGeometry:ZP,EllipseCurve:n0,EqualDepth:HA,EqualStencilFunc:AN,EquirectangularReflectionMapping:rd,EquirectangularRefractionMapping:sd,Euler:au,EventDispatcher:vs,ExtrudeBufferGeometry:i8,ExtrudeGeometry:Vd,FileLoader:so,Float16BufferAttribute:_4,Float32BufferAttribute:je,Float64BufferAttribute:w4,FloatType:Gs,Fog:Qg,FogExp2:Jg,FramebufferTexture:oU,FrontSide:Zo,Frustum:Zg,GLBufferAttribute:M6,GLSL1:VN,GLSL3:w1,GreaterDepth:GA,GreaterEqualDepth:$A,GreaterEqualStencilFunc:IN,GreaterStencilFunc:RN,GridHelper:k6,Group:Cc,HalfFloatType:Xc,HemisphereLight:mR,HemisphereLightHelper:I6,HemisphereLightProbe:e6,IcosahedronBufferGeometry:r8,IcosahedronGeometry:Wd,ImageBitmapLoader:JU,ImageLoader:Sd,ImageUtils:dw,ImmediateRenderObject:X6,IncrementStencilOp:wN,IncrementWrapStencilOp:bN,InstancedBufferAttribute:Zc,InstancedBufferGeometry:SR,InstancedInterleavedBuffer:b6,InstancedMesh:HP,Int16BufferAttribute:v4,Int32BufferAttribute:x4,Int8BufferAttribute:m4,IntType:tP,InterleavedBuffer:e0,InterleavedBufferAttribute:pl,Interpolant:Yd,InterpolateDiscrete:ld,InterpolateLinear:cd,InterpolateSmooth:Pm,InvertStencilOp:EN,KeepStencilOp:Rm,KeyframeTrack:Zr,LOD:VP,LatheBufferGeometry:s8,LatheGeometry:uu,Layers:rl,LessDepth:WA,LessEqualDepth:og,LessEqualStencilFunc:PN,LessStencilFunc:CN,Light:ma,LightProbe:s0,Line:ta,Line3:C6,LineBasicMaterial:Ci,LineCurve:i0,LineCurve3:pd,LineDashedMaterial:cR,LineLoop:$P,LineSegments:xs,LinearEncoding:ea,LinearFilter:Mn,LinearInterpolant:Iw,LinearMipMapLinearFilter:pN,LinearMipMapNearestFilter:hN,LinearMipmapLinearFilter:Qo,LinearMipmapNearestFilter:lw,LinearSRGBColorSpace:Yc,LinearToneMapping:qA,Loader:rr,LoaderUtils:P1,LoadingManager:Dw,LoopOnce:pP,LoopPingPong:gP,LoopRepeat:mP,LuminanceAlphaFormat:aP,LuminanceFormat:oP,MOUSE:Na,Material:Jn,MaterialLoader:o0,MathUtils:t4,Matrix3:Zi,Matrix4:pt,MaxEquation:Qx,Mesh:qn,MeshBasicMaterial:da,MeshDepthMaterial:gw,MeshDistanceMaterial:yw,MeshLambertMaterial:aR,MeshMatcapMaterial:lR,MeshNormalMaterial:oR,MeshPhongMaterial:rR,MeshPhysicalMaterial:iR,MeshStandardMaterial:Pw,MeshToonMaterial:sR,MinEquation:Jx,MirroredRepeatWrapping:ad,MixOperation:XA,MultiplyBlending:Kx,MultiplyOperation:Dd,NearestFilter:Sn,NearestMipMapLinearFilter:dN,NearestMipMapNearestFilter:fN,NearestMipmapLinearFilter:If,NearestMipmapNearestFilter:ag,NeverDepth:UA,NeverStencilFunc:TN,NoBlending:Zs,NoColorSpace:vN,NoToneMapping:Gr,NormalAnimationBlendMode:Yg,NormalBlending:el,NotEqualDepth:jA,NotEqualStencilFunc:LN,NumberKeyframeTrack:xd,Object3D:zt,ObjectLoader:ZU,ObjectSpaceNormalMap:xP,OctahedronBufferGeometry:o8,OctahedronGeometry:du,OneFactor:IA,OneMinusDstAlphaFactor:NA,OneMinusDstColorFactor:FA,OneMinusSrcAlphaFactor:ow,OneMinusSrcColorFactor:DA,OrthographicCamera:Xs,PCFShadowMap:jg,PCFSoftShadowMap:Lf,PMREMGenerator:b1,Path:md,PerspectiveCamera:yn,Plane:Bs,PlaneBufferGeometry:a8,PlaneGeometry:lu,PlaneHelper:B6,PointLight:yR,PointLightHelper:R6,Points:GP,PointsMaterial:ww,PolarGridHelper:D6,PolyhedronBufferGeometry:l8,PolyhedronGeometry:fo,PositionalAudio:o6,PropertyBinding:It,PropertyMixer:ER,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Tw,Quaternion:fi,QuaternionKeyframeTrack:pu,QuaternionLinearInterpolant:hR,REVISION:Gg,RGBADepthPacking:vP,RGBAFormat:Di,RGBAIntegerFormat:dP,RGBA_ASTC_10x10_Format:y1,RGBA_ASTC_10x5_Format:p1,RGBA_ASTC_10x6_Format:m1,RGBA_ASTC_10x8_Format:g1,RGBA_ASTC_12x10_Format:v1,RGBA_ASTC_12x12_Format:x1,RGBA_ASTC_4x4_Format:o1,RGBA_ASTC_5x4_Format:a1,RGBA_ASTC_5x5_Format:l1,RGBA_ASTC_6x5_Format:c1,RGBA_ASTC_6x6_Format:u1,RGBA_ASTC_8x5_Format:f1,RGBA_ASTC_8x6_Format:d1,RGBA_ASTC_8x8_Format:h1,RGBA_BPTC_Format:_1,RGBA_ETC2_EAC_Format:s1,RGBA_PVRTC_2BPPV1_Format:i1,RGBA_PVRTC_4BPPV1_Format:n1,RGBA_S3TC_DXT1_Format:Tm,RGBA_S3TC_DXT3_Format:Cm,RGBA_S3TC_DXT5_Format:Am,RGBFormat:sP,RGB_ETC1_Format:hP,RGB_ETC2_Format:r1,RGB_PVRTC_2BPPV1_Format:t1,RGB_PVRTC_4BPPV1_Format:e1,RGB_S3TC_DXT1_Format:Em,RGFormat:uP,RGIntegerFormat:fP,RawShaderMaterial:nR,Ray:ou,Raycaster:TR,RectAreaLight:_R,RedFormat:lP,RedIntegerFormat:cP,ReinhardToneMapping:ZA,RepeatWrapping:od,ReplaceStencilOp:_N,ReverseSubtractEquation:RA,RingBufferGeometry:c8,RingGeometry:Hd,SRGBColorSpace:Ur,Scene:ug,ShaderChunk:xt,ShaderLib:Wr,ShaderMaterial:ps,ShadowMaterial:tR,Shape:sl,ShapeBufferGeometry:u8,ShapeGeometry:$d,ShapePath:W6,ShapeUtils:fs,ShortType:eP,Skeleton:t0,SkeletonHelper:P6,SkinnedMesh:WP,Source:Xa,Sphere:Sl,SphereBufferGeometry:f8,SphereGeometry:hu,Spherical:L1,SphericalHarmonics3:wR,SplineCurve:Cw,SpotLight:gR,SpotLightHelper:A6,Sprite:UP,SpriteMaterial:xw,SrcAlphaFactor:sw,SrcAlphaSaturateFactor:BA,SrcColorFactor:kA,StaticCopyUsage:FN,StaticDrawUsage:fd,StaticReadUsage:ON,StereoCamera:n6,StreamCopyUsage:UN,StreamDrawUsage:DN,StreamReadUsage:zN,StringKeyframeTrack:Ml,SubtractEquation:PA,SubtractiveBlending:Zx,TOUCH:za,TangentSpaceNormalMap:fa,TetrahedronBufferGeometry:d8,TetrahedronGeometry:Gd,Texture:jn,TextureLoader:jU,TorusBufferGeometry:h8,TorusGeometry:jd,TorusKnotBufferGeometry:p8,TorusKnotGeometry:Xd,Triangle:wr,TriangleFanDrawMode:yN,TriangleStripDrawMode:gN,TrianglesDrawMode:mN,TubeBufferGeometry:m8,TubeGeometry:na,TwoPassDoubleSide:xf,UVMapping:Xg,Uint16BufferAttribute:hw,Uint32BufferAttribute:pw,Uint8BufferAttribute:g4,Uint8ClampedBufferAttribute:y4,Uniform:Uw,UniformsGroup:S6,UniformsLib:Re,UniformsUtils:CP,UnsignedByteType:ro,UnsignedInt248Type:tl,UnsignedIntType:zo,UnsignedShort4444Type:nP,UnsignedShort5551Type:iP,UnsignedShortType:cw,VSMShadowMap:$a,Vector2:ye,Vector3:z,Vector4:Ut,VectorKeyframeTrack:_d,VideoTexture:sU,WebGL1Renderer:FP,WebGL3DRenderTarget:s4,WebGLArrayRenderTarget:r4,WebGLCubeRenderTarget:PP,WebGLMultipleRenderTargets:o4,WebGLMultisampleRenderTarget:Y6,WebGLRenderTarget:Cr,WebGLRenderer:vw,WebGLUtils:OP,WireframeGeometry:eR,WrapAroundEnding:ud,ZeroCurvatureEnding:Ga,ZeroFactor:LA,ZeroSlopeEnding:ja,ZeroStencilOp:xN,_SRGBAFormat:lg,sRGBEncoding:qt},Symbol.toStringTag,{value:"Module"}));var AR={exports:{}},El={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */El.ConcurrentRoot=1;El.ContinuousEventPriority=4;El.DefaultEventPriority=16;El.DiscreteEventPriority=1;El.IdleEventPriority=536870912;El.LegacyRoot=0;AR.exports=El;var Pc=AR.exports;function y8(n){let e;const t=new Set,i=(f,d)=>{const h=typeof f=="function"?f(e):f;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},r=()=>e,s=(f,d=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const g=d(e);if(!h(p,g)){const v=p;f(p=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(f,d,h)=>d||h?s(f,d,h):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,l),l}const v8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_2=v8?L.useEffect:L.useLayoutEffect;function x8(n){const e=typeof n=="function"?y8(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=L.useReducer(x=>x+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(i),f=L.useRef(r),d=L.useRef(!1),h=L.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||f.current!==r||d.current)&&(p=i(o),m=!r(h.current,p)),_2(()=>{m&&(h.current=p),a.current=o,l.current=i,f.current=r,d.current=!1});const g=L.useRef(o);_2(()=>{const x=()=>{try{const w=e.getState(),b=l.current(w);f.current(h.current,b)||(a.current=w,h.current=b,s())}catch{d.current=!0,s()}},_=e.subscribe(x);return e.getState()!==g.current&&x(),_},[]);const v=m?p:h.current;return L.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var PR={exports:{}},RR={exports:{}},LR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,Y){var Z=N.length;N.push(Y);e:for(;0<Z;){var j=Z-1>>>1,K=N[j];if(0<r(K,Y))N[j]=Y,N[Z]=K,Z=j;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var Y=N[0],Z=N.pop();if(Z!==Y){N[0]=Z;e:for(var j=0,K=N.length,ue=K>>>1;j<ue;){var ge=2*(j+1)-1,ve=N[ge],re=ge+1,ze=N[re];if(0>r(ve,Z))re<K&&0>r(ze,ve)?(N[j]=ze,N[re]=Z,j=re):(N[j]=ve,N[ge]=Z,j=ge);else if(re<K&&0>r(ze,Z))N[j]=ze,N[re]=Z,j=re;else break e}}return Y}function r(N,Y){var Z=N.sortIndex-Y.sortIndex;return Z!==0?Z:N.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],d=1,h=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var Y=t(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=N)i(f),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(f)}}function M(N){if(v=!1,b(N),!g)if(t(l)!==null)g=!0,ee(C);else{var Y=t(f);Y!==null&&oe(M,Y.startTime-N)}}function C(N,Y){g=!1,v&&(v=!1,_(T),T=-1),m=!0;var Z=p;try{for(b(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||N&&!O());){var j=h.callback;if(typeof j=="function"){h.callback=null,p=h.priorityLevel;var K=j(h.expirationTime<=Y);Y=n.unstable_now(),typeof K=="function"?h.callback=K:h===t(l)&&i(l),b(Y)}else i(l);h=t(l)}if(h!==null)var ue=!0;else{var ge=t(f);ge!==null&&oe(M,ge.startTime-Y),ue=!1}return ue}finally{h=null,p=Z,m=!1}}var A=!1,R=null,T=-1,D=5,k=-1;function O(){return!(n.unstable_now()-k<D)}function $(){if(R!==null){var N=n.unstable_now();k=N;var Y=!0;try{Y=R(!0,N)}finally{Y?W():(A=!1,R=null)}}else A=!1}var W;if(typeof w=="function")W=function(){w($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=$,W=function(){q.postMessage(null)}}else W=function(){x($,0)};function ee(N){R=N,A||(A=!0,W())}function oe(N,Y){T=x(function(){N(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,ee(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return N()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,Y){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Z=p;p=N;try{return Y()}finally{p=Z}},n.unstable_scheduleCallback=function(N,Y,Z){var j=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?j+Z:j):Z=j,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Z+K,N={id:d++,callback:Y,priorityLevel:N,startTime:Z,expirationTime:K,sortIndex:-1},Z>j?(N.sortIndex=Z,e(f,N),t(l)===null&&N===t(f)&&(v?(_(T),T=-1):v=!0,oe(M,Z-j))):(N.sortIndex=K,e(l,N),g||m||(g=!0,ee(C))),N},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(N){var Y=p;return function(){var Z=p;p=Y;try{return N.apply(this,arguments)}finally{p=Z}}}})(LR);RR.exports=LR;var I1=RR.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8=function(e){var t={},i=L,r=I1,s=Object.assign;function o(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),C=Symbol.iterator;function A(c){return c===null||typeof c!="object"?null:(c=C&&c[C]||c["@@iterator"],typeof c=="function"?c:null)}function R(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case d:return"Fragment";case f:return"Portal";case p:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case g:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case v:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case w:return u=c.displayName||null,u!==null?u:R(c.type)||"Memo";case b:u=c._payload,c=c._init;try{return R(c(u))}catch{}}return null}function T(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(u);case 8:return u===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function D(c){var u=c,y=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(y=u.return),c=u.return;while(c)}return u.tag===3?y:null}function k(c){if(D(c)!==c)throw Error(o(188))}function O(c){var u=c.alternate;if(!u){if(u=D(c),u===null)throw Error(o(188));return u!==c?null:c}for(var y=c,S=u;;){var E=y.return;if(E===null)break;var P=E.alternate;if(P===null){if(S=E.return,S!==null){y=S;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===y)return k(E),c;if(P===S)return k(E),u;P=P.sibling}throw Error(o(188))}if(y.return!==S.return)y=E,S=P;else{for(var B=!1,J=E.child;J;){if(J===y){B=!0,y=E,S=P;break}if(J===S){B=!0,S=E,y=P;break}J=J.sibling}if(!B){for(J=P.child;J;){if(J===y){B=!0,y=P,S=E;break}if(J===S){B=!0,S=P,y=E;break}J=J.sibling}if(!B)throw Error(o(189))}}if(y.alternate!==S)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:u}function $(c){return c=O(c),c!==null?W(c):null}function W(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=W(c);if(u!==null)return u;c=c.sibling}return null}function V(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var u=V(c);if(u!==null)return u}c=c.sibling}return null}var q=Array.isArray,ee=e.getPublicInstance,oe=e.getRootHostContext,N=e.getChildHostContext,Y=e.prepareForCommit,Z=e.resetAfterCommit,j=e.createInstance,K=e.appendInitialChild,ue=e.finalizeInitialChildren,ge=e.prepareUpdate,ve=e.shouldSetTextContent,re=e.createTextInstance,ze=e.scheduleTimeout,Ie=e.cancelTimeout,Xe=e.noTimeout,Ae=e.isPrimaryRenderer,Ye=e.supportsMutation,de=e.supportsPersistence,le=e.supportsHydration,Me=e.getInstanceFromNode,ke=e.preparePortalMount,Ce=e.getCurrentEventPriority,rt=e.detachDeletedInstance,qe=e.supportsMicrotasks,Ze=e.scheduleMicrotask,bt=e.supportsTestSelectors,ht=e.findFiberRoot,U=e.getBoundingRect,I=e.getTextContent,Q=e.isHiddenSubtree,xe=e.matchAccessibilityRole,Se=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,et=e.appendChild,Pe=e.appendChildToContainer,pe=e.commitTextUpdate,$e=e.commitMount,nt=e.commitUpdate,Be=e.insertBefore,Ke=e.insertInContainerBefore,He=e.removeChild,X=e.removeChildFromContainer,_e=e.resetTextContent,Fe=e.hideInstance,G=e.hideTextInstance,ae=e.unhideInstance,we=e.unhideTextInstance,Le=e.clearContainer,Je=e.cloneInstance,Mt=e.createContainerChildSet,Ft=e.appendChildToContainerChildSet,Wt=e.finalizeContainerChildren,pi=e.replaceContainerChildren,Lt=e.cloneHiddenInstance,zn=e.cloneHiddenTextInstance,Rn=e.canHydrateInstance,rh=e.canHydrateTextInstance,w0=e.canHydrateSuspenseInstance,sh=e.isSuspenseInstancePending,bu=e.isSuspenseInstanceFallback,F=e.registerSuspenseInstanceRetry,ie=e.getNextHydratableSibling,he=e.getFirstHydratableChild,ne=e.getFirstHydratableChildWithinContainer,me=e.getFirstHydratableChildWithinSuspenseInstance,it=e.hydrateInstance,ct=e.hydrateTextInstance,gt=e.hydrateSuspenseInstance,wt=e.getNextHydratableInstanceAfterSuspenseInstance,At=e.commitHydratedContainer,Et=e.commitHydratedSuspenseInstance,Tt=e.clearSuspenseBoundary,dn=e.clearSuspenseBoundaryFromContainer,mi=e.shouldDeleteUnhydratedTailInstances,Rr=e.didNotMatchHydratedContainerTextInstance,_s=e.didNotMatchHydratedTextInstance,en;function yt(c){if(en===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);en=u&&u[1]||""}return`
`+en+c}var ga=!1;function hn(c,u){if(!c||ga)return"";ga=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ee){var S=Ee}Reflect.construct(c,[],u)}else{try{u.call()}catch(Ee){S=Ee}c.call(u.prototype)}else{try{throw Error()}catch(Ee){S=Ee}c()}}catch(Ee){if(Ee&&S&&typeof Ee.stack=="string"){for(var E=Ee.stack.split(`
`),P=S.stack.split(`
`),B=E.length-1,J=P.length-1;1<=B&&0<=J&&E[B]!==P[J];)J--;for(;1<=B&&0<=J;B--,J--)if(E[B]!==P[J]){if(B!==1||J!==1)do if(B--,J--,0>J||E[B]!==P[J]){var fe=`
`+E[B].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=B&&0<=J);break}}}finally{ga=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?yt(c):""}var ws=Object.prototype.hasOwnProperty,Cl=[],sr=-1;function or(c){return{current:c}}function mt(c){0>sr||(c.current=Cl[sr],Cl[sr]=null,sr--)}function Rt(c,u){sr++,Cl[sr]=c.current,c.current=u}var ar={},Bt=or(ar),Fn=or(!1),Ss=ar;function bs(c,u){var y=c.type.contextTypes;if(!y)return ar;var S=c.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===u)return S.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in y)E[P]=u[P];return S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=E),E}function Ai(c){return c=c.childContextTypes,c!=null}function oh(){mt(Fn),mt(Bt)}function fS(c,u,y){if(Bt.current!==ar)throw Error(o(168));Rt(Bt,u),Rt(Fn,y)}function dS(c,u,y){var S=c.stateNode;if(u=u.childContextTypes,typeof S.getChildContext!="function")return y;S=S.getChildContext();for(var E in S)if(!(E in u))throw Error(o(108,T(c)||"Unknown",E));return s({},y,S)}function ah(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ar,Ss=Bt.current,Rt(Bt,c),Rt(Fn,Fn.current),!0}function hS(c,u,y){var S=c.stateNode;if(!S)throw Error(o(169));y?(c=dS(c,u,Ss),S.__reactInternalMemoizedMergedChildContext=c,mt(Fn),mt(Bt),Rt(Bt,c)):mt(Fn),Rt(Fn,y)}var Lr=Math.clz32?Math.clz32:qI,XI=Math.log,YI=Math.LN2;function qI(c){return c>>>=0,c===0?32:31-(XI(c)/YI|0)|0}var lh=64,ch=4194304;function Mu(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function uh(c,u){var y=c.pendingLanes;if(y===0)return 0;var S=0,E=c.suspendedLanes,P=c.pingedLanes,B=y&268435455;if(B!==0){var J=B&~E;J!==0?S=Mu(J):(P&=B,P!==0&&(S=Mu(P)))}else B=y&~E,B!==0?S=Mu(B):P!==0&&(S=Mu(P));if(S===0)return 0;if(u!==0&&u!==S&&!(u&E)&&(E=S&-S,P=u&-u,E>=P||E===16&&(P&4194240)!==0))return u;if(S&4&&(S|=y&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=S;0<u;)y=31-Lr(u),E=1<<y,S|=c[y],u&=~E;return S}function ZI(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KI(c,u){for(var y=c.suspendedLanes,S=c.pingedLanes,E=c.expirationTimes,P=c.pendingLanes;0<P;){var B=31-Lr(P),J=1<<B,fe=E[B];fe===-1?(!(J&y)||J&S)&&(E[B]=ZI(J,u)):fe<=u&&(c.expiredLanes|=J),P&=~J}}function S0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function b0(c){for(var u=[],y=0;31>y;y++)u.push(c);return u}function Eu(c,u,y){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-Lr(u),c[u]=y}function JI(c,u){var y=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var S=c.eventTimes;for(c=c.expirationTimes;0<y;){var E=31-Lr(y),P=1<<E;u[E]=0,S[E]=-1,c[E]=-1,y&=~P}}function M0(c,u){var y=c.entangledLanes|=u;for(c=c.entanglements;y;){var S=31-Lr(y),E=1<<S;E&u|c[S]&u&&(c[S]|=u),y&=~E}}var Dt=0;function pS(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var E0=r.unstable_scheduleCallback,mS=r.unstable_cancelCallback,QI=r.unstable_shouldYield,ek=r.unstable_requestPaint,Bn=r.unstable_now,T0=r.unstable_ImmediatePriority,tk=r.unstable_UserBlockingPriority,C0=r.unstable_NormalPriority,nk=r.unstable_IdlePriority,fh=null,Jr=null;function ik(c){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(fh,c,void 0,(c.current.flags&128)===128)}catch{}}function rk(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var Qr=typeof Object.is=="function"?Object.is:rk,Ms=null,dh=!1,A0=!1;function gS(c){Ms===null?Ms=[c]:Ms.push(c)}function sk(c){dh=!0,gS(c)}function es(){if(!A0&&Ms!==null){A0=!0;var c=0,u=Dt;try{var y=Ms;for(Dt=1;c<y.length;c++){var S=y[c];do S=S(!0);while(S!==null)}Ms=null,dh=!1}catch(E){throw Ms!==null&&(Ms=Ms.slice(c+1)),E0(T0,es),E}finally{Dt=u,A0=!1}}return null}var ok=a.ReactCurrentBatchConfig;function hh(c,u){if(Qr(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var y=Object.keys(c),S=Object.keys(u);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var E=y[S];if(!ws.call(u,E)||!Qr(c[E],u[E]))return!1}return!0}function ak(c){switch(c.tag){case 5:return yt(c.type);case 16:return yt("Lazy");case 13:return yt("Suspense");case 19:return yt("SuspenseList");case 0:case 2:case 15:return c=hn(c.type,!1),c;case 11:return c=hn(c.type.render,!1),c;case 1:return c=hn(c.type,!0),c;default:return""}}function Ir(c,u){if(c&&c.defaultProps){u=s({},u),c=c.defaultProps;for(var y in c)u[y]===void 0&&(u[y]=c[y]);return u}return u}var ph=or(null),mh=null,Al=null,P0=null;function R0(){P0=Al=mh=null}function yS(c,u,y){Ae?(Rt(ph,u._currentValue),u._currentValue=y):(Rt(ph,u._currentValue2),u._currentValue2=y)}function L0(c){var u=ph.current;mt(ph),Ae?c._currentValue=u:c._currentValue2=u}function I0(c,u,y){for(;c!==null;){var S=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),c===y)break;c=c.return}}function Pl(c,u){mh=c,P0=Al=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&u&&(Wi=!0),c.firstContext=null)}function lr(c){var u=Ae?c._currentValue:c._currentValue2;if(P0!==c)if(c={context:c,memoizedValue:u,next:null},Al===null){if(mh===null)throw Error(o(308));Al=c,mh.dependencies={lanes:0,firstContext:c}}else Al=Al.next=c;return u}var ts=null,mo=!1;function k0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Es(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function go(c,u){var y=c.updateQueue;y!==null&&(y=y.shared,Tn!==null&&c.mode&1&&!(St&2)?(c=y.interleaved,c===null?(u.next=u,ts===null?ts=[y]:ts.push(y)):(u.next=c.next,c.next=u),y.interleaved=u):(c=y.pending,c===null?u.next=u:(u.next=c.next,c.next=u),y.pending=u))}function gh(c,u,y){if(u=u.updateQueue,u!==null&&(u=u.shared,(y&4194240)!==0)){var S=u.lanes;S&=c.pendingLanes,y|=S,u.lanes=y,M0(c,y)}}function xS(c,u){var y=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var E=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var B={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};P===null?E=P=B:P=P.next=B,y=y.next}while(y!==null);P===null?E=P=u:P=P.next=u}else E=P=u;y={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:S.shared,effects:S.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=u:c.next=u,y.lastBaseUpdate=u}function yh(c,u,y,S){var E=c.updateQueue;mo=!1;var P=E.firstBaseUpdate,B=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var fe=J,Ee=fe.next;fe.next=null,B===null?P=Ee:B.next=Ee,B=fe;var Ve=c.alternate;Ve!==null&&(Ve=Ve.updateQueue,J=Ve.lastBaseUpdate,J!==B&&(J===null?Ve.firstBaseUpdate=Ee:J.next=Ee,Ve.lastBaseUpdate=fe))}if(P!==null){var ft=E.baseState;B=0,Ve=Ee=fe=null,J=P;do{var st=J.lane,Gt=J.eventTime;if((S&st)===st){Ve!==null&&(Ve=Ve.next={eventTime:Gt,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var tt=c,ni=J;switch(st=u,Gt=y,ni.tag){case 1:if(tt=ni.payload,typeof tt=="function"){ft=tt.call(Gt,ft,st);break e}ft=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=ni.payload,st=typeof tt=="function"?tt.call(Gt,ft,st):tt,st==null)break e;ft=s({},ft,st);break e;case 2:mo=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,st=E.effects,st===null?E.effects=[J]:st.push(J))}else Gt={eventTime:Gt,lane:st,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ve===null?(Ee=Ve=Gt,fe=ft):Ve=Ve.next=Gt,B|=st;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;st=J,J=st.next,st.next=null,E.lastBaseUpdate=st,E.shared.pending=null}}while(1);if(Ve===null&&(fe=ft),E.baseState=fe,E.firstBaseUpdate=Ee,E.lastBaseUpdate=Ve,u=E.shared.interleaved,u!==null){E=u;do B|=E.lane,E=E.next;while(E!==u)}else P===null&&(E.shared.lanes=0);Fl|=B,c.lanes=B,c.memoizedState=ft}}function _S(c,u,y){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var S=c[u],E=S.callback;if(E!==null){if(S.callback=null,S=y,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var wS=new i.Component().refs;function D0(c,u,y,S){u=c.memoizedState,y=y(S,u),y=y==null?u:s({},u,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var vh={isMounted:function(c){return(c=c._reactInternals)?D(c)===c:!1},enqueueSetState:function(c,u,y){c=c._reactInternals;var S=yi(),E=xo(c),P=Es(S,E);P.payload=u,y!=null&&(P.callback=y),go(c,P),u=hr(c,E,S),u!==null&&gh(u,c,E)},enqueueReplaceState:function(c,u,y){c=c._reactInternals;var S=yi(),E=xo(c),P=Es(S,E);P.tag=1,P.payload=u,y!=null&&(P.callback=y),go(c,P),u=hr(c,E,S),u!==null&&gh(u,c,E)},enqueueForceUpdate:function(c,u){c=c._reactInternals;var y=yi(),S=xo(c),E=Es(y,S);E.tag=2,u!=null&&(E.callback=u),go(c,E),u=hr(c,S,y),u!==null&&gh(u,c,S)}};function SS(c,u,y,S,E,P,B){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,P,B):u.prototype&&u.prototype.isPureReactComponent?!hh(y,S)||!hh(E,P):!0}function bS(c,u,y){var S=!1,E=ar,P=u.contextType;return typeof P=="object"&&P!==null?P=lr(P):(E=Ai(u)?Ss:Bt.current,S=u.contextTypes,P=(S=S!=null)?bs(c,E):ar),u=new u(y,P),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=vh,c.stateNode=u,u._reactInternals=c,S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=P),u}function MS(c,u,y,S){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,S),u.state!==c&&vh.enqueueReplaceState(u,u.state,null)}function O0(c,u,y,S){var E=c.stateNode;E.props=y,E.state=c.memoizedState,E.refs=wS,k0(c);var P=u.contextType;typeof P=="object"&&P!==null?E.context=lr(P):(P=Ai(u)?Ss:Bt.current,E.context=bs(c,P)),E.state=c.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(D0(c,u,P,y),E.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(u=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),u!==E.state&&vh.enqueueReplaceState(E,E.state,null),yh(c,y,E,S),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}var Rl=[],Ll=0,xh=null,_h=0,cr=[],ur=0,ya=null,Ts=1,Cs="";function va(c,u){Rl[Ll++]=_h,Rl[Ll++]=xh,xh=c,_h=u}function ES(c,u,y){cr[ur++]=Ts,cr[ur++]=Cs,cr[ur++]=ya,ya=c;var S=Ts;c=Cs;var E=32-Lr(S)-1;S&=~(1<<E),y+=1;var P=32-Lr(u)+E;if(30<P){var B=E-E%5;P=(S&(1<<B)-1).toString(32),S>>=B,E-=B,Ts=1<<32-Lr(u)+E|y<<E|S,Cs=P+c}else Ts=1<<P|y<<E|S,Cs=c}function N0(c){c.return!==null&&(va(c,1),ES(c,1,0))}function z0(c){for(;c===xh;)xh=Rl[--Ll],Rl[Ll]=null,_h=Rl[--Ll],Rl[Ll]=null;for(;c===ya;)ya=cr[--ur],cr[ur]=null,Cs=cr[--ur],cr[ur]=null,Ts=cr[--ur],cr[ur]=null}var Ui=null,Vi=null,tn=!1,Tu=!1,kr=null;function TS(c,u){var y=pr(5,null,null,0);y.elementType="DELETED",y.stateNode=u,y.return=c,u=c.deletions,u===null?(c.deletions=[y],c.flags|=16):u.push(y)}function CS(c,u){switch(c.tag){case 5:return u=Rn(u,c.type,c.pendingProps),u!==null?(c.stateNode=u,Ui=c,Vi=he(u),!0):!1;case 6:return u=rh(u,c.pendingProps),u!==null?(c.stateNode=u,Ui=c,Vi=null,!0):!1;case 13:if(u=w0(u),u!==null){var y=ya!==null?{id:Ts,overflow:Cs}:null;return c.memoizedState={dehydrated:u,treeContext:y,retryLane:1073741824},y=pr(18,null,null,0),y.stateNode=u,y.return=c,c.child=y,Ui=c,Vi=null,!0}return!1;default:return!1}}function F0(c){return(c.mode&1)!==0&&(c.flags&128)===0}function B0(c){if(tn){var u=Vi;if(u){var y=u;if(!CS(c,u)){if(F0(c))throw Error(o(418));u=ie(y);var S=Ui;u&&CS(c,u)?TS(S,y):(c.flags=c.flags&-4097|2,tn=!1,Ui=c)}}else{if(F0(c))throw Error(o(418));c.flags=c.flags&-4097|2,tn=!1,Ui=c}}}function AS(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ui=c}function Cu(c){if(!le||c!==Ui)return!1;if(!tn)return AS(c),tn=!0,!1;if(c.tag!==3&&(c.tag!==5||mi(c.type)&&!ve(c.type,c.memoizedProps))){var u=Vi;if(u){if(F0(c)){for(c=Vi;c;)c=ie(c);throw Error(o(418))}for(;u;)TS(c,u),u=ie(u)}}if(AS(c),c.tag===13){if(!le)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Vi=wt(c)}else Vi=Ui?ie(c.stateNode):null;return!0}function Il(){le&&(Vi=Ui=null,Tu=tn=!1)}function U0(c){kr===null?kr=[c]:kr.push(c)}function Au(c,u,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var S=y.stateNode}if(!S)throw Error(o(147,c));var E=S,P=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===P?u.ref:(u=function(B){var J=E.refs;J===wS&&(J=E.refs={}),B===null?delete J[P]:J[P]=B},u._stringRef=P,u)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function wh(c,u){throw c=Object.prototype.toString.call(u),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function PS(c){var u=c._init;return u(c._payload)}function RS(c){function u(se,te){if(c){var ce=se.deletions;ce===null?(se.deletions=[te],se.flags|=16):ce.push(te)}}function y(se,te){if(!c)return null;for(;te!==null;)u(se,te),te=te.sibling;return null}function S(se,te){for(se=new Map;te!==null;)te.key!==null?se.set(te.key,te):se.set(te.index,te),te=te.sibling;return se}function E(se,te){return se=wo(se,te),se.index=0,se.sibling=null,se}function P(se,te,ce){return se.index=ce,c?(ce=se.alternate,ce!==null?(ce=ce.index,ce<te?(se.flags|=2,te):ce):(se.flags|=2,te)):(se.flags|=1048576,te)}function B(se){return c&&se.alternate===null&&(se.flags|=2),se}function J(se,te,ce,Ne){return te===null||te.tag!==6?(te=by(ce,se.mode,Ne),te.return=se,te):(te=E(te,ce),te.return=se,te)}function fe(se,te,ce,Ne){var Qe=ce.type;return Qe===d?Ve(se,te,ce.props.children,Ne,ce.key):te!==null&&(te.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===b&&PS(Qe)===te.type)?(Ne=E(te,ce.props),Ne.ref=Au(se,te,ce),Ne.return=se,Ne):(Ne=Jh(ce.type,ce.key,ce.props,null,se.mode,Ne),Ne.ref=Au(se,te,ce),Ne.return=se,Ne)}function Ee(se,te,ce,Ne){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=My(ce,se.mode,Ne),te.return=se,te):(te=E(te,ce.children||[]),te.return=se,te)}function Ve(se,te,ce,Ne,Qe){return te===null||te.tag!==7?(te=Ea(ce,se.mode,Ne,Qe),te.return=se,te):(te=E(te,ce),te.return=se,te)}function ft(se,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number")return te=by(""+te,se.mode,ce),te.return=se,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return ce=Jh(te.type,te.key,te.props,null,se.mode,ce),ce.ref=Au(se,null,te),ce.return=se,ce;case f:return te=My(te,se.mode,ce),te.return=se,te;case b:var Ne=te._init;return ft(se,Ne(te._payload),ce)}if(q(te)||A(te))return te=Ea(te,se.mode,ce,null),te.return=se,te;wh(se,te)}return null}function st(se,te,ce,Ne){var Qe=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Qe!==null?null:J(se,te,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===Qe?fe(se,te,ce,Ne):null;case f:return ce.key===Qe?Ee(se,te,ce,Ne):null;case b:return Qe=ce._init,st(se,te,Qe(ce._payload),Ne)}if(q(ce)||A(ce))return Qe!==null?null:Ve(se,te,ce,Ne,null);wh(se,ce)}return null}function Gt(se,te,ce,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return se=se.get(ce)||null,J(te,se,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case l:return se=se.get(Ne.key===null?ce:Ne.key)||null,fe(te,se,Ne,Qe);case f:return se=se.get(Ne.key===null?ce:Ne.key)||null,Ee(te,se,Ne,Qe);case b:var vt=Ne._init;return Gt(se,te,ce,vt(Ne._payload),Qe)}if(q(Ne)||A(Ne))return se=se.get(ce)||null,Ve(te,se,Ne,Qe,null);wh(te,Ne)}return null}function tt(se,te,ce,Ne){for(var Qe=null,vt=null,dt=te,Ot=te=0,Vn=null;dt!==null&&Ot<ce.length;Ot++){dt.index>Ot?(Vn=dt,dt=null):Vn=dt.sibling;var Nt=st(se,dt,ce[Ot],Ne);if(Nt===null){dt===null&&(dt=Vn);break}c&&dt&&Nt.alternate===null&&u(se,dt),te=P(Nt,te,Ot),vt===null?Qe=Nt:vt.sibling=Nt,vt=Nt,dt=Vn}if(Ot===ce.length)return y(se,dt),tn&&va(se,Ot),Qe;if(dt===null){for(;Ot<ce.length;Ot++)dt=ft(se,ce[Ot],Ne),dt!==null&&(te=P(dt,te,Ot),vt===null?Qe=dt:vt.sibling=dt,vt=dt);return tn&&va(se,Ot),Qe}for(dt=S(se,dt);Ot<ce.length;Ot++)Vn=Gt(dt,se,Ot,ce[Ot],Ne),Vn!==null&&(c&&Vn.alternate!==null&&dt.delete(Vn.key===null?Ot:Vn.key),te=P(Vn,te,Ot),vt===null?Qe=Vn:vt.sibling=Vn,vt=Vn);return c&&dt.forEach(function(So){return u(se,So)}),tn&&va(se,Ot),Qe}function ni(se,te,ce,Ne){var Qe=A(ce);if(typeof Qe!="function")throw Error(o(150));if(ce=Qe.call(ce),ce==null)throw Error(o(151));for(var vt=Qe=null,dt=te,Ot=te=0,Vn=null,Nt=ce.next();dt!==null&&!Nt.done;Ot++,Nt=ce.next()){dt.index>Ot?(Vn=dt,dt=null):Vn=dt.sibling;var So=st(se,dt,Nt.value,Ne);if(So===null){dt===null&&(dt=Vn);break}c&&dt&&So.alternate===null&&u(se,dt),te=P(So,te,Ot),vt===null?Qe=So:vt.sibling=So,vt=So,dt=Vn}if(Nt.done)return y(se,dt),tn&&va(se,Ot),Qe;if(dt===null){for(;!Nt.done;Ot++,Nt=ce.next())Nt=ft(se,Nt.value,Ne),Nt!==null&&(te=P(Nt,te,Ot),vt===null?Qe=Nt:vt.sibling=Nt,vt=Nt);return tn&&va(se,Ot),Qe}for(dt=S(se,dt);!Nt.done;Ot++,Nt=ce.next())Nt=Gt(dt,se,Ot,Nt.value,Ne),Nt!==null&&(c&&Nt.alternate!==null&&dt.delete(Nt.key===null?Ot:Nt.key),te=P(Nt,te,Ot),vt===null?Qe=Nt:vt.sibling=Nt,vt=Nt);return c&&dt.forEach(function(zk){return u(se,zk)}),tn&&va(se,Ot),Qe}function mr(se,te,ce,Ne){if(typeof ce=="object"&&ce!==null&&ce.type===d&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var Qe=ce.key,vt=te;vt!==null;){if(vt.key===Qe){if(Qe=ce.type,Qe===d){if(vt.tag===7){y(se,vt.sibling),te=E(vt,ce.props.children),te.return=se,se=te;break e}}else if(vt.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===b&&PS(Qe)===vt.type){y(se,vt.sibling),te=E(vt,ce.props),te.ref=Au(se,vt,ce),te.return=se,se=te;break e}y(se,vt);break}else u(se,vt);vt=vt.sibling}ce.type===d?(te=Ea(ce.props.children,se.mode,Ne,ce.key),te.return=se,se=te):(Ne=Jh(ce.type,ce.key,ce.props,null,se.mode,Ne),Ne.ref=Au(se,te,ce),Ne.return=se,se=Ne)}return B(se);case f:e:{for(vt=ce.key;te!==null;){if(te.key===vt)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){y(se,te.sibling),te=E(te,ce.children||[]),te.return=se,se=te;break e}else{y(se,te);break}else u(se,te);te=te.sibling}te=My(ce,se.mode,Ne),te.return=se,se=te}return B(se);case b:return vt=ce._init,mr(se,te,vt(ce._payload),Ne)}if(q(ce))return tt(se,te,ce,Ne);if(A(ce))return ni(se,te,ce,Ne);wh(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,te!==null&&te.tag===6?(y(se,te.sibling),te=E(te,ce),te.return=se,se=te):(y(se,te),te=by(ce,se.mode,Ne),te.return=se,se=te),B(se)):y(se,te)}return mr}var kl=RS(!0),LS=RS(!1),Pu={},fr=or(Pu),Ru=or(Pu),Dl=or(Pu);function ns(c){if(c===Pu)throw Error(o(174));return c}function V0(c,u){Rt(Dl,u),Rt(Ru,c),Rt(fr,Pu),c=oe(u),mt(fr),Rt(fr,c)}function Ol(){mt(fr),mt(Ru),mt(Dl)}function IS(c){var u=ns(Dl.current),y=ns(fr.current);u=N(y,c.type,u),y!==u&&(Rt(Ru,c),Rt(fr,u))}function W0(c){Ru.current===c&&(mt(fr),mt(Ru))}var rn=or(0);function Sh(c){for(var u=c;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||sh(y)||bu(y)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var H0=[];function $0(){for(var c=0;c<H0.length;c++){var u=H0[c];Ae?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}H0.length=0}var bh=a.ReactCurrentDispatcher,dr=a.ReactCurrentBatchConfig,Nl=0,pn=null,Qn=null,Un=null,Mh=!1,Lu=!1,Iu=0,lk=0;function ei(){throw Error(o(321))}function G0(c,u){if(u===null)return!1;for(var y=0;y<u.length&&y<c.length;y++)if(!Qr(c[y],u[y]))return!1;return!0}function j0(c,u,y,S,E,P){if(Nl=P,pn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,bh.current=c===null||c.memoizedState===null?dk:hk,c=y(S,E),Lu){P=0;do{if(Lu=!1,Iu=0,25<=P)throw Error(o(301));P+=1,Un=Qn=null,u.updateQueue=null,bh.current=pk,c=y(S,E)}while(Lu)}if(bh.current=Ph,u=Qn!==null&&Qn.next!==null,Nl=0,Un=Qn=pn=null,Mh=!1,u)throw Error(o(300));return c}function X0(){var c=Iu!==0;return Iu=0,c}function As(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?pn.memoizedState=Un=c:Un=Un.next=c,Un}function is(){if(Qn===null){var c=pn.alternate;c=c!==null?c.memoizedState:null}else c=Qn.next;var u=Un===null?pn.memoizedState:Un.next;if(u!==null)Un=u,Qn=c;else{if(c===null)throw Error(o(310));Qn=c,c={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},Un===null?pn.memoizedState=Un=c:Un=Un.next=c}return Un}function xa(c,u){return typeof u=="function"?u(c):u}function Eh(c){var u=is(),y=u.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var S=Qn,E=S.baseQueue,P=y.pending;if(P!==null){if(E!==null){var B=E.next;E.next=P.next,P.next=B}S.baseQueue=E=P,y.pending=null}if(E!==null){P=E.next,S=S.baseState;var J=B=null,fe=null,Ee=P;do{var Ve=Ee.lane;if((Nl&Ve)===Ve)fe!==null&&(fe=fe.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),S=Ee.hasEagerState?Ee.eagerState:c(S,Ee.action);else{var ft={lane:Ve,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};fe===null?(J=fe=ft,B=S):fe=fe.next=ft,pn.lanes|=Ve,Fl|=Ve}Ee=Ee.next}while(Ee!==null&&Ee!==P);fe===null?B=S:fe.next=J,Qr(S,u.memoizedState)||(Wi=!0),u.memoizedState=S,u.baseState=B,u.baseQueue=fe,y.lastRenderedState=S}if(c=y.interleaved,c!==null){E=c;do P=E.lane,pn.lanes|=P,Fl|=P,E=E.next;while(E!==c)}else E===null&&(y.lanes=0);return[u.memoizedState,y.dispatch]}function Th(c){var u=is(),y=u.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var S=y.dispatch,E=y.pending,P=u.memoizedState;if(E!==null){y.pending=null;var B=E=E.next;do P=c(P,B.action),B=B.next;while(B!==E);Qr(P,u.memoizedState)||(Wi=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),y.lastRenderedState=P}return[P,S]}function kS(){}function DS(c,u){var y=pn,S=is(),E=u(),P=!Qr(S.memoizedState,E);if(P&&(S.memoizedState=E,Wi=!0),S=S.queue,Du(zS.bind(null,y,S,c),[c]),S.getSnapshot!==u||P||Un!==null&&Un.memoizedState.tag&1){if(y.flags|=2048,ku(9,NS.bind(null,y,S,E,u),void 0,null),Tn===null)throw Error(o(349));Nl&30||OS(y,u,E)}return E}function OS(c,u,y){c.flags|=16384,c={getSnapshot:u,value:y},u=pn.updateQueue,u===null?(u={lastEffect:null,stores:null},pn.updateQueue=u,u.stores=[c]):(y=u.stores,y===null?u.stores=[c]:y.push(c))}function NS(c,u,y,S){u.value=y,u.getSnapshot=S,FS(u)&&hr(c,1,-1)}function zS(c,u,y){return y(function(){FS(u)&&hr(c,1,-1)})}function FS(c){var u=c.getSnapshot;c=c.value;try{var y=u();return!Qr(c,y)}catch{return!0}}function Y0(c){var u=As();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:c},u.queue=c,c=c.dispatch=fk.bind(null,pn,c),[u.memoizedState,c]}function ku(c,u,y,S){return c={tag:c,create:u,destroy:y,deps:S,next:null},u=pn.updateQueue,u===null?(u={lastEffect:null,stores:null},pn.updateQueue=u,u.lastEffect=c.next=c):(y=u.lastEffect,y===null?u.lastEffect=c.next=c:(S=y.next,y.next=c,c.next=S,u.lastEffect=c)),c}function BS(){return is().memoizedState}function Ch(c,u,y,S){var E=As();pn.flags|=c,E.memoizedState=ku(1|u,y,void 0,S===void 0?null:S)}function Ah(c,u,y,S){var E=is();S=S===void 0?null:S;var P=void 0;if(Qn!==null){var B=Qn.memoizedState;if(P=B.destroy,S!==null&&G0(S,B.deps)){E.memoizedState=ku(u,y,P,S);return}}pn.flags|=c,E.memoizedState=ku(1|u,y,P,S)}function q0(c,u){return Ch(8390656,8,c,u)}function Du(c,u){return Ah(2048,8,c,u)}function US(c,u){return Ah(4,2,c,u)}function VS(c,u){return Ah(4,4,c,u)}function WS(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function HS(c,u,y){return y=y!=null?y.concat([c]):null,Ah(4,4,WS.bind(null,u,c),y)}function Z0(){}function $S(c,u){var y=is();u=u===void 0?null:u;var S=y.memoizedState;return S!==null&&u!==null&&G0(u,S[1])?S[0]:(y.memoizedState=[c,u],c)}function GS(c,u){var y=is();u=u===void 0?null:u;var S=y.memoizedState;return S!==null&&u!==null&&G0(u,S[1])?S[0]:(c=c(),y.memoizedState=[c,u],c)}function ck(c,u){var y=Dt;Dt=y!==0&&4>y?y:4,c(!0);var S=dr.transition;dr.transition={};try{c(!1),u()}finally{Dt=y,dr.transition=S}}function jS(){return is().memoizedState}function uk(c,u,y){var S=xo(c);y={lane:S,action:y,hasEagerState:!1,eagerState:null,next:null},XS(c)?YS(u,y):(qS(c,u,y),y=yi(),c=hr(c,S,y),c!==null&&ZS(c,u,S))}function fk(c,u,y){var S=xo(c),E={lane:S,action:y,hasEagerState:!1,eagerState:null,next:null};if(XS(c))YS(u,E);else{qS(c,u,E);var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var B=u.lastRenderedState,J=P(B,y);if(E.hasEagerState=!0,E.eagerState=J,Qr(J,B))return}catch{}finally{}y=yi(),c=hr(c,S,y),c!==null&&ZS(c,u,S)}}function XS(c){var u=c.alternate;return c===pn||u!==null&&u===pn}function YS(c,u){Lu=Mh=!0;var y=c.pending;y===null?u.next=u:(u.next=y.next,y.next=u),c.pending=u}function qS(c,u,y){Tn!==null&&c.mode&1&&!(St&2)?(c=u.interleaved,c===null?(y.next=y,ts===null?ts=[u]:ts.push(u)):(y.next=c.next,c.next=y),u.interleaved=y):(c=u.pending,c===null?y.next=y:(y.next=c.next,c.next=y),u.pending=y)}function ZS(c,u,y){if(y&4194240){var S=u.lanes;S&=c.pendingLanes,y|=S,u.lanes=y,M0(c,y)}}var Ph={readContext:lr,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useInsertionEffect:ei,useLayoutEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useMutableSource:ei,useSyncExternalStore:ei,useId:ei,unstable_isNewReconciler:!1},dk={readContext:lr,useCallback:function(c,u){return As().memoizedState=[c,u===void 0?null:u],c},useContext:lr,useEffect:q0,useImperativeHandle:function(c,u,y){return y=y!=null?y.concat([c]):null,Ch(4194308,4,WS.bind(null,u,c),y)},useLayoutEffect:function(c,u){return Ch(4194308,4,c,u)},useInsertionEffect:function(c,u){return Ch(4,2,c,u)},useMemo:function(c,u){var y=As();return u=u===void 0?null:u,c=c(),y.memoizedState=[c,u],c},useReducer:function(c,u,y){var S=As();return u=y!==void 0?y(u):u,S.memoizedState=S.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},S.queue=c,c=c.dispatch=uk.bind(null,pn,c),[S.memoizedState,c]},useRef:function(c){var u=As();return c={current:c},u.memoizedState=c},useState:Y0,useDebugValue:Z0,useDeferredValue:function(c){var u=Y0(c),y=u[0],S=u[1];return q0(function(){var E=dr.transition;dr.transition={};try{S(c)}finally{dr.transition=E}},[c]),y},useTransition:function(){var c=Y0(!1),u=c[0];return c=ck.bind(null,c[1]),As().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,y){var S=pn,E=As();if(tn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=u(),Tn===null)throw Error(o(349));Nl&30||OS(S,u,y)}E.memoizedState=y;var P={value:y,getSnapshot:u};return E.queue=P,q0(zS.bind(null,S,P,c),[c]),S.flags|=2048,ku(9,NS.bind(null,S,P,y,u),void 0,null),y},useId:function(){var c=As(),u=Tn.identifierPrefix;if(tn){var y=Cs,S=Ts;y=(S&~(1<<32-Lr(S)-1)).toString(32)+y,u=":"+u+"R"+y,y=Iu++,0<y&&(u+="H"+y.toString(32)),u+=":"}else y=lk++,u=":"+u+"r"+y.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},hk={readContext:lr,useCallback:$S,useContext:lr,useEffect:Du,useImperativeHandle:HS,useInsertionEffect:US,useLayoutEffect:VS,useMemo:GS,useReducer:Eh,useRef:BS,useState:function(){return Eh(xa)},useDebugValue:Z0,useDeferredValue:function(c){var u=Eh(xa),y=u[0],S=u[1];return Du(function(){var E=dr.transition;dr.transition={};try{S(c)}finally{dr.transition=E}},[c]),y},useTransition:function(){var c=Eh(xa)[0],u=is().memoizedState;return[c,u]},useMutableSource:kS,useSyncExternalStore:DS,useId:jS,unstable_isNewReconciler:!1},pk={readContext:lr,useCallback:$S,useContext:lr,useEffect:Du,useImperativeHandle:HS,useInsertionEffect:US,useLayoutEffect:VS,useMemo:GS,useReducer:Th,useRef:BS,useState:function(){return Th(xa)},useDebugValue:Z0,useDeferredValue:function(c){var u=Th(xa),y=u[0],S=u[1];return Du(function(){var E=dr.transition;dr.transition={};try{S(c)}finally{dr.transition=E}},[c]),y},useTransition:function(){var c=Th(xa)[0],u=is().memoizedState;return[c,u]},useMutableSource:kS,useSyncExternalStore:DS,useId:jS,unstable_isNewReconciler:!1};function K0(c,u){try{var y="",S=u;do y+=ak(S),S=S.return;while(S);var E=y}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:c,source:u,stack:E}}function J0(c,u){try{console.error(u.value)}catch(y){setTimeout(function(){throw y})}}var mk=typeof WeakMap=="function"?WeakMap:Map;function KS(c,u,y){y=Es(-1,y),y.tag=3,y.payload={element:null};var S=u.value;return y.callback=function(){Gh||(Gh=!0,gy=S),J0(c,u)},y}function JS(c,u,y){y=Es(-1,y),y.tag=3;var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var E=u.value;y.payload=function(){return S(E)},y.callback=function(){J0(c,u)}}var P=c.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(y.callback=function(){J0(c,u),typeof S!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),y}function QS(c,u,y){var S=c.pingCache;if(S===null){S=c.pingCache=new mk;var E=new Set;S.set(u,E)}else E=S.get(u),E===void 0&&(E=new Set,S.set(u,E));E.has(y)||(E.add(y),c=Pk.bind(null,c,u,y),u.then(c,c))}function eb(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function tb(c,u,y,S,E){return c.mode&1?(c.flags|=65536,c.lanes=E,c):(c===u?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(u=Es(-1,1),u.tag=2,go(y,u))),y.lanes|=1),c)}function rs(c){c.flags|=4}function nb(c,u){if(c!==null&&c.child===u.child)return!0;if(u.flags&16)return!1;for(c=u.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Ou,Nu,Rh,Lh;if(Ye)Ou=function(c,u){for(var y=u.child;y!==null;){if(y.tag===5||y.tag===6)K(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Nu=function(){},Rh=function(c,u,y,S,E){if(c=c.memoizedProps,c!==S){var P=u.stateNode,B=ns(fr.current);y=ge(P,y,c,S,E,B),(u.updateQueue=y)&&rs(u)}},Lh=function(c,u,y,S){y!==S&&rs(u)};else if(de){Ou=function(c,u,y,S){for(var E=u.child;E!==null;){if(E.tag===5){var P=E.stateNode;y&&S&&(P=Lt(P,E.type,E.memoizedProps,E)),K(c,P)}else if(E.tag===6)P=E.stateNode,y&&S&&(P=zn(P,E.memoizedProps,E)),K(c,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),Ou(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ib=function(c,u,y,S){for(var E=u.child;E!==null;){if(E.tag===5){var P=E.stateNode;y&&S&&(P=Lt(P,E.type,E.memoizedProps,E)),Ft(c,P)}else if(E.tag===6)P=E.stateNode,y&&S&&(P=zn(P,E.memoizedProps,E)),Ft(c,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),ib(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Nu=function(c,u){var y=u.stateNode;if(!nb(c,u)){c=y.containerInfo;var S=Mt(c);ib(S,u,!1,!1),y.pendingChildren=S,rs(u),Wt(c,S)}},Rh=function(c,u,y,S,E){var P=c.stateNode,B=c.memoizedProps;if((c=nb(c,u))&&B===S)u.stateNode=P;else{var J=u.stateNode,fe=ns(fr.current),Ee=null;B!==S&&(Ee=ge(J,y,B,S,E,fe)),c&&Ee===null?u.stateNode=P:(P=Je(P,Ee,y,B,S,u,c,J),ue(P,y,S,E,fe)&&rs(u),u.stateNode=P,c?rs(u):Ou(P,u,!1,!1))}},Lh=function(c,u,y,S){y!==S?(c=ns(Dl.current),y=ns(fr.current),u.stateNode=re(S,c,y,u),rs(u)):u.stateNode=c.stateNode}}else Nu=function(){},Rh=function(){},Lh=function(){};function zu(c,u){if(!tn)switch(c.tailMode){case"hidden":u=c.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function ti(c){var u=c.alternate!==null&&c.alternate.child===c.child,y=0,S=0;if(u)for(var E=c.child;E!==null;)y|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)y|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=S,c.childLanes=y,u}function gk(c,u,y){var S=u.pendingProps;switch(z0(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(u),null;case 1:return Ai(u.type)&&oh(),ti(u),null;case 3:return S=u.stateNode,Ol(),mt(Fn),mt(Bt),$0(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(c===null||c.child===null)&&(Cu(u)?rs(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,kr!==null&&(xy(kr),kr=null))),Nu(c,u),ti(u),null;case 5:W0(u),y=ns(Dl.current);var E=u.type;if(c!==null&&u.stateNode!=null)Rh(c,u,E,S,y),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!S){if(u.stateNode===null)throw Error(o(166));return ti(u),null}if(c=ns(fr.current),Cu(u)){if(!le)throw Error(o(175));c=it(u.stateNode,u.type,u.memoizedProps,y,c,u,!Tu),u.updateQueue=c,c!==null&&rs(u)}else{var P=j(E,S,y,c,u);Ou(P,u,!1,!1),u.stateNode=P,ue(P,E,S,y,c)&&rs(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ti(u),null;case 6:if(c&&u.stateNode!=null)Lh(c,u,c.memoizedProps,S);else{if(typeof S!="string"&&u.stateNode===null)throw Error(o(166));if(c=ns(Dl.current),y=ns(fr.current),Cu(u)){if(!le)throw Error(o(176));if(c=u.stateNode,S=u.memoizedProps,(y=ct(c,S,u,!Tu))&&(E=Ui,E!==null))switch(P=(E.mode&1)!==0,E.tag){case 3:Rr(E.stateNode.containerInfo,c,S,P);break;case 5:_s(E.type,E.memoizedProps,E.stateNode,c,S,P)}y&&rs(u)}else u.stateNode=re(S,c,y,u)}return ti(u),null;case 13:if(mt(rn),S=u.memoizedState,tn&&Vi!==null&&u.mode&1&&!(u.flags&128)){for(c=Vi;c;)c=ie(c);return Il(),u.flags|=98560,u}if(S!==null&&S.dehydrated!==null){if(S=Cu(u),c===null){if(!S)throw Error(o(318));if(!le)throw Error(o(344));if(c=u.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));gt(c,u)}else Il(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return ti(u),null}return kr!==null&&(xy(kr),kr=null),u.flags&128?(u.lanes=y,u):(S=S!==null,y=!1,c===null?Cu(u):y=c.memoizedState!==null,S&&!y&&(u.child.flags|=8192,u.mode&1&&(c===null||rn.current&1?Ln===0&&(Ln=3):wy())),u.updateQueue!==null&&(u.flags|=4),ti(u),null);case 4:return Ol(),Nu(c,u),c===null&&ke(u.stateNode.containerInfo),ti(u),null;case 10:return L0(u.type._context),ti(u),null;case 17:return Ai(u.type)&&oh(),ti(u),null;case 19:if(mt(rn),E=u.memoizedState,E===null)return ti(u),null;if(S=(u.flags&128)!==0,P=E.rendering,P===null)if(S)zu(E,!1);else{if(Ln!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(P=Sh(c),P!==null){for(u.flags|=128,zu(E,!1),c=P.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),u.subtreeFlags=0,c=y,S=u.child;S!==null;)y=S,E=c,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,E=P.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),S=S.sibling;return Rt(rn,rn.current&1|2),u.child}c=c.sibling}E.tail!==null&&Bn()>my&&(u.flags|=128,S=!0,zu(E,!1),u.lanes=4194304)}else{if(!S)if(c=Sh(P),c!==null){if(u.flags|=128,S=!0,c=c.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),zu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!tn)return ti(u),null}else 2*Bn()-E.renderingStartTime>my&&y!==1073741824&&(u.flags|=128,S=!0,zu(E,!1),u.lanes=4194304);E.isBackwards?(P.sibling=u.child,u.child=P):(c=E.last,c!==null?c.sibling=P:u.child=P,E.last=P)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=Bn(),u.sibling=null,c=rn.current,Rt(rn,S?c&1|2:c&1),u):(ti(u),null);case 22:case 23:return _y(),S=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==S&&(u.flags|=8192),S&&u.mode&1?Hi&1073741824&&(ti(u),Ye&&u.subtreeFlags&6&&(u.flags|=8192)):ti(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var yk=a.ReactCurrentOwner,Wi=!1;function gi(c,u,y,S){u.child=c===null?LS(u,null,y,S):kl(u,c.child,y,S)}function rb(c,u,y,S,E){y=y.render;var P=u.ref;return Pl(u,E),S=j0(c,u,y,S,P,E),y=X0(),c!==null&&!Wi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~E,Ps(c,u,E)):(tn&&y&&N0(u),u.flags|=1,gi(c,u,S,E),u.child)}function sb(c,u,y,S,E){if(c===null){var P=y.type;return typeof P=="function"&&!Sy(P)&&P.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(u.tag=15,u.type=P,ob(c,u,P,S,E)):(c=Jh(y.type,null,S,u,u.mode,E),c.ref=u.ref,c.return=u,u.child=c)}if(P=c.child,!(c.lanes&E)){var B=P.memoizedProps;if(y=y.compare,y=y!==null?y:hh,y(B,S)&&c.ref===u.ref)return Ps(c,u,E)}return u.flags|=1,c=wo(P,S),c.ref=u.ref,c.return=u,u.child=c}function ob(c,u,y,S,E){if(c!==null&&hh(c.memoizedProps,S)&&c.ref===u.ref)if(Wi=!1,(c.lanes&E)!==0)c.flags&131072&&(Wi=!0);else return u.lanes=c.lanes,Ps(c,u,E);return Q0(c,u,y,S,E)}function ab(c,u,y){var S=u.pendingProps,E=S.children,P=c!==null?c.memoizedState:null;if(S.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},Rt(zl,Hi),Hi|=y;else if(y&1073741824)u.memoizedState={baseLanes:0,cachePool:null},S=P!==null?P.baseLanes:y,Rt(zl,Hi),Hi|=S;else return c=P!==null?P.baseLanes|y:y,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null},u.updateQueue=null,Rt(zl,Hi),Hi|=c,null;else P!==null?(S=P.baseLanes|y,u.memoizedState=null):S=y,Rt(zl,Hi),Hi|=S;return gi(c,u,E,y),u.child}function lb(c,u){var y=u.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(u.flags|=512,u.flags|=2097152)}function Q0(c,u,y,S,E){var P=Ai(y)?Ss:Bt.current;return P=bs(u,P),Pl(u,E),y=j0(c,u,y,S,P,E),S=X0(),c!==null&&!Wi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~E,Ps(c,u,E)):(tn&&S&&N0(u),u.flags|=1,gi(c,u,y,E),u.child)}function cb(c,u,y,S,E){if(Ai(y)){var P=!0;ah(u)}else P=!1;if(Pl(u,E),u.stateNode===null)c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),bS(u,y,S),O0(u,y,S,E),S=!0;else if(c===null){var B=u.stateNode,J=u.memoizedProps;B.props=J;var fe=B.context,Ee=y.contextType;typeof Ee=="object"&&Ee!==null?Ee=lr(Ee):(Ee=Ai(y)?Ss:Bt.current,Ee=bs(u,Ee));var Ve=y.getDerivedStateFromProps,ft=typeof Ve=="function"||typeof B.getSnapshotBeforeUpdate=="function";ft||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==S||fe!==Ee)&&MS(u,B,S,Ee),mo=!1;var st=u.memoizedState;B.state=st,yh(u,S,B,E),fe=u.memoizedState,J!==S||st!==fe||Fn.current||mo?(typeof Ve=="function"&&(D0(u,y,Ve,S),fe=u.memoizedState),(J=mo||SS(u,y,J,S,st,fe,Ee))?(ft||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=fe),B.props=S,B.state=fe,B.context=Ee,S=J):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{B=u.stateNode,vS(c,u),J=u.memoizedProps,Ee=u.type===u.elementType?J:Ir(u.type,J),B.props=Ee,ft=u.pendingProps,st=B.context,fe=y.contextType,typeof fe=="object"&&fe!==null?fe=lr(fe):(fe=Ai(y)?Ss:Bt.current,fe=bs(u,fe));var Gt=y.getDerivedStateFromProps;(Ve=typeof Gt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==ft||st!==fe)&&MS(u,B,S,fe),mo=!1,st=u.memoizedState,B.state=st,yh(u,S,B,E);var tt=u.memoizedState;J!==ft||st!==tt||Fn.current||mo?(typeof Gt=="function"&&(D0(u,y,Gt,S),tt=u.memoizedState),(Ee=mo||SS(u,y,Ee,S,st,tt,fe)||!1)?(Ve||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(S,tt,fe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(S,tt,fe)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||J===c.memoizedProps&&st===c.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&st===c.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=tt),B.props=S,B.state=tt,B.context=fe,S=Ee):(typeof B.componentDidUpdate!="function"||J===c.memoizedProps&&st===c.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&st===c.memoizedState||(u.flags|=1024),S=!1)}return ey(c,u,y,S,P,E)}function ey(c,u,y,S,E,P){lb(c,u);var B=(u.flags&128)!==0;if(!S&&!B)return E&&hS(u,y,!1),Ps(c,u,P);S=u.stateNode,yk.current=u;var J=B&&typeof y.getDerivedStateFromError!="function"?null:S.render();return u.flags|=1,c!==null&&B?(u.child=kl(u,c.child,null,P),u.child=kl(u,null,J,P)):gi(c,u,J,P),u.memoizedState=S.state,E&&hS(u,y,!0),u.child}function ub(c){var u=c.stateNode;u.pendingContext?fS(c,u.pendingContext,u.pendingContext!==u.context):u.context&&fS(c,u.context,!1),V0(c,u.containerInfo)}function fb(c,u,y,S,E){return Il(),U0(E),u.flags|=256,gi(c,u,y,S),u.child}var Ih={dehydrated:null,treeContext:null,retryLane:0};function kh(c){return{baseLanes:c,cachePool:null}}function db(c,u,y){var S=u.pendingProps,E=rn.current,P=!1,B=(u.flags&128)!==0,J;if((J=B)||(J=c!==null&&c.memoizedState===null?!1:(E&2)!==0),J?(P=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),Rt(rn,E&1),c===null)return B0(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(u.mode&1?bu(c)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(E=S.children,c=S.fallback,P?(S=u.mode,P=u.child,E={mode:"hidden",children:E},!(S&1)&&P!==null?(P.childLanes=0,P.pendingProps=E):P=Qh(E,S,0,null),c=Ea(c,S,y,null),P.return=u,c.return=u,P.sibling=c,u.child=P,u.child.memoizedState=kh(y),u.memoizedState=Ih,c):ty(u,E));if(E=c.memoizedState,E!==null){if(J=E.dehydrated,J!==null){if(B)return u.flags&256?(u.flags&=-257,Dh(c,u,y,Error(o(422)))):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(P=S.fallback,E=u.mode,S=Qh({mode:"visible",children:S.children},E,0,null),P=Ea(P,E,y,null),P.flags|=2,S.return=u,P.return=u,S.sibling=P,u.child=S,u.mode&1&&kl(u,c.child,null,y),u.child.memoizedState=kh(y),u.memoizedState=Ih,P);if(!(u.mode&1))u=Dh(c,u,y,null);else if(bu(J))u=Dh(c,u,y,Error(o(419)));else if(S=(y&c.childLanes)!==0,Wi||S){if(S=Tn,S!==null){switch(y&-y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}S=P&(S.suspendedLanes|y)?0:P,S!==0&&S!==E.retryLane&&(E.retryLane=S,hr(c,S,-1))}wy(),u=Dh(c,u,y,Error(o(421)))}else sh(J)?(u.flags|=128,u.child=c.child,u=Rk.bind(null,c),F(J,u),u=null):(y=E.treeContext,le&&(Vi=me(J),Ui=u,tn=!0,kr=null,Tu=!1,y!==null&&(cr[ur++]=Ts,cr[ur++]=Cs,cr[ur++]=ya,Ts=y.id,Cs=y.overflow,ya=u)),u=ty(u,u.pendingProps.children),u.flags|=4096);return u}return P?(S=pb(c,u,S.children,S.fallback,y),P=u.child,E=c.child.memoizedState,P.memoizedState=E===null?kh(y):{baseLanes:E.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,u.memoizedState=Ih,S):(y=hb(c,u,S.children,y),u.memoizedState=null,y)}return P?(S=pb(c,u,S.children,S.fallback,y),P=u.child,E=c.child.memoizedState,P.memoizedState=E===null?kh(y):{baseLanes:E.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,u.memoizedState=Ih,S):(y=hb(c,u,S.children,y),u.memoizedState=null,y)}function ty(c,u){return u=Qh({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function hb(c,u,y,S){var E=c.child;return c=E.sibling,y=wo(E,{mode:"visible",children:y}),!(u.mode&1)&&(y.lanes=S),y.return=u,y.sibling=null,c!==null&&(S=u.deletions,S===null?(u.deletions=[c],u.flags|=16):S.push(c)),u.child=y}function pb(c,u,y,S,E){var P=u.mode;c=c.child;var B=c.sibling,J={mode:"hidden",children:y};return!(P&1)&&u.child!==c?(y=u.child,y.childLanes=0,y.pendingProps=J,u.deletions=null):(y=wo(c,J),y.subtreeFlags=c.subtreeFlags&14680064),B!==null?S=wo(B,S):(S=Ea(S,P,E,null),S.flags|=2),S.return=u,y.return=u,y.sibling=S,u.child=y,S}function Dh(c,u,y,S){return S!==null&&U0(S),kl(u,c.child,null,y),c=ty(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function mb(c,u,y){c.lanes|=u;var S=c.alternate;S!==null&&(S.lanes|=u),I0(c.return,u,y)}function ny(c,u,y,S,E){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:E}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=y,P.tailMode=E)}function gb(c,u,y){var S=u.pendingProps,E=S.revealOrder,P=S.tail;if(gi(c,u,S.children,y),S=rn.current,S&2)S=S&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&mb(c,y,u);else if(c.tag===19)mb(c,y,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}if(Rt(rn,S),!(u.mode&1))u.memoizedState=null;else switch(E){case"forwards":for(y=u.child,E=null;y!==null;)c=y.alternate,c!==null&&Sh(c)===null&&(E=y),y=y.sibling;y=E,y===null?(E=u.child,u.child=null):(E=y.sibling,y.sibling=null),ny(u,!1,E,y,P);break;case"backwards":for(y=null,E=u.child,u.child=null;E!==null;){if(c=E.alternate,c!==null&&Sh(c)===null){u.child=E;break}c=E.sibling,E.sibling=y,y=E,E=c}ny(u,!0,y,null,P);break;case"together":ny(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ps(c,u,y){if(c!==null&&(u.dependencies=c.dependencies),Fl|=u.lanes,!(y&u.childLanes))return null;if(c!==null&&u.child!==c.child)throw Error(o(153));if(u.child!==null){for(c=u.child,y=wo(c,c.pendingProps),u.child=y,y.return=u;c.sibling!==null;)c=c.sibling,y=y.sibling=wo(c,c.pendingProps),y.return=u;y.sibling=null}return u.child}function vk(c,u,y){switch(u.tag){case 3:ub(u),Il();break;case 5:IS(u);break;case 1:Ai(u.type)&&ah(u);break;case 4:V0(u,u.stateNode.containerInfo);break;case 10:yS(u,u.type._context,u.memoizedProps.value);break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Rt(rn,rn.current&1),u.flags|=128,null):y&u.child.childLanes?db(c,u,y):(Rt(rn,rn.current&1),c=Ps(c,u,y),c!==null?c.sibling:null);Rt(rn,rn.current&1);break;case 19:if(S=(y&u.childLanes)!==0,c.flags&128){if(S)return gb(c,u,y);u.flags|=128}var E=u.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Rt(rn,rn.current),S)break;return null;case 22:case 23:return u.lanes=0,ab(c,u,y)}return Ps(c,u,y)}function xk(c,u){switch(z0(u),u.tag){case 1:return Ai(u.type)&&oh(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return Ol(),mt(Fn),mt(Bt),$0(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 5:return W0(u),null;case 13:if(mt(rn),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Il()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return mt(rn),null;case 4:return Ol(),null;case 10:return L0(u.type._context),null;case 22:case 23:return _y(),null;case 24:return null;default:return null}}var Oh=!1,_a=!1,_k=typeof WeakSet=="function"?WeakSet:Set,De=null;function Nh(c,u){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(S){Li(c,u,S)}else y.current=null}function iy(c,u,y){try{y()}catch(S){Li(c,u,S)}}var yb=!1;function wk(c,u){for(Y(c.containerInfo),De=u;De!==null;)if(c=De,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,De=u;else for(;De!==null;){c=De;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,E=y.memoizedState,P=c.stateNode,B=P.getSnapshotBeforeUpdate(c.elementType===c.type?S:Ir(c.type,S),E);P.__reactInternalSnapshotBeforeUpdate=B}break;case 3:Ye&&Le(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){Li(c,c.return,J)}if(u=c.sibling,u!==null){u.return=c.return,De=u;break}De=c.return}return y=yb,yb=!1,y}function wa(c,u,y){var S=u.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&c)===c){var P=E.destroy;E.destroy=void 0,P!==void 0&&iy(u,y,P)}E=E.next}while(E!==S)}}function Fu(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var y=u=u.next;do{if((y.tag&c)===c){var S=y.create;y.destroy=S()}y=y.next}while(y!==u)}}function ry(c){var u=c.ref;if(u!==null){var y=c.stateNode;switch(c.tag){case 5:c=ee(y);break;default:c=y}typeof u=="function"?u(c):u.current=c}}function vb(c,u,y){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(fh,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(c=u.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var S=c=c.next;do{var E=S,P=E.destroy;E=E.tag,P!==void 0&&(E&2||E&4)&&iy(u,y,P),S=S.next}while(S!==c)}break;case 1:if(Nh(u,y),c=u.stateNode,typeof c.componentWillUnmount=="function")try{c.props=u.memoizedProps,c.state=u.memoizedState,c.componentWillUnmount()}catch(B){Li(u,y,B)}break;case 5:Nh(u,y);break;case 4:Ye?Mb(c,u,y):de&&de&&(u=u.stateNode.containerInfo,y=Mt(u),pi(u,y))}}function xb(c,u,y){for(var S=u;;)if(vb(c,S,y),S.child===null||Ye&&S.tag===4){if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function _b(c){var u=c.alternate;u!==null&&(c.alternate=null,_b(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&rt(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function wb(c){return c.tag===5||c.tag===3||c.tag===4}function Sb(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wb(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function bb(c){if(Ye){e:{for(var u=c.return;u!==null;){if(wb(u))break e;u=u.return}throw Error(o(160))}var y=u;switch(y.tag){case 5:u=y.stateNode,y.flags&32&&(_e(u),y.flags&=-33),y=Sb(c),oy(c,y,u);break;case 3:case 4:u=y.stateNode.containerInfo,y=Sb(c),sy(c,y,u);break;default:throw Error(o(161))}}}function sy(c,u,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,u?Ke(y,c,u):Pe(y,c);else if(S!==4&&(c=c.child,c!==null))for(sy(c,u,y),c=c.sibling;c!==null;)sy(c,u,y),c=c.sibling}function oy(c,u,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,u?Be(y,c,u):et(y,c);else if(S!==4&&(c=c.child,c!==null))for(oy(c,u,y),c=c.sibling;c!==null;)oy(c,u,y),c=c.sibling}function Mb(c,u,y){for(var S=u,E=!1,P,B;;){if(!E){E=S.return;e:for(;;){if(E===null)throw Error(o(160));switch(P=E.stateNode,E.tag){case 5:B=!1;break e;case 3:P=P.containerInfo,B=!0;break e;case 4:P=P.containerInfo,B=!0;break e}E=E.return}E=!0}if(S.tag===5||S.tag===6)xb(c,S,y),B?X(P,S.stateNode):He(P,S.stateNode);else if(S.tag===18)B?dn(P,S.stateNode):Tt(P,S.stateNode);else if(S.tag===4){if(S.child!==null){P=S.stateNode.containerInfo,B=!0,S.child.return=S,S=S.child;continue}}else if(vb(c,S,y),S.child!==null){S.child.return=S,S=S.child;continue}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return,S.tag===4&&(E=!1)}S.sibling.return=S.return,S=S.sibling}}function ay(c,u){if(Ye){switch(u.tag){case 0:case 11:case 14:case 15:wa(3,u,u.return),Fu(3,u),wa(5,u,u.return);return;case 1:return;case 5:var y=u.stateNode;if(y!=null){var S=u.memoizedProps;c=c!==null?c.memoizedProps:S;var E=u.type,P=u.updateQueue;u.updateQueue=null,P!==null&&nt(y,P,E,c,S,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));y=u.memoizedProps,pe(u.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:le&&c!==null&&c.memoizedState.isDehydrated&&At(u.stateNode.containerInfo);return;case 12:return;case 13:zh(u);return;case 19:zh(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:wa(3,u,u.return),Fu(3,u),wa(5,u,u.return);return;case 12:return;case 13:zh(u);return;case 19:zh(u);return;case 3:le&&c!==null&&c.memoizedState.isDehydrated&&At(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(de){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,pi(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function zh(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new _k),u.forEach(function(S){var E=Lk.bind(null,c,S);y.has(S)||(y.add(S),S.then(E,E))})}}function Sk(c,u){for(De=u;De!==null;){u=De;var y=u.deletions;if(y!==null)for(var S=0;S<y.length;S++){var E=y[S];try{var P=c;Ye?Mb(P,E,u):xb(P,E,u);var B=E.alternate;B!==null&&(B.return=null),E.return=null}catch(Qe){Li(E,u,Qe)}}if(y=u.child,u.subtreeFlags&12854&&y!==null)y.return=u,De=y;else for(;De!==null;){u=De;try{var J=u.flags;if(J&32&&Ye&&_e(u.stateNode),J&512){var fe=u.alternate;if(fe!==null){var Ee=fe.ref;Ee!==null&&(typeof Ee=="function"?Ee(null):Ee.current=null)}}if(J&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var Ve=u.alternate;(Ve===null||Ve.memoizedState===null)&&(py=Bn())}break;case 22:var ft=u.memoizedState!==null,st=u.alternate,Gt=st!==null&&st.memoizedState!==null;if(y=u,Ye){e:if(S=y,E=ft,P=null,Ye)for(var tt=S;;){if(tt.tag===5){if(P===null){P=tt;var ni=tt.stateNode;E?Fe(ni):ae(tt.stateNode,tt.memoizedProps)}}else if(tt.tag===6){if(P===null){var mr=tt.stateNode;E?G(mr):we(mr,tt.memoizedProps)}}else if((tt.tag!==22&&tt.tag!==23||tt.memoizedState===null||tt===S)&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===S)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===S)break e;P===tt&&(P=null),tt=tt.return}P===tt&&(P=null),tt.sibling.return=tt.return,tt=tt.sibling}}if(ft&&!Gt&&y.mode&1){De=y;for(var se=y.child;se!==null;){for(y=De=se;De!==null;){S=De;var te=S.child;switch(S.tag){case 0:case 11:case 14:case 15:wa(4,S,S.return);break;case 1:Nh(S,S.return);var ce=S.stateNode;if(typeof ce.componentWillUnmount=="function"){var Ne=S.return;try{ce.props=S.memoizedProps,ce.state=S.memoizedState,ce.componentWillUnmount()}catch(Qe){Li(S,Ne,Qe)}}break;case 5:Nh(S,S.return);break;case 22:if(S.memoizedState!==null){Cb(y);continue}}te!==null?(te.return=S,De=te):Cb(y)}se=se.sibling}}}switch(J&4102){case 2:bb(u),u.flags&=-3;break;case 6:bb(u),u.flags&=-3,ay(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,ay(u.alternate,u);break;case 4:ay(u.alternate,u)}}catch(Qe){Li(u,u.return,Qe)}if(y=u.sibling,y!==null){y.return=u.return,De=y;break}De=u.return}}}function bk(c,u,y){De=c,Eb(c)}function Eb(c,u,y){for(var S=(c.mode&1)!==0;De!==null;){var E=De,P=E.child;if(E.tag===22&&S){var B=E.memoizedState!==null||Oh;if(!B){var J=E.alternate,fe=J!==null&&J.memoizedState!==null||_a;J=Oh;var Ee=_a;if(Oh=B,(_a=fe)&&!Ee)for(De=E;De!==null;)B=De,fe=B.child,B.tag===22&&B.memoizedState!==null?Ab(E):fe!==null?(fe.return=B,De=fe):Ab(E);for(;P!==null;)De=P,Eb(P),P=P.sibling;De=E,Oh=J,_a=Ee}Tb(c)}else E.subtreeFlags&8772&&P!==null?(P.return=E,De=P):Tb(c)}}function Tb(c){for(;De!==null;){var u=De;if(u.flags&8772){var y=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:_a||Fu(5,u);break;case 1:var S=u.stateNode;if(u.flags&4&&!_a)if(y===null)S.componentDidMount();else{var E=u.elementType===u.type?y.memoizedProps:Ir(u.type,y.memoizedProps);S.componentDidUpdate(E,y.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=u.updateQueue;P!==null&&_S(u,P,S);break;case 3:var B=u.updateQueue;if(B!==null){if(y=null,u.child!==null)switch(u.child.tag){case 5:y=ee(u.child.stateNode);break;case 1:y=u.child.stateNode}_S(u,B,y)}break;case 5:var J=u.stateNode;y===null&&u.flags&4&&$e(J,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&u.memoizedState===null){var fe=u.alternate;if(fe!==null){var Ee=fe.memoizedState;if(Ee!==null){var Ve=Ee.dehydrated;Ve!==null&&Et(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}_a||u.flags&512&&ry(u)}catch(ft){Li(u,u.return,ft)}}if(u===c){De=null;break}if(y=u.sibling,y!==null){y.return=u.return,De=y;break}De=u.return}}function Cb(c){for(;De!==null;){var u=De;if(u===c){De=null;break}var y=u.sibling;if(y!==null){y.return=u.return,De=y;break}De=u.return}}function Ab(c){for(;De!==null;){var u=De;try{switch(u.tag){case 0:case 11:case 15:var y=u.return;try{Fu(4,u)}catch(fe){Li(u,y,fe)}break;case 1:var S=u.stateNode;if(typeof S.componentDidMount=="function"){var E=u.return;try{S.componentDidMount()}catch(fe){Li(u,E,fe)}}var P=u.return;try{ry(u)}catch(fe){Li(u,P,fe)}break;case 5:var B=u.return;try{ry(u)}catch(fe){Li(u,B,fe)}}}catch(fe){Li(u,u.return,fe)}if(u===c){De=null;break}var J=u.sibling;if(J!==null){J.return=u.return,De=J;break}De=u.return}}var Fh=0,Bh=1,Uh=2,Vh=3,Wh=4;if(typeof Symbol=="function"&&Symbol.for){var Bu=Symbol.for;Fh=Bu("selector.component"),Bh=Bu("selector.has_pseudo_class"),Uh=Bu("selector.role"),Vh=Bu("selector.test_id"),Wh=Bu("selector.text")}function ly(c){var u=Me(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(c=ht(c),c===null)throw Error(o(362));return c.stateNode.current}function cy(c,u){switch(u.$$typeof){case Fh:if(c.type===u.value)return!0;break;case Bh:e:{u=u.value,c=[c,0];for(var y=0;y<c.length;){var S=c[y++],E=c[y++],P=u[E];if(S.tag!==5||!Q(S)){for(;P!=null&&cy(S,P);)E++,P=u[E];if(E===u.length){u=!0;break e}else for(S=S.child;S!==null;)c.push(S,E),S=S.sibling}}u=!1}return u;case Uh:if(c.tag===5&&xe(c.stateNode,u.value))return!0;break;case Wh:if((c.tag===5||c.tag===6)&&(c=I(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case Vh:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function uy(c){switch(c.$$typeof){case Fh:return"<"+(R(c.value)||"Unknown")+">";case Bh:return":has("+(uy(c)||"")+")";case Uh:return'[role="'+c.value+'"]';case Wh:return'"'+c.value+'"';case Vh:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function Pb(c,u){var y=[];c=[c,0];for(var S=0;S<c.length;){var E=c[S++],P=c[S++],B=u[P];if(E.tag!==5||!Q(E)){for(;B!=null&&cy(E,B);)P++,B=u[P];if(P===u.length)y.push(E);else for(E=E.child;E!==null;)c.push(E,P),E=E.sibling}}return y}function fy(c,u){if(!bt)throw Error(o(363));c=ly(c),c=Pb(c,u),u=[],c=Array.from(c);for(var y=0;y<c.length;){var S=c[y++];if(S.tag===5)Q(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)c.push(S),S=S.sibling}return u}var Mk=Math.ceil,Hh=a.ReactCurrentDispatcher,dy=a.ReactCurrentOwner,_n=a.ReactCurrentBatchConfig,St=0,Tn=null,Cn=null,Xn=0,Hi=0,zl=or(0),Ln=0,Uu=null,Fl=0,$h=0,hy=0,Vu=null,Pi=null,py=0,my=1/0;function Bl(){my=Bn()+500}var Gh=!1,gy=null,yo=null,jh=!1,vo=null,Xh=0,Wu=0,yy=null,Yh=-1,qh=0;function yi(){return St&6?Bn():Yh!==-1?Yh:Yh=Bn()}function xo(c){return c.mode&1?St&2&&Xn!==0?Xn&-Xn:ok.transition!==null?(qh===0&&(c=lh,lh<<=1,!(lh&4194240)&&(lh=64),qh=c),qh):(c=Dt,c!==0?c:Ce()):1}function hr(c,u,y){if(50<Wu)throw Wu=0,yy=null,Error(o(185));var S=Zh(c,u);return S===null?null:(Eu(S,u,y),(!(St&2)||S!==Tn)&&(S===Tn&&(!(St&2)&&($h|=u),Ln===4&&_o(S,Xn)),Ri(S,y),u===1&&St===0&&!(c.mode&1)&&(Bl(),dh&&es())),S)}function Zh(c,u){c.lanes|=u;var y=c.alternate;for(y!==null&&(y.lanes|=u),y=c,c=c.return;c!==null;)c.childLanes|=u,y=c.alternate,y!==null&&(y.childLanes|=u),y=c,c=c.return;return y.tag===3?y.stateNode:null}function Ri(c,u){var y=c.callbackNode;KI(c,u);var S=uh(c,c===Tn?Xn:0);if(S===0)y!==null&&mS(y),c.callbackNode=null,c.callbackPriority=0;else if(u=S&-S,c.callbackPriority!==u){if(y!=null&&mS(y),u===1)c.tag===0?sk(Lb.bind(null,c)):gS(Lb.bind(null,c)),qe?Ze(function(){St===0&&es()}):E0(T0,es),y=null;else{switch(pS(S)){case 1:y=T0;break;case 4:y=tk;break;case 16:y=C0;break;case 536870912:y=nk;break;default:y=C0}y=Ub(y,Rb.bind(null,c))}c.callbackPriority=u,c.callbackNode=y}}function Rb(c,u){if(Yh=-1,qh=0,St&6)throw Error(o(327));var y=c.callbackNode;if(Ma()&&c.callbackNode!==y)return null;var S=uh(c,c===Tn?Xn:0);if(S===0)return null;if(S&30||S&c.expiredLanes||u)u=Kh(c,S);else{u=S;var E=St;St|=2;var P=Db();(Tn!==c||Xn!==u)&&(Bl(),Sa(c,u));do try{Ck();break}catch(J){kb(c,J)}while(1);R0(),Hh.current=P,St=E,Cn!==null?u=0:(Tn=null,Xn=0,u=Ln)}if(u!==0){if(u===2&&(E=S0(c),E!==0&&(S=E,u=vy(c,E))),u===1)throw y=Uu,Sa(c,0),_o(c,S),Ri(c,Bn()),y;if(u===6)_o(c,S);else{if(E=c.current.alternate,!(S&30)&&!Ek(E)&&(u=Kh(c,S),u===2&&(P=S0(c),P!==0&&(S=P,u=vy(c,P))),u===1))throw y=Uu,Sa(c,0),_o(c,S),Ri(c,Bn()),y;switch(c.finishedWork=E,c.finishedLanes=S,u){case 0:case 1:throw Error(o(345));case 2:ba(c,Pi);break;case 3:if(_o(c,S),(S&130023424)===S&&(u=py+500-Bn(),10<u)){if(uh(c,0)!==0)break;if(E=c.suspendedLanes,(E&S)!==S){yi(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=ze(ba.bind(null,c,Pi),u);break}ba(c,Pi);break;case 4:if(_o(c,S),(S&4194240)===S)break;for(u=c.eventTimes,E=-1;0<S;){var B=31-Lr(S);P=1<<B,B=u[B],B>E&&(E=B),S&=~P}if(S=E,S=Bn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*Mk(S/1960))-S,10<S){c.timeoutHandle=ze(ba.bind(null,c,Pi),S);break}ba(c,Pi);break;case 5:ba(c,Pi);break;default:throw Error(o(329))}}}return Ri(c,Bn()),c.callbackNode===y?Rb.bind(null,c):null}function vy(c,u){var y=Vu;return c.current.memoizedState.isDehydrated&&(Sa(c,u).flags|=256),c=Kh(c,u),c!==2&&(u=Pi,Pi=y,u!==null&&xy(u)),c}function xy(c){Pi===null?Pi=c:Pi.push.apply(Pi,c)}function Ek(c){for(var u=c;;){if(u.flags&16384){var y=u.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var S=0;S<y.length;S++){var E=y[S],P=E.getSnapshot;E=E.value;try{if(!Qr(P(),E))return!1}catch{return!1}}}if(y=u.child,u.subtreeFlags&16384&&y!==null)y.return=u,u=y;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function _o(c,u){for(u&=~hy,u&=~$h,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var y=31-Lr(u),S=1<<y;c[y]=-1,u&=~S}}function Lb(c){if(St&6)throw Error(o(327));Ma();var u=uh(c,0);if(!(u&1))return Ri(c,Bn()),null;var y=Kh(c,u);if(c.tag!==0&&y===2){var S=S0(c);S!==0&&(u=S,y=vy(c,S))}if(y===1)throw y=Uu,Sa(c,0),_o(c,u),Ri(c,Bn()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,ba(c,Pi),Ri(c,Bn()),null}function Ib(c){vo!==null&&vo.tag===0&&!(St&6)&&Ma();var u=St;St|=1;var y=_n.transition,S=Dt;try{if(_n.transition=null,Dt=1,c)return c()}finally{Dt=S,_n.transition=y,St=u,!(St&6)&&es()}}function _y(){Hi=zl.current,mt(zl)}function Sa(c,u){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==Xe&&(c.timeoutHandle=Xe,Ie(y)),Cn!==null)for(y=Cn.return;y!==null;){var S=y;switch(z0(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&oh();break;case 3:Ol(),mt(Fn),mt(Bt),$0();break;case 5:W0(S);break;case 4:Ol();break;case 13:mt(rn);break;case 19:mt(rn);break;case 10:L0(S.type._context);break;case 22:case 23:_y()}y=y.return}if(Tn=c,Cn=c=wo(c.current,null),Xn=Hi=u,Ln=0,Uu=null,hy=$h=Fl=0,Pi=Vu=null,ts!==null){for(u=0;u<ts.length;u++)if(y=ts[u],S=y.interleaved,S!==null){y.interleaved=null;var E=S.next,P=y.pending;if(P!==null){var B=P.next;P.next=E,S.next=B}y.pending=S}ts=null}return c}function kb(c,u){do{var y=Cn;try{if(R0(),bh.current=Ph,Mh){for(var S=pn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}Mh=!1}if(Nl=0,Un=Qn=pn=null,Lu=!1,Iu=0,dy.current=null,y===null||y.return===null){Ln=1,Uu=u,Cn=null;break}e:{var P=c,B=y.return,J=y,fe=u;if(u=Xn,J.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ee=fe,Ve=J,ft=Ve.tag;if(!(Ve.mode&1)&&(ft===0||ft===11||ft===15)){var st=Ve.alternate;st?(Ve.updateQueue=st.updateQueue,Ve.memoizedState=st.memoizedState,Ve.lanes=st.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var Gt=eb(B);if(Gt!==null){Gt.flags&=-257,tb(Gt,B,J,P,u),Gt.mode&1&&QS(P,Ee,u),u=Gt,fe=Ee;var tt=u.updateQueue;if(tt===null){var ni=new Set;ni.add(fe),u.updateQueue=ni}else tt.add(fe);break e}else{if(!(u&1)){QS(P,Ee,u),wy();break e}fe=Error(o(426))}}else if(tn&&J.mode&1){var mr=eb(B);if(mr!==null){!(mr.flags&65536)&&(mr.flags|=256),tb(mr,B,J,P,u),U0(fe);break e}}P=fe,Ln!==4&&(Ln=2),Vu===null?Vu=[P]:Vu.push(P),fe=K0(fe,J),J=B;do{switch(J.tag){case 3:J.flags|=65536,u&=-u,J.lanes|=u;var se=KS(J,fe,u);xS(J,se);break e;case 1:P=fe;var te=J.type,ce=J.stateNode;if(!(J.flags&128)&&(typeof te.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(yo===null||!yo.has(ce)))){J.flags|=65536,u&=-u,J.lanes|=u;var Ne=JS(J,P,u);xS(J,Ne);break e}}J=J.return}while(J!==null)}Nb(y)}catch(Qe){u=Qe,Cn===y&&y!==null&&(Cn=y=y.return);continue}break}while(1)}function Db(){var c=Hh.current;return Hh.current=Ph,c===null?Ph:c}function wy(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Tn===null||!(Fl&268435455)&&!($h&268435455)||_o(Tn,Xn)}function Kh(c,u){var y=St;St|=2;var S=Db();Tn===c&&Xn===u||Sa(c,u);do try{Tk();break}catch(E){kb(c,E)}while(1);if(R0(),St=y,Hh.current=S,Cn!==null)throw Error(o(261));return Tn=null,Xn=0,Ln}function Tk(){for(;Cn!==null;)Ob(Cn)}function Ck(){for(;Cn!==null&&!QI();)Ob(Cn)}function Ob(c){var u=Bb(c.alternate,c,Hi);c.memoizedProps=c.pendingProps,u===null?Nb(c):Cn=u,dy.current=null}function Nb(c){var u=c;do{var y=u.alternate;if(c=u.return,u.flags&32768){if(y=xk(y,u),y!==null){y.flags&=32767,Cn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Ln=6,Cn=null;return}}else if(y=gk(y,u,Hi),y!==null){Cn=y;return}if(u=u.sibling,u!==null){Cn=u;return}Cn=u=c}while(u!==null);Ln===0&&(Ln=5)}function ba(c,u){var y=Dt,S=_n.transition;try{_n.transition=null,Dt=1,Ak(c,u,y)}finally{_n.transition=S,Dt=y}return null}function Ak(c,u,y){do Ma();while(vo!==null);if(St&6)throw Error(o(327));var S=c.finishedWork,E=c.finishedLanes;if(S===null)return null;if(c.finishedWork=null,c.finishedLanes=0,S===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var P=S.lanes|S.childLanes;if(JI(c,P),c===Tn&&(Cn=Tn=null,Xn=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||jh||(jh=!0,Ub(C0,function(){return Ma(),null})),P=(S.flags&15990)!==0,S.subtreeFlags&15990||P){P=_n.transition,_n.transition=null;var B=Dt;Dt=1;var J=St;St|=4,dy.current=null,wk(c,S),Sk(c,S),Z(c.containerInfo),c.current=S,bk(S),ek(),St=J,Dt=B,_n.transition=P}else c.current=S;if(jh&&(jh=!1,vo=c,Xh=E),P=c.pendingLanes,P===0&&(yo=null),ik(S.stateNode),Ri(c,Bn()),u!==null)for(y=c.onRecoverableError,S=0;S<u.length;S++)y(u[S]);if(Gh)throw Gh=!1,c=gy,gy=null,c;return Xh&1&&c.tag!==0&&Ma(),P=c.pendingLanes,P&1?c===yy?Wu++:(Wu=0,yy=c):Wu=0,es(),null}function Ma(){if(vo!==null){var c=pS(Xh),u=_n.transition,y=Dt;try{if(_n.transition=null,Dt=16>c?16:c,vo===null)var S=!1;else{if(c=vo,vo=null,Xh=0,St&6)throw Error(o(331));var E=St;for(St|=4,De=c.current;De!==null;){var P=De,B=P.child;if(De.flags&16){var J=P.deletions;if(J!==null){for(var fe=0;fe<J.length;fe++){var Ee=J[fe];for(De=Ee;De!==null;){var Ve=De;switch(Ve.tag){case 0:case 11:case 15:wa(8,Ve,P)}var ft=Ve.child;if(ft!==null)ft.return=Ve,De=ft;else for(;De!==null;){Ve=De;var st=Ve.sibling,Gt=Ve.return;if(_b(Ve),Ve===Ee){De=null;break}if(st!==null){st.return=Gt,De=st;break}De=Gt}}}var tt=P.alternate;if(tt!==null){var ni=tt.child;if(ni!==null){tt.child=null;do{var mr=ni.sibling;ni.sibling=null,ni=mr}while(ni!==null)}}De=P}}if(P.subtreeFlags&2064&&B!==null)B.return=P,De=B;else e:for(;De!==null;){if(P=De,P.flags&2048)switch(P.tag){case 0:case 11:case 15:wa(9,P,P.return)}var se=P.sibling;if(se!==null){se.return=P.return,De=se;break e}De=P.return}}var te=c.current;for(De=te;De!==null;){B=De;var ce=B.child;if(B.subtreeFlags&2064&&ce!==null)ce.return=B,De=ce;else e:for(B=te;De!==null;){if(J=De,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Fu(9,J)}}catch(Qe){Li(J,J.return,Qe)}if(J===B){De=null;break e}var Ne=J.sibling;if(Ne!==null){Ne.return=J.return,De=Ne;break e}De=J.return}}if(St=E,es(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(fh,c)}catch{}S=!0}return S}finally{Dt=y,_n.transition=u}}return!1}function zb(c,u,y){u=K0(y,u),u=KS(c,u,1),go(c,u),u=yi(),c=Zh(c,1),c!==null&&(Eu(c,1,u),Ri(c,u))}function Li(c,u,y){if(c.tag===3)zb(c,c,y);else for(;u!==null;){if(u.tag===3){zb(u,c,y);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(yo===null||!yo.has(S))){c=K0(y,c),c=JS(u,c,1),go(u,c),c=yi(),u=Zh(u,1),u!==null&&(Eu(u,1,c),Ri(u,c));break}}u=u.return}}function Pk(c,u,y){var S=c.pingCache;S!==null&&S.delete(u),u=yi(),c.pingedLanes|=c.suspendedLanes&y,Tn===c&&(Xn&y)===y&&(Ln===4||Ln===3&&(Xn&130023424)===Xn&&500>Bn()-py?Sa(c,0):hy|=y),Ri(c,u)}function Fb(c,u){u===0&&(c.mode&1?(u=ch,ch<<=1,!(ch&130023424)&&(ch=4194304)):u=1);var y=yi();c=Zh(c,u),c!==null&&(Eu(c,u,y),Ri(c,y))}function Rk(c){var u=c.memoizedState,y=0;u!==null&&(y=u.retryLane),Fb(c,y)}function Lk(c,u){var y=0;switch(c.tag){case 13:var S=c.stateNode,E=c.memoizedState;E!==null&&(y=E.retryLane);break;case 19:S=c.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(u),Fb(c,y)}var Bb;Bb=function(c,u,y){if(c!==null)if(c.memoizedProps!==u.pendingProps||Fn.current)Wi=!0;else{if(!(c.lanes&y)&&!(u.flags&128))return Wi=!1,vk(c,u,y);Wi=!!(c.flags&131072)}else Wi=!1,tn&&u.flags&1048576&&ES(u,_h,u.index);switch(u.lanes=0,u.tag){case 2:var S=u.type;c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps;var E=bs(u,Bt.current);Pl(u,y),E=j0(null,u,S,c,E,y);var P=X0();return u.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ai(S)?(P=!0,ah(u)):P=!1,u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,k0(u),E.updater=vh,u.stateNode=E,E._reactInternals=u,O0(u,S,c,y),u=ey(null,u,S,!0,P,y)):(u.tag=0,tn&&P&&N0(u),gi(null,u,E,y),u=u.child),u;case 16:S=u.elementType;e:{switch(c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps,E=S._init,S=E(S._payload),u.type=S,E=u.tag=kk(S),c=Ir(S,c),E){case 0:u=Q0(null,u,S,c,y);break e;case 1:u=cb(null,u,S,c,y);break e;case 11:u=rb(null,u,S,c,y);break e;case 14:u=sb(null,u,S,Ir(S.type,c),y);break e}throw Error(o(306,S,""))}return u;case 0:return S=u.type,E=u.pendingProps,E=u.elementType===S?E:Ir(S,E),Q0(c,u,S,E,y);case 1:return S=u.type,E=u.pendingProps,E=u.elementType===S?E:Ir(S,E),cb(c,u,S,E,y);case 3:e:{if(ub(u),c===null)throw Error(o(387));S=u.pendingProps,P=u.memoizedState,E=P.element,vS(c,u),yh(u,S,null,y);var B=u.memoizedState;if(S=B.element,le&&P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:B.cache,transitions:B.transitions},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){E=Error(o(423)),u=fb(c,u,S,y,E);break e}else if(S!==E){E=Error(o(424)),u=fb(c,u,S,y,E);break e}else for(le&&(Vi=ne(u.stateNode.containerInfo),Ui=u,tn=!0,kr=null,Tu=!1),y=LS(u,null,S,y),u.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Il(),S===E){u=Ps(c,u,y);break e}gi(c,u,S,y)}u=u.child}return u;case 5:return IS(u),c===null&&B0(u),S=u.type,E=u.pendingProps,P=c!==null?c.memoizedProps:null,B=E.children,ve(S,E)?B=null:P!==null&&ve(S,P)&&(u.flags|=32),lb(c,u),gi(c,u,B,y),u.child;case 6:return c===null&&B0(u),null;case 13:return db(c,u,y);case 4:return V0(u,u.stateNode.containerInfo),S=u.pendingProps,c===null?u.child=kl(u,null,S,y):gi(c,u,S,y),u.child;case 11:return S=u.type,E=u.pendingProps,E=u.elementType===S?E:Ir(S,E),rb(c,u,S,E,y);case 7:return gi(c,u,u.pendingProps,y),u.child;case 8:return gi(c,u,u.pendingProps.children,y),u.child;case 12:return gi(c,u,u.pendingProps.children,y),u.child;case 10:e:{if(S=u.type._context,E=u.pendingProps,P=u.memoizedProps,B=E.value,yS(u,S,B),P!==null)if(Qr(P.value,B)){if(P.children===E.children&&!Fn.current){u=Ps(c,u,y);break e}}else for(P=u.child,P!==null&&(P.return=u);P!==null;){var J=P.dependencies;if(J!==null){B=P.child;for(var fe=J.firstContext;fe!==null;){if(fe.context===S){if(P.tag===1){fe=Es(-1,y&-y),fe.tag=2;var Ee=P.updateQueue;if(Ee!==null){Ee=Ee.shared;var Ve=Ee.pending;Ve===null?fe.next=fe:(fe.next=Ve.next,Ve.next=fe),Ee.pending=fe}}P.lanes|=y,fe=P.alternate,fe!==null&&(fe.lanes|=y),I0(P.return,y,u),J.lanes|=y;break}fe=fe.next}}else if(P.tag===10)B=P.type===u.type?null:P.child;else if(P.tag===18){if(B=P.return,B===null)throw Error(o(341));B.lanes|=y,J=B.alternate,J!==null&&(J.lanes|=y),I0(B,y,u),B=P.sibling}else B=P.child;if(B!==null)B.return=P;else for(B=P;B!==null;){if(B===u){B=null;break}if(P=B.sibling,P!==null){P.return=B.return,B=P;break}B=B.return}P=B}gi(c,u,E.children,y),u=u.child}return u;case 9:return E=u.type,S=u.pendingProps.children,Pl(u,y),E=lr(E),S=S(E),u.flags|=1,gi(c,u,S,y),u.child;case 14:return S=u.type,E=Ir(S,u.pendingProps),E=Ir(S.type,E),sb(c,u,S,E,y);case 15:return ob(c,u,u.type,u.pendingProps,y);case 17:return S=u.type,E=u.pendingProps,E=u.elementType===S?E:Ir(S,E),c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,Ai(S)?(c=!0,ah(u)):c=!1,Pl(u,y),bS(u,S,E),O0(u,S,E,y),ey(null,u,S,!0,c,y);case 19:return gb(c,u,y);case 22:return ab(c,u,y)}throw Error(o(156,u.tag))};function Ub(c,u){return E0(c,u)}function Ik(c,u,y,S){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(c,u,y,S){return new Ik(c,u,y,S)}function Sy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function kk(c){if(typeof c=="function")return Sy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===v)return 11;if(c===w)return 14}return 2}function wo(c,u){var y=c.alternate;return y===null?(y=pr(c.tag,u,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=u,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,u=c.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function Jh(c,u,y,S,E,P){var B=2;if(S=c,typeof c=="function")Sy(c)&&(B=1);else if(typeof c=="string")B=5;else e:switch(c){case d:return Ea(y.children,E,P,u);case h:B=8,E|=8;break;case p:return c=pr(12,y,u,E|2),c.elementType=p,c.lanes=P,c;case x:return c=pr(13,y,u,E),c.elementType=x,c.lanes=P,c;case _:return c=pr(19,y,u,E),c.elementType=_,c.lanes=P,c;case M:return Qh(y,E,P,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:B=10;break e;case g:B=9;break e;case v:B=11;break e;case w:B=14;break e;case b:B=16,S=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return u=pr(B,y,u,E),u.elementType=c,u.type=S,u.lanes=P,u}function Ea(c,u,y,S){return c=pr(7,c,S,u),c.lanes=y,c}function Qh(c,u,y,S){return c=pr(22,c,S,u),c.elementType=M,c.lanes=y,c.stateNode={},c}function by(c,u,y){return c=pr(6,c,null,u),c.lanes=y,c}function My(c,u,y){return u=pr(4,c.children!==null?c.children:[],c.key,u),u.lanes=y,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function Dk(c,u,y,S,E){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b0(0),this.expirationTimes=b0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b0(0),this.identifierPrefix=S,this.onRecoverableError=E,le&&(this.mutableSourceEagerHydrationData=null)}function Vb(c,u,y,S,E,P,B,J,fe){return c=new Dk(c,u,y,J,fe),u===1?(u=1,P===!0&&(u|=8)):u=0,P=pr(3,null,null,u),c.current=P,P.stateNode=c,P.memoizedState={element:S,isDehydrated:y,cache:null,transitions:null},k0(P),c}function Wb(c){if(!c)return ar;c=c._reactInternals;e:{if(D(c)!==c||c.tag!==1)throw Error(o(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ai(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(Ai(y))return dS(c,y,u)}return u}function Hb(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=$(u),c===null?null:c.stateNode}function $b(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<u?y:u}}function Ey(c,u){$b(c,u),(c=c.alternate)&&$b(c,u)}function Ok(c){return c=$(c),c===null?null:c.stateNode}function Nk(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var u=yi();hr(c,134217728,u),Ey(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=yi(),y=xo(c);hr(c,y,u),Ey(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var y=Mu(u.pendingLanes);y!==0&&(M0(u,y|1),Ri(u,Bn()),!(St&6)&&(Bl(),es()))}break;case 13:var S=yi();Ib(function(){return hr(c,1,S)}),Ey(c,1)}},t.batchedUpdates=function(c,u){var y=St;St|=1;try{return c(u)}finally{St=y,St===0&&(Bl(),dh&&es())}},t.createComponentSelector=function(c){return{$$typeof:Fh,value:c}},t.createContainer=function(c,u,y,S,E,P,B){return Vb(c,u,!1,null,y,S,E,P,B)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Bh,value:c}},t.createHydrationContainer=function(c,u,y,S,E,P,B,J,fe){return c=Vb(y,S,!0,c,E,P,B,J,fe),c.context=Wb(null),y=c.current,S=yi(),E=xo(y),P=Es(S,E),P.callback=u??null,go(y,P),c.current.lanes=E,Eu(c,E,S),Ri(c,S),c},t.createPortal=function(c,u,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:S==null?null:""+S,children:c,containerInfo:u,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:Uh,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Vh,value:c}},t.createTextSelector=function(c){return{$$typeof:Wh,value:c}},t.deferredUpdates=function(c){var u=Dt,y=_n.transition;try{return _n.transition=null,Dt=16,c()}finally{Dt=u,_n.transition=y}},t.discreteUpdates=function(c,u,y,S,E){var P=Dt,B=_n.transition;try{return _n.transition=null,Dt=1,c(u,y,S,E)}finally{Dt=P,_n.transition=B,St===0&&Bl()}},t.findAllNodes=fy,t.findBoundingRects=function(c,u){if(!bt)throw Error(o(363));u=fy(c,u),c=[];for(var y=0;y<u.length;y++)c.push(U(u[y]));for(u=c.length-1;0<u;u--){y=c[u];for(var S=y.x,E=S+y.width,P=y.y,B=P+y.height,J=u-1;0<=J;J--)if(u!==J){var fe=c[J],Ee=fe.x,Ve=Ee+fe.width,ft=fe.y,st=ft+fe.height;if(S>=Ee&&P>=ft&&E<=Ve&&B<=st){c.splice(u,1);break}else if(S!==Ee||y.width!==fe.width||st<P||ft>B){if(!(P!==ft||y.height!==fe.height||Ve<S||Ee>E)){Ee>S&&(fe.width+=Ee-S,fe.x=S),Ve<E&&(fe.width=E-Ee),c.splice(u,1);break}}else{ft>P&&(fe.height+=ft-P,fe.y=P),st<B&&(fe.height=B-ft),c.splice(u,1);break}}}return c},t.findHostInstance=Hb,t.findHostInstanceWithNoPortals=function(c){return c=O(c),c=c!==null?V(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return Hb(c)},t.flushControlled=function(c){var u=St;St|=1;var y=_n.transition,S=Dt;try{_n.transition=null,Dt=1,c()}finally{Dt=S,_n.transition=y,St=u,St===0&&(Bl(),es())}},t.flushPassiveEffects=Ma,t.flushSync=Ib,t.focusWithin=function(c,u){if(!bt)throw Error(o(363));for(c=ly(c),u=Pb(c,u),u=Array.from(u),c=0;c<u.length;){var y=u[c++];if(!Q(y)){if(y.tag===5&&Se(y.stateNode))return!0;for(y=y.child;y!==null;)u.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(c,u){if(!bt)throw Error(o(363));var y=0,S=[];c=[ly(c),0];for(var E=0;E<c.length;){var P=c[E++],B=c[E++],J=u[B];if((P.tag!==5||!Q(P))&&(cy(P,J)&&(S.push(uy(J)),B++,B>y&&(y=B)),B<u.length))for(P=P.child;P!==null;)c.push(P,B),P=P.sibling}if(y<u.length){for(c=[];y<u.length;y++)c.push(uy(u[y]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ee(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Ok,findFiberByHostInstance:c.findFiberByHostInstance||Nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{fh=u.inject(c),Jr=u}catch{}c=!!u.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,u,y,S){if(!bt)throw Error(o(363));c=fy(c,u);var E=Te(c,y,S).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(c,u){var y=u._getVersion;y=y(u._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[u,y]:c.mutableSourceEagerHydrationData.push(u,y)},t.runWithPriority=function(c,u){var y=Dt;try{return Dt=c,u()}finally{Dt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,u,y,S){var E=u.current,P=yi(),B=xo(E);return y=Wb(y),u.context===null?u.context=y:u.pendingContext=y,u=Es(P,B),u.payload={element:c},S=S===void 0?null:S,S!==null&&(u.callback=S),go(E,u),c=hr(E,B,P),c!==null&&gh(c,E,B),B},t};PR.exports=_8;var w8=PR.exports;const S8=tu(w8),b8=n=>typeof n=="object"&&typeof n.then=="function",qa=[];function IR(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function kR(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of qa)if(IR(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=qa.indexOf(r);s!==-1&&qa.splice(s,1)},promise:(b8(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(qa.push(r),!t)throw r.promise}const M8=(n,e,t)=>kR(n,e,!1,t),E8=(n,e,t)=>void kR(n,e,!0,t),T8=n=>{if(n===void 0||n.length===0)qa.splice(0,qa.length);else{const e=qa.find(t=>IR(n,t.keys,t.equal));e&&e.remove()}},Vw={},C8=n=>void Object.assign(Vw,n);function A8(n,e){function t(d,{args:h=[],attach:p,...m},g){let v=`${d[0].toUpperCase()}${d.slice(1)}`,x;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;x=fc(_,{type:d,root:g,attach:p,primitive:!0})}else{const _=Vw[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=fc(new _(...h),{type:d,root:g,attach:p,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x instanceof _t?x.__r3f.attach="geometry":x instanceof Jn&&(x.__r3f.attach="material")),v!=="inject"&&Dv(x,m),x}function i(d,h){let p=!1;if(h){var m,g;(m=h.__r3f)!=null&&m.attach?kv(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(g=d.__r3f)==null||g.objects.push(h),h.__r3f||fc(h,{}),h.__r3f.parent=d,D1(h),dc(h)}}function r(d,h,p){let m=!1;if(h){var g,v;if((g=h.__r3f)!=null&&g.attach)kv(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const x=d.children.filter(w=>w!==h),_=x.indexOf(p);d.children=[...x.slice(0,_),h,...x.slice(_)],m=!0}m||(v=d.__r3f)==null||v.objects.push(h),h.__r3f||fc(h,{}),h.__r3f.parent=d,D1(h),dc(h)}}function s(d,h,p=!1){d&&[...d].forEach(m=>o(h,m,p))}function o(d,h,p){if(h){var m,g,v;if(h.__r3f&&(h.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(M=>M!==h)),(g=h.__r3f)!=null&&g.attach)E2(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var x;d.remove(h),(x=h.__r3f)!=null&&x.root&&z8(h.__r3f.root,h)}const w=(v=h.__r3f)==null?void 0:v.primitive,b=!w&&(p===void 0?h.dispose!==null:p);if(!w){var _;s((_=h.__r3f)==null?void 0:_.objects,h,b),s(h.children,h,b)}if(delete h.__r3f,b&&h.dispose&&h.type!=="Scene"){const M=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?I1.unstable_scheduleCallback(I1.unstable_IdlePriority,M):M()}dc(d)}}function a(d,h,p,m){var g;const v=(g=d.__r3f)==null?void 0:g.parent;if(!v)return;const x=t(h,p,d.__r3f.root);if(d.children){for(const _ of d.children)_.__r3f&&i(x,_);d.children=d.children.filter(_=>!_.__r3f)}d.__r3f.objects.forEach(_=>i(x,_)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(v,d),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(v,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=x,_.ref&&(typeof _.ref=="function"?_.ref(x):_.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:S8({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const m=d.getState().scene;m.__r3f&&r(m,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,m){var g;if(((g=d==null?void 0:d.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:x=[],children:_,...w}=m,{args:b=[],children:M,...C}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((R,T)=>R!==b[T]))return[!0];const A=UR(d,w,C,!0);return A.changes.length?[!1,A]:null}},commitUpdate(d,[h,p],m,g,v,x){h?a(d,m,v,x):Dv(d,p)},commitMount(d,h,p,m){var g;const v=(g=d.__r3f)!=null?g:{};d.raycast&&v.handlers&&v.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>fc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:m}=(h=d.__r3f)!=null?h:{};p&&m&&E2(m,d,p),d.isObject3D&&(d.visible=!1),dc(d)},unhideInstance(d,h){var p;const{attach:m,parent:g}=(p=d.__r3f)!=null?p:{};m&&g&&kv(g,d,m),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),dc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Pc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jt.fun(performance.now)?performance.now:Jt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Dv}}var w2,S2;const Iv=n=>"colorSpace"in n||"outputColorSpace"in n,DR=()=>{var n;return(n=Vw.ColorManagement)!=null?n:null},OR=n=>n&&n.isOrthographicCamera,P8=n=>n&&n.hasOwnProperty("current"),qd=typeof window<"u"&&((w2=window.document)!=null&&w2.createElement||((S2=window.navigator)==null?void 0:S2.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function NR(n){const e=L.useRef(n);return qd(()=>void(e.current=n),[n]),e}function R8({set:n}){return qd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class zR extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}zR.getDerivedStateFromError=()=>({error:!0});const FR="__default",b2=new Map,L8=n=>n&&!!n.memoized&&!!n.changes;function BR(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const uf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Jt={obj:n=>n===Object(n)&&!Jt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Jt.str(n)||Jt.num(n))return n===e;const s=Jt.obj(n);if(s&&i==="reference")return n===e;const o=Jt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Jt.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Jt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function I8(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function k8(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function fc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function k1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const M2=/-\d+$/;function kv(n,e,t){if(Jt.str(t)){if(M2.test(t)){const s=t.replace(M2,""),{target:o,key:a}=k1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=k1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function E2(n,e,t){var i,r;if(Jt.str(t)){const{target:s,key:o}=k1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function UR(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},f=!1){var d;const h=(d=n==null?void 0:n.__r3f)!=null?d:{},p=Object.entries(r),m=[];if(f){const v=Object.keys(l);for(let x=0;x<v.length;x++)r.hasOwnProperty(v[x])||p.unshift([v[x],FR+"remove"])}p.forEach(([v,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||Jt.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return m.push([v,x,!0,[]]);let w=[];v.includes("-")&&(w=v.split("-")),m.push([v,x,!1,w]);for(const b in r){const M=r[b];b.startsWith(`${v}-`)&&m.push([b,M,!1,b.split("-")])}});const g={...r};return h.memoizedProps&&h.memoizedProps.args&&(g.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(g.attach=h.memoizedProps.attach),{memoized:g,changes:m}}const D8=typeof process<"u"&&!1;function Dv(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:f}=L8(e)?e:UR(n,e),d=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<f.length;p++){let[m,g,v,x]=f[p];if(Iv(n)){const M="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?M:C):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?M:C)}let _=n,w=_[m];if(x.length&&(w=x.reduce((b,M)=>b[M],n),!(w&&w.set))){const[b,...M]=x.reverse();_=M.reverse().reduce((C,A)=>C[A],n),m=b}if(g===FR+"remove")if(_.constructor){let b=b2.get(_.constructor);b||(b=new _.constructor,b2.set(_.constructor,b)),g=b[m]}else g=0;if(v)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(w&&w.set&&(w.copy||w instanceof rl)){if(Array.isArray(g))w.fromArray?w.fromArray(g):w.set(...g);else if(w.copy&&g&&g.constructor&&(D8?w.constructor.name===g.constructor.name:w.constructor===g.constructor))w.copy(g);else if(g!==void 0){const b=w instanceof Oe;!b&&w.setScalar?w.setScalar(g):w instanceof rl&&g instanceof rl?w.mask=g.mask:w.set(g),!DR()&&!a.linear&&b&&w.convertSRGBToLinear()}}else if(_[m]=g,_[m]instanceof jn&&_[m].format===Di&&_[m].type===ro){const b=_[m];Iv(b)&&Iv(a.gl)?b.colorSpace=a.gl.outputColorSpace:b.encoding=a.gl.outputEncoding}dc(n)}if(s.parent&&a.internal&&n.raycast&&d!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=n.__r3f)!=null&&r.parent&&D1(n),n}function dc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function D1(n){n.onUpdate==null||n.onUpdate(n)}function O8(n,e){n.manual||(OR(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function nm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function N8(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Pc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Pc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Pc.ContinuousEventPriority;default:return Pc.DefaultEventPriority}}function VR(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function z8(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{VR(t.capturedMap,e,i,r)})}function F8(n){function e(l){const{internal:f}=n.getState(),d=l.offsetX-f.initialClick[0],h=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=f.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function i(l,f){const d=n.getState(),h=new Set,p=[],m=f?f(d.internal.interaction):d.internal.interaction;for(let _=0;_<m.length;_++){const w=uf(m[_]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function g(_){const w=uf(_);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var b;w.events.compute==null||w.events.compute(l,w,(b=w.previousRoot)==null?void 0:b.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(_,!0):[]}let v=m.flatMap(g).sort((_,w)=>{const b=uf(_.object),M=uf(w.object);return!b||!M?_.distance-w.distance:M.events.priority-b.events.priority||_.distance-w.distance}).filter(_=>{const w=nm(_);return h.has(w)?!1:(h.add(w),!0)});d.events.filter&&(v=d.events.filter(v,d));for(const _ of v){let w=_.object;for(;w;){var x;(x=w.__r3f)!=null&&x.eventCount&&p.push({..._,eventObject:w}),w=w.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let _ of d.internal.capturedMap.get(l.pointerId).values())h.has(nm(_.intersection))||p.push(_.intersection);return p}function r(l,f,d,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=uf(g.object)||p,{raycaster:x,pointer:_,camera:w,internal:b}=v,M=new z(_.x,_.y,0).unproject(w),C=k=>{var O,$;return(O=($=b.capturedMap.get(k))==null?void 0:$.has(g.eventObject))!=null?O:!1},A=k=>{const O={intersection:g,target:f.target};b.capturedMap.has(k)?b.capturedMap.get(k).set(g.eventObject,O):b.capturedMap.set(k,new Map([[g.eventObject,O]])),f.target.setPointerCapture(k)},R=k=>{const O=b.capturedMap.get(k);O&&VR(b.capturedMap,g.eventObject,O,k)};let T={};for(let k in f){let O=f[k];typeof O!="function"&&(T[k]=O)}let D={...g,...T,pointer:_,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:M,ray:x.ray,camera:w,stopPropagation(){const k="pointerId"in f&&b.capturedMap.get(f.pointerId);if((!k||k.has(g.eventObject))&&(D.stopped=m.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(O=>O.eventObject===g.eventObject))){const O=l.slice(0,l.indexOf(g));s([...O,g])}},target:{hasPointerCapture:C,setPointerCapture:A,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:A,releasePointerCapture:R},nativeEvent:f};if(h(D),m.stopped===!0)break}}return l}function s(l){const{internal:f}=n.getState();for(const d of f.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(f.hovered.delete(nm(d)),p!=null&&p.eventCount){const g={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,f){for(let d=0;d<f.length;d++){const h=f[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:d}=n.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(d,m?t:void 0),_=g?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=x.map(b=>b.eventObject)),g&&!x.length&&_<=2&&(o(d,p.interaction),h&&h(d)),m&&s(x);function w(b){const M=b.eventObject,C=M.__r3f,A=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const R=nm(b),T=p.hovered.get(R);T?T.stopped&&b.stopPropagation():(p.hovered.set(R,b),A.onPointerOver==null||A.onPointerOver(b),A.onPointerEnter==null||A.onPointerEnter(b))}A.onPointerMove==null||A.onPointerMove(b)}else{const R=A[l];R?(!g||p.initialHits.includes(M))&&(o(d,p.interaction.filter(T=>!p.initialHits.includes(T))),R(b)):g&&p.initialHits.includes(M)&&o(d,p.interaction.filter(T=>!p.initialHits.includes(T)))}}r(x,d,_,w)}}return{handlePointer:a}}const WR=n=>!!(n!=null&&n.render),HR=L.createContext(null),B8=(n,e)=>{const t=x8((a,l)=>{const f=new z,d=new z,h=new z;function p(_=l().camera,w=d,b=l().size){const{width:M,height:C,top:A,left:R}=b,T=M/C;w instanceof z?h.copy(w):h.set(...w);const D=_.getWorldPosition(f).distanceTo(h);if(OR(_))return{width:M/_.zoom,height:C/_.zoom,top:A,left:R,factor:1,distance:D,aspect:T};{const k=_.fov*Math.PI/180,O=2*Math.tan(k/2)*D,$=O*(M/C);return{width:$,height:O,top:A,left:R,factor:M/$,distance:D,aspect:T}}}let m;const g=_=>a(w=>({performance:{...w.performance,current:_}})),v=new ye;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,w)=>e(_,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new zw,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:_=>a(w=>({...w,events:{...w.events,..._}})),setSize:(_,w,b,M,C)=>{const A=l().camera,R={width:_,height:w,top:M||0,left:C||0,updateStyle:b};a(T=>({size:R,viewport:{...T.viewport,...p(A,d,R)}}))},setDpr:_=>a(w=>{const b=BR(_);return{viewport:{...w.viewport,dpr:b,initialDpr:w.viewport.initialDpr||b}}}),setFrameloop:(_="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,_!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,w,b)=>{const M=l().internal;return M.priority=M.priority+(w>0?1:0),M.subscribers.push({ref:_,priority:w,store:b}),M.subscribers=M.subscribers.sort((C,A)=>C.priority-A.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(w>0?1:0),C.subscribers=C.subscribers.filter(A=>A.ref!==_))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:f,gl:d,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||f.dpr!==s){var p;r=l,s=f.dpr,O8(a,l),d.setPixelRatio(f.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let im,U8=new Set,V8=new Set,W8=new Set;function Ov(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ff(n,e){switch(n){case"before":return Ov(U8,e);case"after":return Ov(V8,e);case"tail":return Ov(W8,e)}}let Nv,zv;function Fv(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Nv=e.internal.subscribers,im=0;im<Nv.length;im++)zv=Nv[im],zv.ref.current(zv.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function H8(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,ff("before",l);for(const d of n.values()){var f;r=d.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=Fv(l,r))}if(ff("after",l),t===0)return ff("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,f=1){var d;if(!l)return n.forEach(h=>o(h.store.getState()),f);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function a(l,f=!0,d,h){if(f&&ff("before",l),d)Fv(l,d,h);else for(const p of n.values())Fv(l,p.store.getState());f&&ff("after",l)}return{loop:s,invalidate:o,advance:a}}function $R(){const n=L.useContext(HR);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Po(n=t=>t,e){return $R()(n,e)}function a0(n,e=0){const t=$R(),i=t.getState().internal.subscribe,r=NR(n);return qd(()=>i(r,e,t),[e,i,t]),null}const T2=new WeakMap;function GR(n,e){return function(t,...i){let r=T2.get(t);return r||(r=new t,T2.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,I8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>r.dispose==null?void 0:r.dispose())}}function Nf(n,e,t,i){const r=Array.isArray(e)?e:[e],s=M8(GR(t,i),[n,...r],{equal:Jt.equ});return Array.isArray(e)?s:s[0]}Nf.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return E8(GR(t),[n,...i])};Nf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return T8([n,...t])};const Kc=new Map,{invalidate:C2,advance:A2}=H8(Kc),{reconciler:fg,applyProps:sc}=A8(Kc,N8),oc={objects:"shallow",strict:!1},$8=(n,e)=>{const t=typeof n=="function"?n(e):n;return WR(t)?t:new vw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function G8(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function j8(n){const e=Kc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||B8(C2,A2),o=t||fg.createContainer(s,Pc.ConcurrentRoot,null,!1,null,"",r,null);e||Kc.set(n,{fiber:o,store:s});let a,l=!1,f;return{configure(d={}){let{gl:h,size:p,scene:m,events:g,onCreated:v,shadows:x=!1,linear:_=!1,flat:w=!1,legacy:b=!1,orthographic:M=!1,frameloop:C="always",dpr:A=[1,2],performance:R,raycaster:T,camera:D,onPointerMissed:k}=d,O=s.getState(),$=O.gl;O.gl||O.set({gl:$=$8(h,n)});let W=O.raycaster;W||O.set({raycaster:W=new TR});const{params:V,...q}=T||{};if(Jt.equ(q,W,oc)||sc(W,{...q}),Jt.equ(V,W.params,oc)||sc(W,{params:{...W.params,...V}}),!O.camera||O.camera===f&&!Jt.equ(f,D,oc)){f=D;const K=D instanceof Nd,ue=K?D:M?new Xs(0,0,0,0,.1,1e3):new yn(75,0,.1,1e3);K||(ue.position.z=5,D&&sc(ue,D),!O.camera&&!(D!=null&&D.rotation)&&ue.lookAt(0,0,0)),O.set({camera:ue}),W.camera=ue}if(!O.scene){let K;m instanceof ug?K=m:(K=new ug,m&&sc(K,m)),O.set({scene:fc(K)})}if(!O.xr){var ee;const K=(ve,re)=>{const ze=s.getState();ze.frameloop!=="never"&&A2(ve,!0,ze,re)},ue=()=>{const ve=s.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?K:null),ve.gl.xr.isPresenting||C2(ve)},ge={connect(){const ve=s.getState().gl;ve.xr.addEventListener("sessionstart",ue),ve.xr.addEventListener("sessionend",ue)},disconnect(){const ve=s.getState().gl;ve.xr.removeEventListener("sessionstart",ue),ve.xr.removeEventListener("sessionend",ue)}};typeof((ee=$.xr)==null?void 0:ee.addEventListener)=="function"&&ge.connect(),O.set({xr:ge})}if($.shadowMap){const K=$.shadowMap.enabled,ue=$.shadowMap.type;if($.shadowMap.enabled=!!x,Jt.boo(x))$.shadowMap.type=Lf;else if(Jt.str(x)){var oe;const ge={basic:CA,percentage:jg,soft:Lf,variance:$a};$.shadowMap.type=(oe=ge[x])!=null?oe:Lf}else Jt.obj(x)&&Object.assign($.shadowMap,x);(K!==$.shadowMap.enabled||ue!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const N=DR();N&&("enabled"in N?N.enabled=!b:"legacyMode"in N&&(N.legacyMode=b)),sc($,{outputEncoding:_?3e3:3001,toneMapping:w?Gr:aw}),O.legacy!==b&&O.set(()=>({legacy:b})),O.linear!==_&&O.set(()=>({linear:_})),O.flat!==w&&O.set(()=>({flat:w})),h&&!Jt.fun(h)&&!WR(h)&&!Jt.equ(h,$,oc)&&sc($,h),g&&!O.events.handlers&&O.set({events:g(s)});const j=G8(n,p);return Jt.equ(j,O.size,oc)||O.setSize(j.width,j.height,j.updateStyle,j.top,j.left),A&&O.viewport.dpr!==BR(A)&&O.setDpr(A),O.frameloop!==C&&O.setFrameloop(C),O.onPointerMissed||O.set({onPointerMissed:k}),R&&!Jt.equ(R,O.performance,oc)&&O.set(K=>({performance:{...K.performance,...R}})),a=v,l=!0,this},render(d){return l||this.configure(),fg.updateContainer(L.createElement(X8,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){jR(n)}}}function X8({store:n,children:e,onCreated:t,rootElement:i}){return qd(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),L.createElement(HR.Provider,{value:n},e)}function jR(n,e){const t=Kc.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),fg.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),k8(r),Kc.delete(n),e&&e(n)}catch{}},500)})}}fg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});function vn(){return vn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vn.apply(this,arguments)}function O1(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?i=setTimeout(l,e-d):(i=null,t||(a=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var d=t&&!i;return i||(i=setTimeout(l,e)),d&&(a=n.apply(s,r),s=r=null),a};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}O1.debounce=O1;var Y8=O1;const P2=tu(Y8);function q8(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=L.useRef(!1);L.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,m,g]=L.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:b,top:M,width:C,height:A,bottom:R,right:T,x:D,y:k}=l.current.element.getBoundingClientRect(),O={left:b,top:M,width:C,height:A,bottom:R,right:T,x:D,y:k};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),h.current&&!Q8(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[w,d?P2(w,d):w,f?P2(w,f):w]},[a,r,f,d]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",g,{capture:!0,passive:!0})))}const _=w=>{!w||w===l.current.element||(v(),l.current.element=w,l.current.scrollContainers=XR(w),x())};return K8(g,!!t),Z8(m),L.useEffect(()=>{v(),x()},[t,g,m]),L.useEffect(()=>v,[]),[_,o,p]}function Z8(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function K8(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function XR(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...XR(n.parentElement)]}const J8=["x","y","top","bottom","left","right","width","height"],Q8=(n,e)=>J8.every(t=>n[t]===e[t]);var eV=Object.defineProperty,tV=Object.defineProperties,nV=Object.getOwnPropertyDescriptors,R2=Object.getOwnPropertySymbols,iV=Object.prototype.hasOwnProperty,rV=Object.prototype.propertyIsEnumerable,L2=(n,e,t)=>e in n?eV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,I2=(n,e)=>{for(var t in e||(e={}))iV.call(e,t)&&L2(n,t,e[t]);if(R2)for(var t of R2(e))rV.call(e,t)&&L2(n,t,e[t]);return n},sV=(n,e)=>tV(n,nV(e));function YR(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=YR(i,e,t);if(r)return r;i=e?null:i.sibling}}function qR(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Ww=qR(L.createContext(null));class ZR extends L.Component{render(){return L.createElement(Ww.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:k2,ReactCurrentDispatcher:D2}=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function oV(){const n=L.useContext(Ww);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const i of[k2==null?void 0:k2.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=YR(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function aV(){var n,e;const t=oV(),[i]=L.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==Ww&&!i.has(s)&&i.set(s,(e=D2==null?void 0:D2.current)==null?void 0:e.readContext(qR(s))),r=r.return}return i}function lV(){const n=aV();return L.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>L.createElement(e,null,L.createElement(t.Provider,sV(I2({},i),{value:n.get(t)}))),e=>L.createElement(ZR,I2({},e))),[n])}const Bv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function cV(n){const{handlePointer:e}=F8(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Bv).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,f]=Bv[o];t.addEventListener(l,a,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Bv[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const uV=L.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=cV,eventSource:a,eventPrefix:l,shadows:f,linear:d,flat:h,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:x,raycaster:_,camera:w,scene:b,onPointerMissed:M,onCreated:C,...A},R){L.useMemo(()=>C8(g8),[]);const T=lV(),[D,k]=q8({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=L.useRef(null),$=L.useRef(null);L.useImperativeHandle(R,()=>O.current);const W=NR(M),[V,q]=L.useState(!1),[ee,oe]=L.useState(!1);if(V)throw V;if(ee)throw ee;const N=L.useRef(null);qd(()=>{const Z=O.current;k.width>0&&k.height>0&&Z&&(N.current||(N.current=j8(Z)),N.current.configure({gl:s,events:o,shadows:f,linear:d,flat:h,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:x,raycaster:_,camera:w,scene:b,size:k,onPointerMissed:(...j)=>W.current==null?void 0:W.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?P8(a)?a.current:a:$.current),l&&j.setEvents({compute:(K,ue)=>{const ge=K[l+"X"],ve=K[l+"Y"];ue.pointer.set(ge/ue.size.width*2-1,-(ve/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),C==null||C(j)}}),N.current.render(L.createElement(T,null,L.createElement(zR,{set:oe},L.createElement(L.Suspense,{fallback:L.createElement(R8,{set:q})},e)))))}),L.useEffect(()=>{const Z=O.current;if(Z)return()=>jR(Z)},[]);const Y=a?"none":"auto";return L.createElement("div",vn({ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...r}},A),L.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},L.createElement("canvas",{ref:O,style:{display:"block"}},t)))}),fV=L.forwardRef(function(e,t){return L.createElement(ZR,null,L.createElement(uV,vn({},e,{ref:t})))});function dV(n,e,t){return Math.max(e,Math.min(n,t))}const ui={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function O2(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function N2(n,e,t,i=.15){return i===0?dV(n,e,t):n<e?-O2(e-n,t-e,i)+e:n>t?+O2(n-t,t-e,i)+t:n}function hV(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[N2(e,s,o,i),N2(t,a,l,r)]}function pV(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mV(n){var e=pV(n,"string");return typeof e=="symbol"?e:String(e)}function Ii(n,e,t){return e=mV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function cn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z2(Object(t),!0).forEach(function(i){Ii(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const KR={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function F2(n){return n?n[0].toUpperCase()+n.slice(1):""}const gV=["enter","leave"];function yV(n=!1,e){return n&&!gV.includes(e)}function vV(n,e="",t=!1){const i=KR[n],r=i&&i[e]||e;return"on"+F2(n)+F2(r)+(yV(t,r)?"Capture":"")}const xV=["gotpointercapture","lostpointercapture"];function _V(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=xV.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function wV(n,e=""){const t=KR[n],i=t&&t[e]||e;return n+i}function l0(n){return"touches"in n}function JR(n){return l0(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function SV(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function bV(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function QR(n){return l0(n)?bV(n)[0]:n}function MV(n){return SV(n).map(e=>e.identifier)}function Uv(n){const e=QR(n);return l0(n)?e.identifier:e.pointerId}function B2(n){const e=QR(n);return[e.clientX,e.clientY]}function EV(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function dg(n,...e){return typeof n=="function"?n(...e):n}function TV(){}function CV(...n){return n.length===0?TV:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function U2(n,e){return Object.assign({},e,n||{})}const AV=32;class PV{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?dg(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,EV(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const A=t._delta.map(Math.abs);ui.addTo(t._distance,A)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,f]=i.threshold,{_step:d,values:h}=t;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(a)>=f&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=f&&Math.sign(a)*f)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[A,R]=h;p[0]=d[0]!==!1?A-d[0]:0,p[1]=d[1]!==!1?R-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=dg(i.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[v,x]=t.offset,[[_,w],[b,M]]=t._bounds;t.overflow=[v<_?-1:v>w?1:0,x<b?-1:x>M?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=hV(t._bounds,t.offset,C),t.delta=ui.sub(t.offset,m),this.computeMovement(),g&&(!t.last||s>AV)){t.delta=ui.sub(t.offset,m);const A=t.delta.map(Math.abs);ui.addTo(t.distance,A),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[A[0]/s,A[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(cn(cn(cn({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function RV([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class LV extends PV{constructor(...e){super(...e),Ii(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ui.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ui.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[JR(e)]:i.axisThreshold;t.axis=RV(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const IV=n=>n,V2=.15,eL={enabled(n=!0){return n},eventOptions(n,e,t){return cn(cn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[V2,V2];case!1:return[0,0];default:return ui.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ui.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||IV},threshold(n){return ui.toVector(n,0)}},kV=0,Zd=cn(cn({},eL),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=kV){return n},bounds(n={}){if(typeof n=="function")return s=>Zd.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),W2={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class DV extends LV{constructor(...e){super(...e),Ii(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Zd.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=Uv(e),i._pointerActive=!0,this.computeValues(B2(e)),this.computeInitial(),t.preventScrollAxis&&JR(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=Uv(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=B2(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ui.sub(s,t._values),this.computeValues(s)),ui.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=Uv(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[f,d]=t._movement,[h,p]=i.swipe.velocity,[m,g]=i.swipe.distance,v=i.swipe.duration;if(t.elapsedTime<v){const x=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);x>h&&Math.abs(f)>m&&(t.swipe[0]=Math.sign(a)),_>p&&Math.abs(d)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,OV(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=W2[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,ui.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in W2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function OV(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Kd=typeof window<"u"&&window.document&&window.document.createElement;function tL(){return Kd&&"ontouchstart"in window}function NV(){return tL()||Kd&&window.navigator.maxTouchPoints>1}function zV(){return Kd&&"onpointerdown"in window}function FV(){return Kd&&"exitPointerLock"in window.document}function BV(){try{return"constructor"in GestureEvent}catch{return!1}}const _r={isBrowser:Kd,gesture:BV(),touch:tL(),touchscreen:NV(),pointer:zV(),pointerLock:FV()},UV=250,VV=180,WV=.5,HV=50,$V=250,GV=10,H2={mouse:0,touch:0,pen:8},jV=cn(cn({},Zd),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&_r.pointerLock,_r.touch&&t?"touch":this.pointerLock?"mouse":_r.pointer&&!r?"pointer":_r.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?UV:void 0,!(!_r.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=ui.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=WV,distance:e=HV,duration:t=$V}={}){return{velocity:this.transform(ui.toVector(n)),distance:this.transform(ui.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return VV;case!1:return 0;default:return n}},axisThreshold(n){return n?cn(cn({},H2),n):H2},keyboardDisplacement(n=GV){return n}});cn(cn({},eL),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!_r.touch&&_r.gesture)return"gesture";if(_r.touch&&i)return"touch";if(_r.touchscreen){if(_r.pointer)return"pointer";if(_r.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=U2(dg(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=U2(dg(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",ui.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});cn(cn({},Zd),{},{mouseOnly:(n=!0)=>n});cn(cn({},Zd),{},{mouseOnly:(n=!0)=>n});const nL=new Map,N1=new Map;function XV(n){nL.set(n.key,n.engine),N1.set(n.key,n.resolver)}const YV={key:"drag",engine:DV,resolver:jV};function qV(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function ZV(n,e){if(n==null)return{};var t=qV(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const KV={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=_r.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},JV=["target","eventOptions","window","enabled","transform"];function Dm(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Dm(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function QV(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,f=ZV(i,JV);if(t.shared=Dm({target:r,eventOptions:s,window:o,enabled:a,transform:l},KV),e){const d=N1.get(e);t[e]=Dm(cn({shared:t.shared},f),d)}else for(const d in f){const h=N1.get(d);h&&(t[d]=Dm(cn({shared:t.shared},f[d]),h))}return t}class iL{constructor(e,t){Ii(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=wV(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=cn(cn({},l),s);e.addEventListener(a,r,f);const d=()=>{e.removeEventListener(a,r,f),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class eW{constructor(){Ii(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class tW{constructor(e){Ii(this,"gestures",new Set),Ii(this,"_targetEventStore",new iL(this)),Ii(this,"gestureEventStores",{}),Ii(this,"gestureTimeoutStores",{}),Ii(this,"handlers",{}),Ii(this,"config",{}),Ii(this,"pointerIds",new Set),Ii(this,"touchIds",new Set),Ii(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),nW(this,e)}setEventIds(e){if(l0(e))return this.touchIds=new Set(MV(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=QV(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=$2(i,a.eventOptions,!!r);if(a.enabled){const f=nL.get(o);new f(this,e,o).bind(l)}}const s=$2(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](cn(cn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=CV(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=_V(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function ac(n,e){n.gestures.add(e),n.gestureEventStores[e]=new iL(n,e),n.gestureTimeoutStores[e]=new eW}function nW(n,e){e.drag&&ac(n,"drag"),e.wheel&&ac(n,"wheel"),e.scroll&&ac(n,"scroll"),e.move&&ac(n,"move"),e.pinch&&ac(n,"pinch"),e.hover&&ac(n,"hover")}const $2=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,f;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(f=o.passive)!==null&&f!==void 0?f:e.passive;let p=a?i:vV(i,r,d);t&&h&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function iW(n,e={},t,i){const r=H.useMemo(()=>new tW(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),H.useEffect(r.effect.bind(r)),H.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function rW(n,e){return XV(YV),iW({drag:n},e||{},"drag")}var sW=Object.defineProperty,oW=(n,e,t)=>e in n?sW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lt=(n,e,t)=>(oW(n,typeof e!="symbol"?e+"":e,t),t);const rm=new ou,G2=new Bs,aW=Math.cos(70*(Math.PI/180)),j2=(n,e)=>(n%e+e)%e;let lW=class extends vs{constructor(e,t){super(),lt(this,"object"),lt(this,"domElement"),lt(this,"enabled",!0),lt(this,"target",new z),lt(this,"minDistance",0),lt(this,"maxDistance",1/0),lt(this,"minZoom",0),lt(this,"maxZoom",1/0),lt(this,"minPolarAngle",0),lt(this,"maxPolarAngle",Math.PI),lt(this,"minAzimuthAngle",-1/0),lt(this,"maxAzimuthAngle",1/0),lt(this,"enableDamping",!1),lt(this,"dampingFactor",.05),lt(this,"enableZoom",!0),lt(this,"zoomSpeed",1),lt(this,"enableRotate",!0),lt(this,"rotateSpeed",1),lt(this,"enablePan",!0),lt(this,"panSpeed",1),lt(this,"screenSpacePanning",!0),lt(this,"keyPanSpeed",7),lt(this,"zoomToCursor",!1),lt(this,"autoRotate",!1),lt(this,"autoRotateSpeed",2),lt(this,"reverseOrbit",!1),lt(this,"reverseHorizontalOrbit",!1),lt(this,"reverseVerticalOrbit",!1),lt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),lt(this,"mouseButtons",{LEFT:Na.ROTATE,MIDDLE:Na.DOLLY,RIGHT:Na.PAN}),lt(this,"touches",{ONE:za.ROTATE,TWO:za.DOLLY_PAN}),lt(this,"target0"),lt(this,"position0"),lt(this,"zoom0"),lt(this,"_domElementKeyEvents",null),lt(this,"getPolarAngle"),lt(this,"getAzimuthalAngle"),lt(this,"setPolarAngle"),lt(this,"setAzimuthalAngle"),lt(this,"getDistance"),lt(this,"listenToKeyEvents"),lt(this,"stopListenToKeyEvents"),lt(this,"saveState"),lt(this,"reset"),lt(this,"update"),lt(this,"connect"),lt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=X=>{let _e=j2(X,2*Math.PI),Fe=d.phi;Fe<0&&(Fe+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let G=Math.abs(_e-Fe);2*Math.PI-G<G&&(_e<Fe?_e+=2*Math.PI:Fe+=2*Math.PI),h.phi=_e-Fe,i.update()},this.setAzimuthalAngle=X=>{let _e=j2(X,2*Math.PI),Fe=d.theta;Fe<0&&(Fe+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let G=Math.abs(_e-Fe);2*Math.PI-G<G&&(_e<Fe?_e+=2*Math.PI:Fe+=2*Math.PI),h.theta=_e-Fe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=X=>{X.addEventListener("keydown",et),this._domElementKeyEvents=X},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",et),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const X=new z,_e=new z(0,1,0),Fe=new fi().setFromUnitVectors(e.up,_e),G=Fe.clone().invert(),ae=new z,we=new fi,Le=2*Math.PI;return function(){const Mt=i.object.position;Fe.setFromUnitVectors(e.up,_e),G.copy(Fe).invert(),X.copy(Mt).sub(i.target),X.applyQuaternion(Fe),d.setFromVector3(X),i.autoRotate&&l===a.NONE&&V($()),i.enableDamping?(d.theta+=h.theta*i.dampingFactor,d.phi+=h.phi*i.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let Ft=i.minAzimuthAngle,Wt=i.maxAzimuthAngle;isFinite(Ft)&&isFinite(Wt)&&(Ft<-Math.PI?Ft+=Le:Ft>Math.PI&&(Ft-=Le),Wt<-Math.PI?Wt+=Le:Wt>Math.PI&&(Wt-=Le),Ft<=Wt?d.theta=Math.max(Ft,Math.min(Wt,d.theta)):d.theta=d.theta>(Ft+Wt)/2?Math.max(Ft,d.theta):Math.min(Wt,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&D||i.object.isOrthographicCamera?d.radius=K(d.radius):d.radius=K(d.radius*p),X.setFromSpherical(d),X.applyQuaternion(G),Mt.copy(i.target).add(X),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let pi=!1;if(i.zoomToCursor&&D){let Lt=null;if(i.object instanceof yn&&i.object.isPerspectiveCamera){const zn=X.length();Lt=K(zn*p);const Rn=zn-Lt;i.object.position.addScaledVector(R,Rn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const zn=new z(T.x,T.y,0);zn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),pi=!0;const Rn=new z(T.x,T.y,0);Rn.unproject(i.object),i.object.position.sub(Rn).add(zn),i.object.updateMatrixWorld(),Lt=X.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Lt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Lt).add(i.object.position):(rm.origin.copy(i.object.position),rm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(rm.direction))<aW?e.lookAt(i.target):(G2.setFromNormalAndCoplanarPoint(i.object.up,i.target),rm.intersectPlane(G2,i.target))))}else i.object instanceof Xs&&i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),pi=!0);return p=1,D=!1,pi||ae.distanceToSquared(i.object.position)>f||8*(1-we.dot(i.object.quaternion))>f?(i.dispatchEvent(r),ae.copy(i.object.position),we.copy(i.object.quaternion),pi=!1,!0):!1}})(),this.connect=X=>{X===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=X,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",$e),i.domElement.addEventListener("pointerdown",ht),i.domElement.addEventListener("pointercancel",Q),i.domElement.addEventListener("wheel",Te)},this.dispose=()=>{var X,_e,Fe,G,ae,we;(X=i.domElement)==null||X.removeEventListener("contextmenu",$e),(_e=i.domElement)==null||_e.removeEventListener("pointerdown",ht),(Fe=i.domElement)==null||Fe.removeEventListener("pointercancel",Q),(G=i.domElement)==null||G.removeEventListener("wheel",Te),(ae=i.domElement)==null||ae.ownerDocument.removeEventListener("pointermove",U),(we=i.domElement)==null||we.ownerDocument.removeEventListener("pointerup",I),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",et)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const f=1e-6,d=new L1,h=new L1;let p=1;const m=new z,g=new ye,v=new ye,x=new ye,_=new ye,w=new ye,b=new ye,M=new ye,C=new ye,A=new ye,R=new z,T=new ye;let D=!1;const k=[],O={};function $(){return 2*Math.PI/60/60*i.autoRotateSpeed}function W(){return Math.pow(.95,i.zoomSpeed)}function V(X){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=X:h.theta-=X}function q(X){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=X:h.phi-=X}const ee=(()=>{const X=new z;return function(Fe,G){X.setFromMatrixColumn(G,0),X.multiplyScalar(-Fe),m.add(X)}})(),oe=(()=>{const X=new z;return function(Fe,G){i.screenSpacePanning===!0?X.setFromMatrixColumn(G,1):(X.setFromMatrixColumn(G,0),X.crossVectors(i.object.up,X)),X.multiplyScalar(Fe),m.add(X)}})(),N=(()=>{const X=new z;return function(Fe,G){const ae=i.domElement;if(ae&&i.object instanceof yn&&i.object.isPerspectiveCamera){const we=i.object.position;X.copy(we).sub(i.target);let Le=X.length();Le*=Math.tan(i.object.fov/2*Math.PI/180),ee(2*Fe*Le/ae.clientHeight,i.object.matrix),oe(2*G*Le/ae.clientHeight,i.object.matrix)}else ae&&i.object instanceof Xs&&i.object.isOrthographicCamera?(ee(Fe*(i.object.right-i.object.left)/i.object.zoom/ae.clientWidth,i.object.matrix),oe(G*(i.object.top-i.object.bottom)/i.object.zoom/ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Y(X){i.object instanceof yn&&i.object.isPerspectiveCamera||i.object instanceof Xs&&i.object.isOrthographicCamera?p/=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Z(X){i.object instanceof yn&&i.object.isPerspectiveCamera||i.object instanceof Xs&&i.object.isOrthographicCamera?p*=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(X){if(!i.zoomToCursor||!i.domElement)return;D=!0;const _e=i.domElement.getBoundingClientRect(),Fe=X.clientX-_e.left,G=X.clientY-_e.top,ae=_e.width,we=_e.height;T.x=Fe/ae*2-1,T.y=-(G/we)*2+1,R.set(T.x,T.y,1).unproject(i.object).sub(i.object.position).normalize()}function K(X){return Math.max(i.minDistance,Math.min(i.maxDistance,X))}function ue(X){g.set(X.clientX,X.clientY)}function ge(X){j(X),M.set(X.clientX,X.clientY)}function ve(X){_.set(X.clientX,X.clientY)}function re(X){v.set(X.clientX,X.clientY),x.subVectors(v,g).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(V(2*Math.PI*x.x/_e.clientHeight),q(2*Math.PI*x.y/_e.clientHeight)),g.copy(v),i.update()}function ze(X){C.set(X.clientX,X.clientY),A.subVectors(C,M),A.y>0?Y(W()):A.y<0&&Z(W()),M.copy(C),i.update()}function Ie(X){w.set(X.clientX,X.clientY),b.subVectors(w,_).multiplyScalar(i.panSpeed),N(b.x,b.y),_.copy(w),i.update()}function Xe(X){j(X),X.deltaY<0?Z(W()):X.deltaY>0&&Y(W()),i.update()}function Ae(X){let _e=!1;switch(X.code){case i.keys.UP:N(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),_e=!0;break}_e&&(X.preventDefault(),i.update())}function Ye(){if(k.length==1)g.set(k[0].pageX,k[0].pageY);else{const X=.5*(k[0].pageX+k[1].pageX),_e=.5*(k[0].pageY+k[1].pageY);g.set(X,_e)}}function de(){if(k.length==1)_.set(k[0].pageX,k[0].pageY);else{const X=.5*(k[0].pageX+k[1].pageX),_e=.5*(k[0].pageY+k[1].pageY);_.set(X,_e)}}function le(){const X=k[0].pageX-k[1].pageX,_e=k[0].pageY-k[1].pageY,Fe=Math.sqrt(X*X+_e*_e);M.set(0,Fe)}function Me(){i.enableZoom&&le(),i.enablePan&&de()}function ke(){i.enableZoom&&le(),i.enableRotate&&Ye()}function Ce(X){if(k.length==1)v.set(X.pageX,X.pageY);else{const Fe=He(X),G=.5*(X.pageX+Fe.x),ae=.5*(X.pageY+Fe.y);v.set(G,ae)}x.subVectors(v,g).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(V(2*Math.PI*x.x/_e.clientHeight),q(2*Math.PI*x.y/_e.clientHeight)),g.copy(v)}function rt(X){if(k.length==1)w.set(X.pageX,X.pageY);else{const _e=He(X),Fe=.5*(X.pageX+_e.x),G=.5*(X.pageY+_e.y);w.set(Fe,G)}b.subVectors(w,_).multiplyScalar(i.panSpeed),N(b.x,b.y),_.copy(w)}function qe(X){const _e=He(X),Fe=X.pageX-_e.x,G=X.pageY-_e.y,ae=Math.sqrt(Fe*Fe+G*G);C.set(0,ae),A.set(0,Math.pow(C.y/M.y,i.zoomSpeed)),Y(A.y),M.copy(C)}function Ze(X){i.enableZoom&&qe(X),i.enablePan&&rt(X)}function bt(X){i.enableZoom&&qe(X),i.enableRotate&&Ce(X)}function ht(X){var _e,Fe;i.enabled!==!1&&(k.length===0&&((_e=i.domElement)==null||_e.ownerDocument.addEventListener("pointermove",U),(Fe=i.domElement)==null||Fe.ownerDocument.addEventListener("pointerup",I)),nt(X),X.pointerType==="touch"?Pe(X):xe(X))}function U(X){i.enabled!==!1&&(X.pointerType==="touch"?pe(X):Se(X))}function I(X){var _e,Fe,G;Be(X),k.length===0&&((_e=i.domElement)==null||_e.releasePointerCapture(X.pointerId),(Fe=i.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",U),(G=i.domElement)==null||G.ownerDocument.removeEventListener("pointerup",I)),i.dispatchEvent(o),l=a.NONE}function Q(X){Be(X)}function xe(X){let _e;switch(X.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case Na.DOLLY:if(i.enableZoom===!1)return;ge(X),l=a.DOLLY;break;case Na.ROTATE:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enablePan===!1)return;ve(X),l=a.PAN}else{if(i.enableRotate===!1)return;ue(X),l=a.ROTATE}break;case Na.PAN:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enableRotate===!1)return;ue(X),l=a.ROTATE}else{if(i.enablePan===!1)return;ve(X),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Se(X){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;re(X);break;case a.DOLLY:if(i.enableZoom===!1)return;ze(X);break;case a.PAN:if(i.enablePan===!1)return;Ie(X);break}}function Te(X){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(X.preventDefault(),i.dispatchEvent(s),Xe(X),i.dispatchEvent(o))}function et(X){i.enabled===!1||i.enablePan===!1||Ae(X)}function Pe(X){switch(Ke(X),k.length){case 1:switch(i.touches.ONE){case za.ROTATE:if(i.enableRotate===!1)return;Ye(),l=a.TOUCH_ROTATE;break;case za.PAN:if(i.enablePan===!1)return;de(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case za.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case za.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ke(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function pe(X){switch(Ke(X),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ce(X),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;rt(X),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ze(X),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;bt(X),i.update();break;default:l=a.NONE}}function $e(X){i.enabled!==!1&&X.preventDefault()}function nt(X){k.push(X)}function Be(X){delete O[X.pointerId];for(let _e=0;_e<k.length;_e++)if(k[_e].pointerId==X.pointerId){k.splice(_e,1);return}}function Ke(X){let _e=O[X.pointerId];_e===void 0&&(_e=new ye,O[X.pointerId]=_e),_e.set(X.pageX,X.pageY)}function He(X){const _e=X.pointerId===k[0].pointerId?k[1]:k[0];return O[_e.pointerId]}t!==void 0&&this.connect(t),this.update()}};const cW=L.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...f},d)=>{const h=Po(A=>A.invalidate),p=Po(A=>A.camera),m=Po(A=>A.gl),g=Po(A=>A.events),v=Po(A=>A.setEvents),x=Po(A=>A.set),_=Po(A=>A.get),w=Po(A=>A.performance),b=e||p,M=i||g.connected||m.domElement,C=L.useMemo(()=>new lW(b),[b]);return a0(()=>{C.enabled&&C.update()},-1),L.useEffect(()=>(s&&C.connect(s===!0?M:s),C.connect(M),()=>void C.dispose()),[s,M,t,C,h]),L.useEffect(()=>{const A=D=>{h(),t&&w.regress(),o&&o(D)},R=D=>{a&&a(D)},T=D=>{l&&l(D)};return C.addEventListener("change",A),C.addEventListener("start",R),C.addEventListener("end",T),()=>{C.removeEventListener("start",R),C.removeEventListener("end",T),C.removeEventListener("change",A)}},[o,a,l,C,h,v]),L.useEffect(()=>{if(n){const A=_().controls;return x({controls:C}),()=>x({controls:A})}},[n,C]),L.createElement("primitive",vn({ref:d,object:C,enableDamping:r},f))});var rL={exports:{}},uW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fW=uW,dW=fW;function sL(){}function oL(){}oL.resetWarningCache=sL;var hW=function(){function n(i,r,s,o,a,l){if(l!==dW){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:oL,resetWarningCache:sL};return t.PropTypes=t,t};rL.exports=hW();var pW=rL.exports;const Yt=tu(pW);function mW(){return hs(ys,{children:[hs("div",{className:"interface",children:["Charlieplexing Simulator:",Ge("br",{}),"Click on the background to power down all the wires.",Ge("br",{}),"Click on a SOURCE ('square') to cycle through its output states.",Ge("br",{}),"Click on a LED to power it up.",Ge("br",{}),"Zoom with the mouse wheel.",Ge("br",{}),"Pan with the shift+left_mouse.",Ge("br",{})]}),Ge("div",{className:"interface2",children:Ge("a",{href:"https://en.wikipedia.org/wiki/Charlieplexing",target:"_blank",children:"See Wikipedia Charlieplexing"})})]})}function gW(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function aL(...n){return e=>n.forEach(t=>gW(t,e))}function mu(...n){return L.useCallback(aL(...n),n)}const lL=L.forwardRef((n,e)=>{const{children:t,...i}=n,r=L.Children.toArray(t),s=r.find(yW);if(s){const o=s.props.children,a=r.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return L.createElement(z1,vn({},i,{ref:e}),L.isValidElement(o)?L.cloneElement(o,void 0,a):null)}return L.createElement(z1,vn({},i,{ref:e}),t)});lL.displayName="Slot";const z1=L.forwardRef((n,e)=>{const{children:t,...i}=n;return L.isValidElement(t)?L.cloneElement(t,{...vW(i,t.props),ref:e?aL(e,t.ref):t.ref}):L.Children.count(t)>1?L.Children.only(null):null});z1.displayName="SlotClone";const cL=({children:n})=>L.createElement(L.Fragment,null,n);function yW(n){return L.isValidElement(n)&&n.type===cL}function vW(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const xW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Tl=xW.reduce((n,e)=>{const t=L.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?lL:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),L.createElement(a,vn({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function _W(n,e){n&&kd.flushSync(()=>n.dispatchEvent(e))}const wW=L.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?MA.createPortal(L.createElement(Tl.div,vn({},r,{ref:e})),i):null}),SW=wW;var X2=Object.prototype.hasOwnProperty;function bd(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&bd(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(X2.call(n,t)&&++i&&!X2.call(e,t)||!(t in e)||!bd(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function Jd(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var c0=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};c0.prototype._test=function(e){var t=this.fn;try{Fc(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Fc(this.modifiers.slice(),t,this)(e)}catch{return!1}};c0.prototype._check=function(e){try{Fc(this.modifiers.slice(),this.fn,this)(e)}catch{if(Fc(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Fc(this.modifiers.slice(),this.fn,this)(e))throw null};c0.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){fL(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function uL(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Fc(n,e,t){if(n.length){var i=n.shift(),r=Fc(n,e,t);return i.perform(r,t)}else return uL(e)}function fL(n,e,t){if(n.length){var i=n.shift(),r=fL(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(uL(e,"async")(s))}}var bW=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},Hw=function(n){function e(t,i,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),ms=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ms.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new c0(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};ms.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new bW(t,e.simple,e.async)),this};ms.prototype._clone=function(){return new ms(this.chain.slice(),this.nextRuleModifiers.slice())};ms.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ms.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new Hw(i,e,r))}}),t};ms.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new Hw(t,e,i)}})};ms.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){dL(e,t.chain.slice(),i,r)})};function dL(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){dL(n,e,t,i)},function(s){i(new Hw(r,n,s))})}else t(n)}var Y2=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function MW(n,e){return e===void 0&&(e=!1),{simple:function(t){return Y2(t,e)||n.check(t)===void 0},async:function(t){return Y2(t,e)||n.testAsync(t)}}}function Ni(){return typeof Proxy<"u"?hL(new ms):F1(new ms)}var Md={};Ni.extend=function(n){Object.assign(Md,n)};Ni.clearCustomRules=function(){Md={}};function hL(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=hL(n._clone());if(i in hg)return r._applyModifier(hg[i],i);if(i in Md)return r._applyRule(Md[i],i);if(i in B1)return r._applyRule(B1[i],i)}})}function F1(n){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var f=F1(s._clone()),d=f._applyRule(r[o],o).apply(void 0,a);return d}}),s},t=e(B1,n),i=e(Md,t);return Object.keys(hg).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=F1(i._clone());return s._applyModifier(hg[r],r)}})}),i}var hg={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return sm(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(sm(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&sm(e).every(n)}},async:function(n){return function(e){return Promise.all(sm(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return q2(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return q2(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function q2(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function sm(n){return typeof n=="string"?n.split(""):n}var B1={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||EW;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return lc("string")},boolean:function(){return lc("boolean")},undefined:function(){return lc("undefined")},null:function(){return lc("null")},array:function(){return lc("array")},object:function(){return lc("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return TW(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:MW};function lc(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function EW(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function TW(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Ht="colors",xi="sizes",We="space",CW={gap:We,gridGap:We,columnGap:We,gridColumnGap:We,rowGap:We,gridRowGap:We,inset:We,insetBlock:We,insetBlockEnd:We,insetBlockStart:We,insetInline:We,insetInlineEnd:We,insetInlineStart:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,marginBlock:We,marginBlockEnd:We,marginBlockStart:We,marginInline:We,marginInlineEnd:We,marginInlineStart:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,paddingBlock:We,paddingBlockEnd:We,paddingBlockStart:We,paddingInline:We,paddingInlineEnd:We,paddingInlineStart:We,top:We,right:We,bottom:We,left:We,scrollMargin:We,scrollMarginTop:We,scrollMarginRight:We,scrollMarginBottom:We,scrollMarginLeft:We,scrollMarginX:We,scrollMarginY:We,scrollMarginBlock:We,scrollMarginBlockEnd:We,scrollMarginBlockStart:We,scrollMarginInline:We,scrollMarginInlineEnd:We,scrollMarginInlineStart:We,scrollPadding:We,scrollPaddingTop:We,scrollPaddingRight:We,scrollPaddingBottom:We,scrollPaddingLeft:We,scrollPaddingX:We,scrollPaddingY:We,scrollPaddingBlock:We,scrollPaddingBlockEnd:We,scrollPaddingBlockStart:We,scrollPaddingInline:We,scrollPaddingInlineEnd:We,scrollPaddingInlineStart:We,fontSize:"fontSizes",background:Ht,backgroundColor:Ht,backgroundImage:Ht,borderImage:Ht,border:Ht,borderBlock:Ht,borderBlockEnd:Ht,borderBlockStart:Ht,borderBottom:Ht,borderBottomColor:Ht,borderColor:Ht,borderInline:Ht,borderInlineEnd:Ht,borderInlineStart:Ht,borderLeft:Ht,borderLeftColor:Ht,borderRight:Ht,borderRightColor:Ht,borderTop:Ht,borderTopColor:Ht,caretColor:Ht,color:Ht,columnRuleColor:Ht,fill:Ht,outline:Ht,outlineColor:Ht,stroke:Ht,textDecorationColor:Ht,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:xi,minBlockSize:xi,maxBlockSize:xi,inlineSize:xi,minInlineSize:xi,maxInlineSize:xi,width:xi,minWidth:xi,maxWidth:xi,height:xi,minHeight:xi,maxHeight:xi,flexBasis:xi,gridTemplateColumns:xi,gridTemplateRows:xi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},AW=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,gu=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,AW))(e);return r in n?n[r]:n[r]=t(e,...i)}},ol=Symbol.for("sxs.internal"),$w=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),Z2=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:PW}=Object.prototype,U1=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),RW=/\s+(?![^()]*\))/,cc=n=>e=>n(...typeof e=="string"?String(e).split(RW):[e]),K2={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:cc((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:cc((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:cc((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:cc((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:cc((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:cc((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},Vv=/([\d.]+)([^]*)/,LW=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,IW=(n,e)=>n in kW&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${U1(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${U1(n)}:${i}fit-content`)+s):String(e),kW={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},oo=n=>n?n+"-":"",pL=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?oo(e)+(a.includes("$")?"":oo(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),DW=/\s*,\s*(?![^()]*\))/,OW=Object.prototype.toString,Rc=(n,e,t,i,r)=>{let s,o,a;const l=(f,d,h)=>{let p,m;const g=v=>{for(p in v){const w=p.charCodeAt(0)===64,b=w&&Array.isArray(v[p])?v[p]:[v[p]];for(m of b){const M=/[A-Z]/.test(_=p)?_:_.replace(/-[^]/g,A=>A[1].toUpperCase()),C=typeof m=="object"&&m&&m.toString===OW&&(!i.utils[M]||!d.length);if(M in i.utils&&!C){const A=i.utils[M];if(A!==o){o=A,g(A(m)),o=null;continue}}else if(M in K2){const A=K2[M];if(A!==a){a=A,g(A(m)),a=null;continue}}if(w&&(x=p.slice(1)in i.media?"@media "+i.media[p.slice(1)]:p,p=x.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(A,R,T,D,k,O)=>{const $=Vv.test(R),W=.0625*($?-1:1),[V,q]=$?[D,R]:[R,D];return"("+(T[0]==="="?"":T[0]===">"===$?"max-":"min-")+V+":"+(T[0]!=="="&&T.length===1?q.replace(Vv,(ee,oe,N)=>Number(oe)+W*(T===">"?1:-1)+N):q)+(k?") and ("+(k[0]===">"?"min-":"max-")+V+":"+(k.length===1?O.replace(Vv,(ee,oe,N)=>Number(oe)+W*(k===">"?-1:1)+N):O):"")+")"})),C){const A=w?h.concat(p):[...h],R=w?[...d]:LW(d,p.split(DW));s!==void 0&&r(J2(...s)),s=void 0,l(m,R,A)}else s===void 0&&(s=[[],d,h]),p=w||p.charCodeAt(0)!==36?p:`--${oo(i.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=C?m:typeof m=="number"?m&&M in NW?String(m)+"px":String(m):pL(IW(M,m??""),i.prefix,i.themeMap[M]),s[0].push(`${w?`${p} `:`${U1(p)}:`}${m}`)}}var x,_};g(f),s!==void 0&&r(J2(...s)),s=void 0};l(n,e,t)},J2=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,NW={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Q2=n=>String.fromCharCode(n+(n>25?39:97)),al=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=Q2(t%52)+i;return Q2(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),wf=["themed","global","styled","onevar","resonevar","allvar","inline"],zW=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},FW=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const f in e.rules)if(e.rules[f].group===s)return`--sxs{--sxs:${[...e.rules[f].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const f in a)delete a[f]}const r=Object(n).styleSheets||[];for(const a of r)if(zW(a)){for(let l=0,f=a.cssRules;f[l];++l){const d=Object(f[l]);if(d.type!==1)continue;const h=Object(f[l+1]);if(h.type!==4)continue;++l;const{cssText:p}=d;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),g=wf[m[0]];g&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[g]={group:h,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,f)=>({type:f,cssRules:[],insertRule(d,h){this.cssRules.splice(h,0,a(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,d=>d.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=wf.length-1;a>=0;--a){const l=wf[a];if(!o[l]){const f=wf[a+1],d=o[f]?o[f].index:s.cssRules.length;s.insertRule("@media{}",d),s.insertRule(`--sxs{--sxs:${a}}`,d),o[l]={group:s.cssRules[d+1],index:d,cache:new Set([a])}}BW(o[l])}};return i(),e},BW=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},df=Symbol(),UW=gu(),eT=(n,e)=>UW(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[ol]){i.type==null&&(i.type=r[ol].type);for(const s of r[ol].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(VW(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),WW(n,i,e)}),VW=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${oo(r.prefix)}c-${al(i)}`,o=[],a=[],l=Object.create(null),f=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){d=l,h=p,PW.call(d,h)||(l[p]="undefined");const m=n[p];for(const g in m){const v={[p]:String(g)};String(g)==="undefined"&&f.push(p);const x=m[g],_=[v,x,!Z2(x)];o.push(_)}}var d,h;if(typeof e=="object"&&e)for(const p of e){let{css:m,...g}=p;m=typeof m=="object"&&m||{};for(const x in g)g[x]=String(g[x]);const v=[g,m,!Z2(m)];a.push(v)}return[s,i,o,a,l,f]},WW=(n,e,t)=>{const[i,r,s,o]=HW(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(h=>{function p(){for(let m=0;m<p[df].length;m++){const[g,v]=p[df][m];h.rules[g].apply(v)}return p[df]=[],null}return p[df]=[],p.rules={},wf.forEach(m=>p.rules[m]={apply:g=>p[df].push([m,g])}),p})(t):null,l=(a||t).rules,f=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,d=h=>{h=typeof h=="object"&&h||$W;const{css:p,...m}=h,g={};for(const _ in s)if(delete m[_],_ in h){let w=h[_];typeof w=="object"&&w?g[_]={"@initial":s[_],...w}:(w=String(w),g[_]=w!=="undefined"||o.has(_)?w:s[_])}else g[_]=s[_];const v=new Set([...r]);for(const[_,w,b,M]of e.composers){t.rules.styled.cache.has(_)||(t.rules.styled.cache.add(_),Rc(w,[`.${_}`],[],n,R=>{l.styled.apply(R)}));const C=tT(b,g,n.media),A=tT(M,g,n.media,!0);for(const R of C)if(R!==void 0)for(const[T,D,k]of R){const O=`${_}-${al(D)}-${T}`;v.add(O);const $=(k?t.rules.resonevar:t.rules.onevar).cache,W=k?l.resonevar:l.onevar;$.has(O)||($.add(O),Rc(D,[`.${O}`],[],n,V=>{W.apply(V)}))}for(const R of A)if(R!==void 0)for(const[T,D]of R){const k=`${_}-${al(D)}-${T}`;v.add(k),t.rules.allvar.cache.has(k)||(t.rules.allvar.cache.add(k),Rc(D,[`.${k}`],[],n,O=>{l.allvar.apply(O)}))}}if(typeof p=="object"&&p){const _=`${i}-i${al(p)}-css`;v.add(_),t.rules.inline.cache.has(_)||(t.rules.inline.cache.add(_),Rc(p,[`.${_}`],[],n,w=>{l.inline.apply(w)}))}for(const _ of String(h.className||"").trim().split(/\s+/))_&&v.add(_);const x=m.className=[...v].join(" ");return{type:e.type,className:x,selector:f,props:m,toString:()=>x,deferredInjector:a}};return $w(d,{className:i,selector:f,[ol]:e,toString:()=>(t.rules.styled.cache.has(i)||d(),i)})},HW=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const f=o[l];(i[l]===void 0||f!=="undefined"||a.includes(f))&&(i[l]=f)}}return[e,t,i,new Set(r)]},tT=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,f=0,d=!1;for(l in s){const h=s[l];let p=e[l];if(p!==h){if(typeof p!="object"||!p)continue e;{let m,g,v=0;for(const x in p){if(h===String(p[x])){if(x!=="@initial"){const _=x.slice(1);(g=g||[]).push(_ in t?t[_]:x.replace(/^@media ?/,"")),d=!0}f+=v,m=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(r[f]=r[f]||[]).push([i?"cv":`${l}-${s[l]}`,o,d])}return r},$W={},GW=gu(),jW=(n,e)=>GW(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=al(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}Rc(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return $w(i,{toString:i})}),XW=gu(),YW=(n,e)=>XW(n,()=>t=>{const i=`${oo(n.prefix)}k-${al(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Rc(t,[],[],n,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return $w(r,{get name(){return r()},toString:r})}),qW=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+oo(this.prefix)+oo(this.scale)+this.token}toString(){return this.computedValue}},ZW=gu(),KW=(n,e)=>ZW(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${oo(n.prefix)}t-${al(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const f in i[l]){const d=`--${oo(n.prefix)}${l}-${f}`,h=pL(String(i[l][f]),n.prefix,l);s[l][f]=new qW(f,h,l,n.prefix),o.push(`${d}:${h}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),JW=gu(),QW=gu(),eH=n=>{const e=(t=>{let i=!1;const r=JW(t,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,f=typeof s.theme=="object"&&s.theme||{},d={prefix:o,media:a,theme:f,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...CW},utils:typeof s.utils=="object"&&s.utils||{}},h=FW(l),p={css:eT(d,h),globalCss:jW(d,h),keyframes:YW(d,h),createTheme:KW(d,h),reset(){h.reset(),p.theme.toString()},theme:{},sheet:h,config:d,prefix:o,getCssText:h.toString,toString:h.toString};return String(p.theme=p.createTheme(f)),p});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>QW(t,()=>{const r=eT(t,i);return(...s)=>{const o=r(...s),a=o[ol].type,l=H.forwardRef((f,d)=>{const h=f&&f.as||a,{props:p,deferredInjector:m}=o(f);return delete p.as,p.ref=d,m?H.createElement(H.Fragment,null,H.createElement(h,p),H.createElement(m,null)):H.createElement(h,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[ol]=o[ol],l}}))(e),e};function Us(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function mL(n,e=[]){let t=[];function i(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];function f(h){const{scope:p,children:m,...g}=h,v=(p==null?void 0:p[n][l])||a,x=L.useMemo(()=>g,Object.values(g));return L.createElement(v.Provider,{value:x},m)}function d(h,p){const m=(p==null?void 0:p[n][l])||a,g=L.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,d]}const r=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,tH(r,...e)]}function tH(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:f})=>{const h=l(s)[`__scope${f}`];return{...a,...h}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function yu(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function nH(n,e=globalThis==null?void 0:globalThis.document){const t=yu(n);L.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const V1="dismissableLayer.update",iH="dismissableLayer.pointerDownOutside",rH="dismissableLayer.focusOutside";let nT;const sH=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oH=L.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...f}=n,d=L.useContext(sH),[h,p]=L.useState(null),m=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=L.useState({}),v=mu(e,T=>p(T)),x=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(_),b=h?x.indexOf(h):-1,M=d.layersWithOutsidePointerEventsDisabled.size>0,C=b>=w,A=aH(T=>{const D=T.target,k=[...d.branches].some(O=>O.contains(D));!C||k||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},m),R=lH(T=>{const D=T.target;[...d.branches].some(O=>O.contains(D))||(o==null||o(T),a==null||a(T),T.defaultPrevented||l==null||l())},m);return nH(T=>{b===d.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),L.useEffect(()=>{if(h)return i&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(nT=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),iT(),()=>{i&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=nT)}},[h,m,i,d]),L.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),iT())},[h,d]),L.useEffect(()=>{const T=()=>g({});return document.addEventListener(V1,T),()=>document.removeEventListener(V1,T)},[]),L.createElement(Tl.div,vn({},f,{ref:v,style:{pointerEvents:M?C?"auto":"none":void 0,...n.style},onFocusCapture:Us(n.onFocusCapture,R.onFocusCapture),onBlurCapture:Us(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Us(n.onPointerDownCapture,A.onPointerDownCapture)}))});function aH(n,e=globalThis==null?void 0:globalThis.document){const t=yu(n),i=L.useRef(!1),r=L.useRef(()=>{});return L.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let d=function(){gL(iH,t,f,{discrete:!0})};var l=d;const f={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function lH(n,e=globalThis==null?void 0:globalThis.document){const t=yu(n),i=L.useRef(!1);return L.useEffect(()=>{const r=s=>{s.target&&!i.current&&gL(rH,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function iT(){const n=new CustomEvent(V1);document.dispatchEvent(n)}function gL(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?_W(r,s):r.dispatchEvent(s)}const Jc=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},cH=eD["useId".toString()]||(()=>{});let uH=0;function fH(n){const[e,t]=L.useState(cH());return Jc(()=>{n||t(i=>i??String(uH++))},[n]),n||(e?`radix-${e}`:"")}const dH=["top","right","bottom","left"],ia=Math.min,Xi=Math.max,pg=Math.round,om=Math.floor,ra=n=>({x:n,y:n}),hH={left:"right",right:"left",bottom:"top",top:"bottom"},pH={start:"end",end:"start"};function W1(n,e,t){return Xi(n,ia(e,t))}function ao(n,e){return typeof n=="function"?n(e):n}function lo(n){return n.split("-")[0]}function vu(n){return n.split("-")[1]}function Gw(n){return n==="x"?"y":"x"}function jw(n){return n==="y"?"height":"width"}function xu(n){return["top","bottom"].includes(lo(n))?"y":"x"}function Xw(n){return Gw(xu(n))}function mH(n,e,t){t===void 0&&(t=!1);const i=vu(n),r=Xw(n),s=jw(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=mg(o)),[o,mg(o)]}function gH(n){const e=mg(n);return[H1(n),e,H1(e)]}function H1(n){return n.replace(/start|end/g,e=>pH[e])}function yH(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function vH(n,e,t,i){const r=vu(n);let s=yH(lo(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(H1)))),s}function mg(n){return n.replace(/left|right|bottom|top/g,e=>hH[e])}function xH(n){return{top:0,right:0,bottom:0,left:0,...n}}function yL(n){return typeof n!="number"?xH(n):{top:n,right:n,bottom:n,left:n}}function gg(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function rT(n,e,t){let{reference:i,floating:r}=n;const s=xu(e),o=Xw(e),a=jw(o),l=lo(e),f=s==="y",d=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,p=i[a]/2-r[a]/2;let m;switch(l){case"top":m={x:d,y:i.y-r.height};break;case"bottom":m={x:d,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:h};break;case"left":m={x:i.x-r.width,y:h};break;default:m={x:i.x,y:i.y}}switch(vu(e)){case"start":m[o]-=p*(t&&f?-1:1);break;case"end":m[o]+=p*(t&&f?-1:1);break}return m}const _H=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:d,y:h}=rT(f,i,l),p=i,m={},g=0;for(let v=0;v<a.length;v++){const{name:x,fn:_}=a[v],{x:w,y:b,data:M,reset:C}=await _({x:d,y:h,initialPlacement:i,placement:p,strategy:r,middlewareData:m,rects:f,platform:o,elements:{reference:n,floating:e}});if(d=w??d,h=b??h,m={...m,[x]:{...m[x],...M}},C&&g<=50){g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(f=C.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):C.rects),{x:d,y:h}=rT(f,p,l)),v=-1;continue}}return{x:d,y:h,placement:p,strategy:r,middlewareData:m}};async function Ed(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=ao(e,n),g=yL(m),x=a[p?h==="floating"?"reference":"floating":h],_=gg(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(x)))==null||t?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:d,strategy:l})),w=h==="floating"?{...o.floating,x:i,y:r}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},C=gg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:b,strategy:l}):w);return{top:(_.top-C.top+g.top)/M.y,bottom:(C.bottom-_.bottom+g.bottom)/M.y,left:(_.left-C.left+g.left)/M.x,right:(C.right-_.right+g.right)/M.x}}const sT=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:f,padding:d=0}=ao(n,e)||{};if(f==null)return{};const h=yL(d),p={x:t,y:i},m=Xw(r),g=jw(m),v=await o.getDimensions(f),x=m==="y",_=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",M=s.reference[g]+s.reference[m]-p[m]-s.floating[g],C=p[m]-s.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let R=A?A[b]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=a.floating[b]||s.floating[g]);const T=M/2-C/2,D=R/2-v[g]/2-1,k=ia(h[_],D),O=ia(h[w],D),$=k,W=R-v[g]-O,V=R/2-v[g]/2+T,q=W1($,V,W),ee=!l.arrow&&vu(r)!=null&&V!=q&&s.reference[g]/2-(V<$?k:O)-v[g]/2<0,oe=ee?V<$?V-$:V-W:0;return{[m]:p[m]+oe,data:{[m]:q,centerOffset:V-q-oe,...ee&&{alignmentOffset:oe}},reset:ee}}}),wH=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=ao(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=lo(r),w=lo(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(f.floating)),M=p||(w||!v?[mg(a)]:gH(a));!p&&g!=="none"&&M.push(...vH(a,v,g,b));const C=[a,...M],A=await Ed(e,x),R=[];let T=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&R.push(A[_]),h){const $=mH(r,o,b);R.push(A[$[0]],A[$[1]])}if(T=[...T,{placement:r,overflows:R}],!R.every($=>$<=0)){var D,k;const $=(((D=s.flip)==null?void 0:D.index)||0)+1,W=C[$];if(W)return{data:{index:$,overflows:T},reset:{placement:W}};let V=(k=T.filter(q=>q.overflows[0]<=0).sort((q,ee)=>q.overflows[1]-ee.overflows[1])[0])==null?void 0:k.placement;if(!V)switch(m){case"bestFit":{var O;const q=(O=T.map(ee=>[ee.placement,ee.overflows.filter(oe=>oe>0).reduce((oe,N)=>oe+N,0)]).sort((ee,oe)=>ee[1]-oe[1])[0])==null?void 0:O[0];q&&(V=q);break}case"initialPlacement":V=a;break}if(r!==V)return{reset:{placement:V}}}return{}}}};function oT(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function aT(n){return dH.some(e=>n[e]>=0)}const SH=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=ao(n,e);switch(i){case"referenceHidden":{const s=await Ed(e,{...r,elementContext:"reference"}),o=oT(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aT(o)}}}case"escaped":{const s=await Ed(e,{...r,altBoundary:!0}),o=oT(s,t.floating);return{data:{escapedOffsets:o,escaped:aT(o)}}}default:return{}}}}};async function bH(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=lo(t),a=vu(t),l=xu(t)==="y",f=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=ao(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:p*f}:{x:p*f,y:m*d}}const MH=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await bH(e,n);return{x:t+r.x,y:i+r.y,data:r}}}},EH=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:_,y:w}=x;return{x:_,y:w}}},...l}=ao(n,e),f={x:t,y:i},d=await Ed(e,l),h=xu(lo(r)),p=Gw(h);let m=f[p],g=f[h];if(s){const x=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=m+d[x],b=m-d[_];m=W1(w,m,b)}if(o){const x=h==="y"?"top":"left",_=h==="y"?"bottom":"right",w=g+d[x],b=g-d[_];g=W1(w,g,b)}const v=a.fn({...e,[p]:m,[h]:g});return{...v,data:{x:v.x-t,y:v.y-i}}}}},TH=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:f=!0}=ao(n,e),d={x:t,y:i},h=xu(r),p=Gw(h);let m=d[p],g=d[h];const v=ao(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=p==="y"?"height":"width",M=s.reference[p]-s.floating[b]+x.mainAxis,C=s.reference[p]+s.reference[b]-x.mainAxis;m<M?m=M:m>C&&(m=C)}if(f){var _,w;const b=p==="y"?"width":"height",M=["top","left"].includes(lo(r)),C=s.reference[h]-s.floating[b]+(M&&((_=o.offset)==null?void 0:_[h])||0)+(M?0:x.crossAxis),A=s.reference[h]+s.reference[b]+(M?0:((w=o.offset)==null?void 0:w[h])||0)-(M?x.crossAxis:0);g<C?g=C:g>A&&(g=A)}return{[p]:m,[h]:g}}}},CH=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=ao(n,e),l=await Ed(e,a),f=lo(t),d=vu(t),h=xu(t)==="y",{width:p,height:m}=i.floating;let g,v;f==="top"||f==="bottom"?(g=f,v=d===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(v=f,g=d==="end"?"top":"bottom");const x=m-l[g],_=p-l[v],w=!e.middlewareData.shift;let b=x,M=_;if(h){const A=p-l.left-l.right;M=d||w?ia(_,A):A}else{const A=m-l.top-l.bottom;b=d||w?ia(x,A):A}if(w&&!d){const A=Xi(l.left,0),R=Xi(l.right,0),T=Xi(l.top,0),D=Xi(l.bottom,0);h?M=p-2*(A!==0||R!==0?A+R:Xi(l.left,l.right)):b=m-2*(T!==0||D!==0?T+D:Xi(l.top,l.bottom))}await o({...e,availableWidth:M,availableHeight:b});const C=await r.getDimensions(s.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function sa(n){return vL(n)?(n.nodeName||"").toLowerCase():"#document"}function er(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ho(n){var e;return(e=(vL(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function vL(n){return n instanceof Node||n instanceof er(n).Node}function co(n){return n instanceof Element||n instanceof er(n).Element}function gs(n){return n instanceof HTMLElement||n instanceof er(n).HTMLElement}function lT(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof er(n).ShadowRoot}function Qd(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Ar(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function AH(n){return["table","td","th"].includes(sa(n))}function Yw(n){const e=qw(),t=Ar(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function PH(n){let e=Qc(n);for(;gs(e)&&!u0(e);){if(Yw(e))return e;e=Qc(e)}return null}function qw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function u0(n){return["html","body","#document"].includes(sa(n))}function Ar(n){return er(n).getComputedStyle(n)}function f0(n){return co(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Qc(n){if(sa(n)==="html")return n;const e=n.assignedSlot||n.parentNode||lT(n)&&n.host||ho(n);return lT(e)?e.host:e}function xL(n){const e=Qc(n);return u0(e)?n.ownerDocument?n.ownerDocument.body:n.body:gs(e)&&Qd(e)?e:xL(e)}function Td(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=xL(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=er(r);return s?e.concat(o,o.visualViewport||[],Qd(r)?r:[],o.frameElement&&t?Td(o.frameElement):[]):e.concat(r,Td(r,[],t))}function _L(n){const e=Ar(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=gs(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=pg(t)!==s||pg(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function Zw(n){return co(n)?n:n.contextElement}function Bc(n){const e=Zw(n);if(!gs(e))return ra(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=_L(e);let o=(s?pg(t.width):t.width)/i,a=(s?pg(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RH=ra(0);function wL(n){const e=er(n);return!qw()||!e.visualViewport?RH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function LH(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==er(n)?!1:e}function yl(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=Zw(n);let o=ra(1);e&&(i?co(i)&&(o=Bc(i)):o=Bc(n));const a=LH(s,t,i)?wL(s):ra(0);let l=(r.left+a.x)/o.x,f=(r.top+a.y)/o.y,d=r.width/o.x,h=r.height/o.y;if(s){const p=er(s),m=i&&co(i)?er(i):i;let g=p.frameElement;for(;g&&i&&m!==p;){const v=Bc(g),x=g.getBoundingClientRect(),_=Ar(g),w=x.left+(g.clientLeft+parseFloat(_.paddingLeft))*v.x,b=x.top+(g.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,f*=v.y,d*=v.x,h*=v.y,l+=w,f+=b,g=er(g).frameElement}}return gg({width:d,height:h,x:l,y:f})}function IH(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=gs(t),s=ho(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=ra(1);const l=ra(0);if((r||!r&&i!=="fixed")&&((sa(t)!=="body"||Qd(s))&&(o=f0(t)),gs(t))){const f=yl(t);a=Bc(t),l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function kH(n){return Array.from(n.getClientRects())}function SL(n){return yl(ho(n)).left+f0(n).scrollLeft}function DH(n){const e=ho(n),t=f0(n),i=n.ownerDocument.body,r=Xi(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Xi(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+SL(n);const a=-t.scrollTop;return Ar(i).direction==="rtl"&&(o+=Xi(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function OH(n,e){const t=er(n),i=ho(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const f=qw();(!f||f&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function NH(n,e){const t=yl(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=gs(n)?Bc(n):ra(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,f=i*s.y;return{width:o,height:a,x:l,y:f}}function cT(n,e,t){let i;if(e==="viewport")i=OH(n,t);else if(e==="document")i=DH(ho(n));else if(co(e))i=NH(e,t);else{const r=wL(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return gg(i)}function bL(n,e){const t=Qc(n);return t===e||!co(t)||u0(t)?!1:Ar(t).position==="fixed"||bL(t,e)}function zH(n,e){const t=e.get(n);if(t)return t;let i=Td(n,[],!1).filter(a=>co(a)&&sa(a)!=="body"),r=null;const s=Ar(n).position==="fixed";let o=s?Qc(n):n;for(;co(o)&&!u0(o);){const a=Ar(o),l=Yw(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Qd(o)&&!l&&bL(n,o))?i=i.filter(d=>d!==o):r=a,o=Qc(o)}return e.set(n,i),i}function FH(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?zH(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((f,d)=>{const h=cT(e,d,r);return f.top=Xi(h.top,f.top),f.right=ia(h.right,f.right),f.bottom=ia(h.bottom,f.bottom),f.left=Xi(h.left,f.left),f},cT(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function BH(n){return _L(n)}function UH(n,e,t){const i=gs(e),r=ho(e),s=t==="fixed",o=yl(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ra(0);if(i||!i&&!s)if((sa(e)!=="body"||Qd(r))&&(a=f0(e)),i){const f=yl(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&(l.x=SL(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function uT(n,e){return!gs(n)||Ar(n).position==="fixed"?null:e?e(n):n.offsetParent}function ML(n,e){const t=er(n);if(!gs(n))return t;let i=uT(n,e);for(;i&&AH(i)&&Ar(i).position==="static";)i=uT(i,e);return i&&(sa(i)==="html"||sa(i)==="body"&&Ar(i).position==="static"&&!Yw(i))?t:i||PH(n)||t}const VH=async function(n){let{reference:e,floating:t,strategy:i}=n;const r=this.getOffsetParent||ML,s=this.getDimensions;return{reference:UH(e,await r(t),i),floating:{x:0,y:0,...await s(t)}}};function WH(n){return Ar(n).direction==="rtl"}const HH={convertOffsetParentRelativeRectToViewportRelativeRect:IH,getDocumentElement:ho,getClippingRect:FH,getOffsetParent:ML,getElementRects:VH,getClientRects:kH,getDimensions:BH,getScale:Bc,isElement:co,isRTL:WH};function $H(n,e){let t=null,i;const r=ho(n);function s(){clearTimeout(i),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:f,top:d,width:h,height:p}=n.getBoundingClientRect();if(a||e(),!h||!p)return;const m=om(d),g=om(r.clientWidth-(f+h)),v=om(r.clientHeight-(d+p)),x=om(f),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-x+"px",threshold:Xi(0,ia(1,l))||1};let b=!0;function M(C){const A=C[0].intersectionRatio;if(A!==l){if(!b)return o();A?o(!1,A):i=setTimeout(()=>{o(!1,1e-7)},100)}b=!1}try{t=new IntersectionObserver(M,{...w,root:r.ownerDocument})}catch{t=new IntersectionObserver(M,w)}t.observe(n)}return o(!0),s}function GH(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,f=Zw(n),d=r||s?[...f?Td(f):[],...Td(e)]:[];d.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const h=f&&a?$H(f,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(_=>{let[w]=_;w&&w.target===f&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),t()}),f&&!l&&m.observe(f),m.observe(e));let g,v=l?yl(n):null;l&&x();function x(){const _=yl(n);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&t(),v=_,g=requestAnimationFrame(x)}return t(),()=>{d.forEach(_=>{r&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const jH=(n,e,t)=>{const i=new Map,r={platform:HH,...t},s={...r.platform,_c:i};return _H(n,e,{...r,platform:s})},XH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?sT({element:i.current,padding:r}).fn(t):{}:i?sT({element:i,padding:r}).fn(t):{}}}};var Om=typeof document<"u"?L.useLayoutEffect:L.useEffect;function yg(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!yg(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!yg(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function EL(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function fT(n,e){const t=EL(n);return Math.round(e*t)/t}function dT(n){const e=L.useRef(n);return Om(()=>{e.current=n}),e}function YH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:f}=n,[d,h]=L.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=L.useState(i);yg(p,i)||m(i);const[g,v]=L.useState(null),[x,_]=L.useState(null),w=L.useCallback(ee=>{ee!=A.current&&(A.current=ee,v(ee))},[v]),b=L.useCallback(ee=>{ee!==R.current&&(R.current=ee,_(ee))},[_]),M=s||g,C=o||x,A=L.useRef(null),R=L.useRef(null),T=L.useRef(d),D=dT(l),k=dT(r),O=L.useCallback(()=>{if(!A.current||!R.current)return;const ee={placement:e,strategy:t,middleware:p};k.current&&(ee.platform=k.current),jH(A.current,R.current,ee).then(oe=>{const N={...oe,isPositioned:!0};$.current&&!yg(T.current,N)&&(T.current=N,kd.flushSync(()=>{h(N)}))})},[p,e,t,k]);Om(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[f]);const $=L.useRef(!1);Om(()=>($.current=!0,()=>{$.current=!1}),[]),Om(()=>{if(M&&(A.current=M),C&&(R.current=C),M&&C){if(D.current)return D.current(M,C,O);O()}},[M,C,O,D]);const W=L.useMemo(()=>({reference:A,floating:R,setReference:w,setFloating:b}),[w,b]),V=L.useMemo(()=>({reference:M,floating:C}),[M,C]),q=L.useMemo(()=>{const ee={position:t,left:0,top:0};if(!V.floating)return ee;const oe=fT(V.floating,d.x),N=fT(V.floating,d.y);return a?{...ee,transform:"translate("+oe+"px, "+N+"px)",...EL(V.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:oe,top:N}},[t,a,V.floating,d.x,d.y]);return L.useMemo(()=>({...d,update:O,refs:W,elements:V,floatingStyles:q}),[d,O,W,V,q])}const qH=L.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return L.createElement(Tl.svg,vn({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:L.createElement("polygon",{points:"0,0 30,0 15,10"}))}),ZH=qH;function KH(n){const[e,t]=L.useState(void 0);return Jc(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,f=Array.isArray(l)?l[0]:l;o=f.inlineSize,a=f.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const TL="Popper",[CL,AL]=mL(TL),[JH,PL]=CL(TL),QH=n=>{const{__scopePopper:e,children:t}=n,[i,r]=L.useState(null);return L.createElement(JH,{scope:e,anchor:i,onAnchorChange:r},t)},e$="PopperAnchor",t$=L.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=PL(e$,t),o=L.useRef(null),a=mu(e,o);return L.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:L.createElement(Tl.div,vn({},r,{ref:a}))}),RL="PopperContent",[n$,i$]=CL(RL),r$=L.forwardRef((n,e)=>{var t,i,r,s,o,a,l,f;const{__scopePopper:d,side:h="bottom",sideOffset:p=0,align:m="center",alignOffset:g=0,arrowPadding:v=0,avoidCollisions:x=!0,collisionBoundary:_=[],collisionPadding:w=0,sticky:b="partial",hideWhenDetached:M=!1,updatePositionStrategy:C="optimized",onPlaced:A,...R}=n,T=PL(RL,d),[D,k]=L.useState(null),O=mu(e,ke=>k(ke)),[$,W]=L.useState(null),V=KH($),q=(t=V==null?void 0:V.width)!==null&&t!==void 0?t:0,ee=(i=V==null?void 0:V.height)!==null&&i!==void 0?i:0,oe=h+(m!=="center"?"-"+m:""),N=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},Y=Array.isArray(_)?_:[_],Z=Y.length>0,j={padding:N,boundary:Y.filter(l$),altBoundary:Z},{refs:K,floatingStyles:ue,placement:ge,isPositioned:ve,middlewareData:re}=YH({strategy:"fixed",placement:oe,whileElementsMounted:(...ke)=>GH(...ke,{animationFrame:C==="always"}),elements:{reference:T.anchor},middleware:[MH({mainAxis:p+ee,alignmentAxis:g}),x&&EH({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?TH():void 0,...j}),x&&wH({...j}),CH({...j,apply:({elements:ke,rects:Ce,availableWidth:rt,availableHeight:qe})=>{const{width:Ze,height:bt}=Ce.reference,ht=ke.floating.style;ht.setProperty("--radix-popper-available-width",`${rt}px`),ht.setProperty("--radix-popper-available-height",`${qe}px`),ht.setProperty("--radix-popper-anchor-width",`${Ze}px`),ht.setProperty("--radix-popper-anchor-height",`${bt}px`)}}),$&&XH({element:$,padding:v}),c$({arrowWidth:q,arrowHeight:ee}),M&&SH({strategy:"referenceHidden",...j})]}),[ze,Ie]=LL(ge),Xe=yu(A);Jc(()=>{ve&&(Xe==null||Xe())},[ve,Xe]);const Ae=(r=re.arrow)===null||r===void 0?void 0:r.x,Ye=(s=re.arrow)===null||s===void 0?void 0:s.y,de=((o=re.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[le,Me]=L.useState();return Jc(()=>{D&&Me(window.getComputedStyle(D).zIndex)},[D]),L.createElement("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ve?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(a=re.transformOrigin)===null||a===void 0?void 0:a.x,(l=re.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},L.createElement(n$,{scope:d,placedSide:ze,onArrowChange:W,arrowX:Ae,arrowY:Ye,shouldHideArrow:de},L.createElement(Tl.div,vn({"data-side":ze,"data-align":Ie},R,{ref:O,style:{...R.style,animation:ve?void 0:"none",opacity:(f=re.hide)!==null&&f!==void 0&&f.referenceHidden?0:void 0}}))))}),s$="PopperArrow",o$={top:"bottom",right:"left",bottom:"top",left:"right"},a$=L.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=i$(s$,i),o=o$[s.placedSide];return L.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},L.createElement(ZH,vn({},r,{ref:t,style:{...r.style,display:"block"}})))});function l$(n){return n!==null}const c$=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,o;const{placement:a,rects:l,middlewareData:f}=e,h=((t=f.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=h?0:n.arrowWidth,m=h?0:n.arrowHeight,[g,v]=LL(a),x={start:"0%",center:"50%",end:"100%"}[v],_=((i=(r=f.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+p/2,w=((s=(o=f.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let b="",M="";return g==="bottom"?(b=h?x:`${_}px`,M=`${-m}px`):g==="top"?(b=h?x:`${_}px`,M=`${l.floating.height+m}px`):g==="right"?(b=`${-m}px`,M=h?x:`${w}px`):g==="left"&&(b=`${l.floating.width+m}px`,M=h?x:`${w}px`),{data:{x:b,y:M}}}});function LL(n){const[e,t="center"]=n.split("-");return[e,t]}const u$=QH,f$=t$,d$=r$,h$=a$;function p$(n,e){return L.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const IL=n=>{const{present:e,children:t}=n,i=m$(e),r=typeof t=="function"?t({present:i.isPresent}):L.Children.only(t),s=mu(i.ref,r.ref);return typeof t=="function"||i.isPresent?L.cloneElement(r,{ref:s}):null};IL.displayName="Presence";function m$(n){const[e,t]=L.useState(),i=L.useRef({}),r=L.useRef(n),s=L.useRef("none"),o=n?"mounted":"unmounted",[a,l]=p$(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const f=am(i.current);s.current=a==="mounted"?f:"none"},[a]),Jc(()=>{const f=i.current,d=r.current;if(d!==n){const p=s.current,m=am(f);n?l("MOUNT"):m==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),Jc(()=>{if(e){const f=h=>{const m=am(i.current).includes(h.animationName);h.target===e&&m&&kd.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(s.current=am(i.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(f=>{f&&(i.current=getComputedStyle(f)),t(f)},[])}}function am(n){return(n==null?void 0:n.animationName)||"none"}function g$({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=y$({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:i,a=yu(t),l=L.useCallback(f=>{if(s){const h=typeof f=="function"?f(n):f;h!==n&&a(h)}else r(f)},[s,n,r,a]);return[o,l]}function y$({defaultProp:n,onChange:e}){const t=L.useState(n),[i]=t,r=L.useRef(i),s=yu(e);return L.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const v$=L.forwardRef((n,e)=>L.createElement(Tl.span,vn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),x$=v$,[d0,Jq]=mL("Tooltip",[AL]),h0=AL(),_$="TooltipProvider",$1="tooltip.open",[Qq,Kw]=d0(_$),Jw="Tooltip",[w$,p0]=d0(Jw),S$=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=Kw(Jw,n.__scopeTooltip),f=h0(e),[d,h]=L.useState(null),p=fH(),m=L.useRef(0),g=o??l.disableHoverableContent,v=a??l.delayDuration,x=L.useRef(!1),[_=!1,w]=g$({prop:i,defaultProp:r,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent($1))):l.onClose(),s==null||s(R)}}),b=L.useMemo(()=>_?x.current?"delayed-open":"instant-open":"closed",[_]),M=L.useCallback(()=>{window.clearTimeout(m.current),x.current=!1,w(!0)},[w]),C=L.useCallback(()=>{window.clearTimeout(m.current),w(!1)},[w]),A=L.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0)},v)},[v,w]);return L.useEffect(()=>()=>window.clearTimeout(m.current),[]),L.createElement(u$,f,L.createElement(w$,{scope:e,contentId:p,open:_,stateAttribute:b,trigger:d,onTriggerChange:h,onTriggerEnter:L.useCallback(()=>{l.isOpenDelayed?A():M()},[l.isOpenDelayed,A,M]),onTriggerLeave:L.useCallback(()=>{g?C():window.clearTimeout(m.current)},[C,g]),onOpen:M,onClose:C,disableHoverableContent:g},t))},hT="TooltipTrigger",b$=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=p0(hT,t),s=Kw(hT,t),o=h0(t),a=L.useRef(null),l=mu(e,a,r.onTriggerChange),f=L.useRef(!1),d=L.useRef(!1),h=L.useCallback(()=>f.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),L.createElement(f$,vn({asChild:!0},o),L.createElement(Tl.button,vn({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:l,onPointerMove:Us(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:Us(n.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:Us(n.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Us(n.onFocus,()=>{f.current||r.onOpen()}),onBlur:Us(n.onBlur,r.onClose),onClick:Us(n.onClick,r.onClose)})))}),M$="TooltipPortal",[eZ,E$]=d0(M$,{forceMount:void 0}),Cd="TooltipContent",T$=L.forwardRef((n,e)=>{const t=E$(Cd,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,o=p0(Cd,n.__scopeTooltip);return L.createElement(IL,{present:i||o.open},o.disableHoverableContent?L.createElement(kL,vn({side:r},s,{ref:e})):L.createElement(C$,vn({side:r},s,{ref:e})))}),C$=L.forwardRef((n,e)=>{const t=p0(Cd,n.__scopeTooltip),i=Kw(Cd,n.__scopeTooltip),r=L.useRef(null),s=mu(e,r),[o,a]=L.useState(null),{trigger:l,onClose:f}=t,d=r.current,{onPointerInTransitChange:h}=i,p=L.useCallback(()=>{a(null),h(!1)},[h]),m=L.useCallback((g,v)=>{const x=g.currentTarget,_={x:g.clientX,y:g.clientY},w=I$(_,x.getBoundingClientRect()),b=k$(_,w),M=D$(v.getBoundingClientRect()),C=N$([...b,...M]);a(C),h(!0)},[h]);return L.useEffect(()=>()=>p(),[p]),L.useEffect(()=>{if(l&&d){const g=x=>m(x,d),v=x=>m(x,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[l,d,m,p]),L.useEffect(()=>{if(o){const g=v=>{const x=v.target,_={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),b=!O$(_,o);w?p():b&&(p(),f())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,o,f,p]),L.createElement(kL,vn({},n,{ref:s}))}),[A$,P$]=d0(Jw,{isInside:!1}),kL=L.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=p0(Cd,t),f=h0(t),{onClose:d}=l;return L.useEffect(()=>(document.addEventListener($1,d),()=>document.removeEventListener($1,d)),[d]),L.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),L.createElement(oH,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d},L.createElement(d$,vn({"data-state":l.stateAttribute},f,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),L.createElement(cL,null,i),L.createElement(A$,{scope:t,isInside:!0},L.createElement(x$,{id:l.contentId,role:"tooltip"},r||i))))}),R$="TooltipArrow",L$=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=h0(t);return P$(R$,t).isInside?null:L.createElement(h$,vn({},r,i,{ref:e}))});function I$(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function k$(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function D$(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function O$(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,f=e[o].x,d=e[o].y;l>i!=d>i&&t<(f-a)*(i-l)/(d-l)+a&&(r=!r)}return r}function N$(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),z$(e)}function z$(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const F$=S$,B$=b$,U$=T$,V$=L$;function W$(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function $t(n,e){if(n==null)return{};var t=W$(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let on;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(on||(on={}));const H$={[on.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[on.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[on.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[on.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[on.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[on.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[on.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[on.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[on.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[on.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[on.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function DL(n,e,...t){const[i,...r]=H$[e](...t);console[n]("LEVA: "+i,...r)}const Ws=DL.bind(null,"warn"),$$=DL.bind(null,"log"),G$=["value"],j$=["schema"],X$=["value"],OL=[],vl={};function pT(n){let{value:e}=n,t=$t(n,G$);for(let i of OL){const r=i(e,t);if(r)return r}}function po(n,e){let{schema:t}=e,i=$t(e,j$);if(n in vl){Ws(on.ALREADY_REGISTERED_TYPE,n);return}OL.push((r,s)=>t(r,s)&&n),vl[n]=i}function Wv(n,e,t,i){const{normalize:r}=vl[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=$t(e,X$);return{value:s,settings:o}}function Y$(n,e,t,i,r,s){const{sanitize:o}=vl[n];return o?o(e,t,i,r,s):e}function mT(n,e,t){const{format:i}=vl[n];return i?i(e,t):e}function q$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function at(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(t),!0).forEach(function(i){q$(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gT(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const oa=(n,e,t)=>n>t?t:n<e?e:n,Z$=n=>{if(n===""||typeof n=="number")return n;try{const e=Ro(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},K$=Math.log(10);function yT(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/K$)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const vg=(n,e,t)=>t===e?0:(oa(n,e,t)-e)/(t-e),xg=(n,e,t)=>n*(t-e)+e,J$=()=>"_"+Math.random().toString(36).substr(2,9),vT=/\(([0-9+\-*/^ .]+)\)/,xT=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,_T=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,wT=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,ST=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,bT=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ro(n){if(isNaN(Number(n)))if(vT.test(n)){const e=n.replace(vT,(t,i)=>String(Ro(i)));return Ro(e)}else if(xT.test(n)){const e=n.replace(xT,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Ro(e)}else if(_T.test(n)){const e=n.replace(_T,(t,i,r)=>String(Number(i)*Number(r)));return Ro(e)}else if(wT.test(n)){const e=n.replace(wT,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Ro(e)}else if(ST.test(n)){const e=n.replace(ST,(t,i,r)=>String(Number(i)+Number(r)));return Ro(e)}else if(bT.test(n)){const e=n.replace(bT,(t,i,r)=>String(Number(i)-Number(r)));return Ro(e)}else return Number(n);return Number(n)}function Q$(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function e9(n,e){const t=at({},n);return e.forEach(i=>i in n&&delete t[i]),t}function t9(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function NL(n){return Object.prototype.toString.call(n)==="[object Object]"}const n9=n=>NL(n)&&Object.keys(n).length===0;let jr;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(jr||(jr={}));let Yr;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Yr||(Yr={}));const i9=["type","__customInput"],r9=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],s9=["type"];function zL(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:at({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:C,__customInput:A}=n,R=$t(n,i9);return zL(A,e,R,C)}const{render:o,label:a,optional:l,order:f=0,disabled:d,hint:h,onChange:p,onEditStart:m,onEditEnd:g,transient:v}=n,x=$t(n,r9),_=at({render:o,key:e,label:a??e,hint:h,transient:v??!!p,onEditStart:m,onEditEnd:g,disabled:d,optional:l,order:f},t);let{type:w}=x,b=$t(x,s9);if(w=i??w,w in jr)return{type:w,input:b,options:_};let M;return i&&NL(b)&&"value"in b?M=b.value:M=n9(b)?void 0:b,{type:w,input:M,options:at(at({},_),{},{onChange:p,optional:(r=_.optional)!==null&&r!==void 0?r:!1,disabled:(s=_.disabled)!==null&&s!==void 0?s:!1})}}function o9(n,e,t,i){const r=zL(n,e),{type:s,input:o,options:a}=r;if(s)return s in jr?r:{type:s,input:Wv(s,o,t,i),options:a};let l=pT(o);return l?{type:l,input:Wv(l,o,t,i),options:a}:(l=pT({value:o}),l?{type:l,input:Wv(l,{value:o},t,i),options:a}:!1)}function MT(n,e,t,i,r){const{value:s,type:o,settings:a}=n;n.value=FL({type:o,value:s,settings:a},e,t,i),n.fromPanel=r}const a9=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function FL({type:n,value:e,settings:t},i,r,s){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let a;try{a=Y$(n,o,t,e,r,s)}catch(l){throw new a9(`The value \`${i}\` did not result in a correct value.`,e,l)}return bd(a,e)?e:a}const BL=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),s&&o()}},UL=n=>n.shiftKey?5:n.altKey?1/5:1;function l9(n,e){const t=console.error;console.error=()=>{},MA.render(n,e),console.error=t}const c9=["value"],u9=["min","max"],f9=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},VL=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=oa(r,e,t);return i?s+i:s},d9=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},WL=n=>{let{value:e}=n,t=$t(n,c9);const{min:i=-1/0,max:r=1/0}=t,s=$t(t,u9);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=oa(o,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const f=l?yT(l)*10:yT(o);l=l||f/10;const d=Math.round(oa(Math.log10(1/f),0,2));return{value:a?o+a:o,settings:at({initialValue:o,step:l,pad:d,min:i,max:r,suffix:a},s)}},HL=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var $L=Object.freeze({__proto__:null,schema:f9,sanitize:VL,format:d9,normalize:WL,sanitizeStep:HL});function xn(){return xn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xn.apply(this,arguments)}const GL=L.createContext({});function hi(){return L.useContext(GL)}const Qw=L.createContext(null),jL=L.createContext(null),XL=L.createContext(null);function eh(){return L.useContext(jL)}function h9(){return L.useContext(XL)}const YL=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function lm(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const hf={$inputStyle:()=>n=>lm(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>lm(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>lm(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>lm(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ot,css:tZ,createTheme:p9,globalCss:m9,keyframes:nZ}=eH({prefix:"leva",theme:YL(),utils:at(at({},hf),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":hf.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":hf.$focusStyle()(n)}),$hover:n=>({"&:hover":hf.$hoverStyle()(n)}),$active:n=>({"&:active":hf.$activeStyle()(n)})})}),g9=m9({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function y9(n){const e=YL();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=p9(e);return{theme:e,className:t.className}}function Ks(n,e){const{theme:t}=L.useContext(Qw);if(!(n in t)||!(e in t[n]))return Ws(on.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const qL=ot("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),ZL=ot("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${qL}`]:{paddingLeft:0}}),v9=ot(ZL,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),x9=ot("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),_9=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],w9=["onUpdate"];function eS(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:f=0}=n,d=$t(n,_9);const{id:h,emitOnEditStart:p,emitOnEditEnd:m,disabled:g}=hi(),v=a||h,x=L.useRef(null),_=f>0,w=_?"textarea":"input",b=L.useCallback(A=>R=>{const T=R.currentTarget.value;A(T)},[]);H.useEffect(()=>{const A=x.current,R=b(T=>{i(T),m()});return A==null||A.addEventListener("blur",R),()=>A==null?void 0:A.removeEventListener("blur",R)},[b,i,m]);const M=L.useCallback(A=>{A.key==="Enter"&&b(i)(A)},[b,i]),C=Object.assign({as:w},_?{rows:f}:{},d);return H.createElement(x9,{textArea:_},e&&typeof e=="string"?H.createElement(ZL,null,e):e,H.createElement(qL,xn({levaType:o,ref:x,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(r),onFocus:()=>p(),onKeyPress:M,onKeyDown:s,disabled:g},C)))}function S9(n){let{onUpdate:e}=n,t=$t(n,w9);const i=L.useCallback(s=>e(Z$(s)),[e]),r=L.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return H.createElement(eS,xn({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const _g=ot("div",{}),G1=ot("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),b9=ot("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${G1}::after`]:{opacity:.6},[`${_g}:hover > & + ${G1}::after`]:{opacity:.6},[`${_g}:hover > & > svg`]:{opacity:1}}),KL=ot("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${_g}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),JL=ot("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${KL} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),QL=ot(JL,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),M9=ot("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),E9=ot("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),j1=ot("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),T9=ot("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${j1}`]:{pointerEvents:"auto"}}}}}),eI=ot("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),C9=ot("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),A9=ot(V$,{fill:"$toolTipBackground"});function tS({children:n}){const{className:e}=L.useContext(Qw);return H.createElement(SW,{className:e},n)}const P9=["align"];function R9(){const{id:n,disable:e,disabled:t}=hi();return H.createElement(H.Fragment,null,H.createElement(E9,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),H.createElement("label",{htmlFor:n+"__disable"}))}function L9(n){const{id:e,optional:t,hint:i}=hi(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return H.createElement(H.Fragment,null,t&&H.createElement(R9,null),i!==void 0?H.createElement(F$,null,H.createElement(B$,{asChild:!0},H.createElement(j1,xn({},r,n))),H.createElement(U$,{side:"top",sideOffset:2},H.createElement(C9,null,i,H.createElement(A9,null)))):H.createElement(j1,xn({},r,s,n)))}function Kr(n){let{align:e}=n,t=$t(n,P9);const{value:i,label:r,key:s,disabled:o}=hi(),{hideCopyButton:a}=h9(),l=!a&&s!==void 0,[f,d]=L.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),d(!0)}catch{Ws(on.CLIPBOARD_ERROR,{[s]:i})}};return H.createElement(M9,{align:e,onPointerLeave:()=>d(!1)},H.createElement(L9,t),l&&!o&&H.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},f?H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},H.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),H.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):H.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},H.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),H.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const I9=["toggled"],k9=ot("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function nS(n){let{toggled:e}=n,t=$t(n,I9);return H.createElement(k9,xn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),H.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const D9=["input"];function Pr(n){let{input:e}=n,t=$t(n,D9);return e?H.createElement(QL,t):H.createElement(JL,t)}function tI({value:n,type:e,settings:t,setValue:i}){const[r,s]=L.useState(mT(e,n,t)),o=L.useRef(n),a=L.useRef(t);a.current=t;const l=L.useCallback(d=>s(mT(e,d,a.current)),[e]),f=L.useCallback(d=>{try{i(d)}catch(h){const{type:p,previousValue:m}=h;if(p!=="LEVA_ERROR")throw h;l(m)}},[l,i]);return L.useEffect(()=>{bd(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:r,onChange:s,onUpdate:f}}function th(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=hi();return rW(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function O9(n){const e=L.useRef(null),t=L.useRef(null),i=L.useRef(!1);return L.useEffect(()=>{const r=BL(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),L.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function nI(){const n=L.useRef(null),e=L.useRef({x:0,y:0}),t=L.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const N9=["__refCount"],Hv=(n,e)=>{if(!n[e])return null;const t=n[e];return $t(t,N9)};function z9(n){const e=eh(),[t,i]=L.useState(Hv(e.getData(),n)),r=L.useCallback(f=>e.setValueAtPath(n,f,!0),[n,e]),s=L.useCallback(f=>e.setSettingsAtPath(n,f),[n,e]),o=L.useCallback(f=>e.disableInputAtPath(n,f),[n,e]),a=L.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=L.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return L.useEffect(()=>{i(Hv(e.getData(),n));const f=e.useStore.subscribe(d=>Hv(d.data,n),i,{equalityFn:Jd});return()=>f()},[e,n]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const F9=ot("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),iI=ot("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),X1=ot("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),rI=ot("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),sI=ot("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function B9({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const o=L.useRef(null),a=L.useRef(null),l=L.useRef(0),f=Ks("sizes","scrubberWidth"),d=th(({event:p,first:m,xy:[g],movement:[v],memo:x})=>{if(m){const{width:w,left:b}=o.current.getBoundingClientRect();l.current=w-parseFloat(f),x=(p==null?void 0:p.target)===a.current?n:xg((g-b)/w,e,t)}const _=x+xg(v/l.current,0,t-e);return i(HL(_,{step:r,initialValue:s})),x}),h=vg(n,e,t);return H.createElement(rI,xn({ref:o},d()),H.createElement(iI,null,H.createElement(sI,{style:{left:0,right:`${(1-h)*100}%`}})),H.createElement(X1,{ref:a,style:{left:`calc(${h} * (100% - ${f}))`}}))}const U9=H.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=L.useState(!1),o=th(({active:a,delta:[l],event:f,memo:d=0})=>(s(a),d+=l/2,Math.abs(d)>=1&&(e(h=>parseFloat(h)+Math.floor(d)*t*UL(f)),d=0),d));return H.createElement(v9,xn({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function oI({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&H.createElement(U9,{label:n,step:s.step,onUpdate:i,innerLabelTrim:o});return H.createElement(S9,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:a})}function V9(){const n=hi(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return H.createElement(Pr,{input:!0},H.createElement(Kr,null,e),H.createElement(F9,{hasRange:l},l&&H.createElement(B9,xn({value:parseFloat(t),onDrag:i},r)),H.createElement(oI,xn({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:W9}=$L,H9=$t($L,["sanitizeStep"]);var $9=at({component:V9},H9);const G9=(n,e)=>Ni().schema({options:Ni().passesAnyOf(Ni().object(),Ni().array())}).test(e),j9=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},X9=(n,{values:e})=>e.indexOf(n),Y9=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var q9=Object.freeze({__proto__:null,schema:G9,sanitize:j9,format:X9,normalize:Y9});const Z9=ot("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Y1=ot("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),K9=ot("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Y1}:focus + &`]:{$focusStyle:""},[`${Y1}:hover + &`]:{$hoverStyle:""}});function J9({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:o,values:a}=r,l=L.useRef();return e===a[n]&&(l.current=o[n]),H.createElement(Z9,null,H.createElement(Y1,{id:i,value:n,onChange:f=>t(a[Number(f.currentTarget.value)]),disabled:s},o.map((f,d)=>H.createElement("option",{key:f,value:d},f))),H.createElement(K9,null,l.current),H.createElement(nS,{toggled:!0}))}function Q9(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:o}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(J9,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:s}))}var e7=at({component:Q9},q9);const t7=n=>Ni().string().test(n),n7=n=>{if(typeof n!="string")throw Error("Invalid string");return n},i7=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var r7=Object.freeze({__proto__:null,schema:t7,sanitize:n7,normalize:i7});const s7=["displayValue","onUpdate","onChange","editable"],o7=ot("div",{whiteSpace:"pre-wrap"});function a7(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=$t(n,s7);return r?H.createElement(eS,xn({value:e,onUpdate:t,onChange:i},s)):H.createElement(o7,null,e)}function l7(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(a7,xn({displayValue:t,onUpdate:i,onChange:r},e)))}var c7=at({component:l7},r7);const u7=n=>Ni().boolean().test(n),f7=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var d7=Object.freeze({__proto__:null,schema:u7,sanitize:f7});const h7=ot("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function p7({value:n,onUpdate:e,id:t,disabled:i}){return H.createElement(h7,null,H.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),H.createElement("label",{htmlFor:t},H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function m7(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(p7,{value:e,onUpdate:t,id:r,disabled:i}))}var g7=at({component:m7},d7);const y7=["locked"];function v7({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const o=L.useRef(n[t]);o.current=n[t];const a=L.useCallback(f=>r({[t]:FL({type:"NUMBER",value:o.current,settings:i},f)}),[r,i,t]),l=tI({type:"NUMBER",value:n[t],settings:i,setValue:a});return H.createElement(oI,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:s})}const x7=ot("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function _7(n){let{locked:e}=n,t=$t(n,y7);return H.createElement("svg",xn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?H.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):H.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function iS({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=hi(),{lock:o,locked:a}=t;return H.createElement(x7,{withLock:o},o&&H.createElement(_7,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,f)=>H.createElement(v7,{id:f===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const aI=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=WL(at({value:o},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=i,t[s].pad=r)}return t},w7=["lock"],S7=["value"];function b7(n){const e=Ni().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function M7(n){return Array.isArray(n)?"array":"object"}function zf(n,e,t){return M7(n)===e?n:e==="array"?Object.values(n):t9(n,t)}const E7=(n,e,t)=>{const i=zf(n,"object",e.keys);for(let o in i)i[o]=VL(i[o],e[o]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const o=zf(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=i[a],f=o[a],d=f!==0?l/f:1;for(let h in o)h===a?s[a]=l:s[h]=o[h]*d}else s=at(at({},o),i)}return zf(s,e.format,e.keys)},T7=(n,e)=>zf(n,"object",e.keys),C7=n=>!!n&&("step"in n||"min"in n||"max"in n);function A7(n,e,t=[]){const{lock:i=!1}=e,r=$t(e,w7),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=zf(n,"object",o),l=C7(r)?o.reduce((d,h)=>Object.assign(d,{[h]:r}),{}):r,f=aI(a,l);return{value:s==="array"?n:a,settings:at(at({},f),{},{format:s,keys:o,lock:i,locked:!1})}}function lI(n){return{schema:b7(n.length),normalize:e=>{let{value:t}=e,i=$t(e,S7);return A7(t,i,n)},format:(e,t)=>T7(e,t),sanitize:(e,t,i)=>E7(e,t,i)}}var P7={grad:.9,turn:360,rad:360/(2*Math.PI)},Ns=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},$n=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},br=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},cI=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},ET=function(n){return{r:br(n.r,0,255),g:br(n.g,0,255),b:br(n.b,0,255),a:br(n.a)}},$v=function(n){return{r:$n(n.r),g:$n(n.g),b:$n(n.b),a:$n(n.a,3)}},R7=/^#([0-9a-f]{3,8})$/i,cm=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},uI=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},fI=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),f=s%6;return{r:255*[i,a,o,o,l,i][f],g:255*[l,i,i,a,o,o][f],b:255*[o,o,l,i,i,a][f],a:r}},TT=function(n){return{h:cI(n.h),s:br(n.s,0,100),l:br(n.l,0,100),a:br(n.a)}},CT=function(n){return{h:$n(n.h),s:$n(n.s),l:$n(n.l),a:$n(n.a,3)}},AT=function(n){return fI((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Ff=function(n){return{h:(e=uI(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},L7=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,I7=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k7=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,D7=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,q1={string:[[function(n){var e=R7.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?$n(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?$n(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=k7.exec(n)||D7.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:ET({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=L7.exec(n)||I7.exec(n);if(!e)return null;var t,i,r=TT({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(P7[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return AT(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Ns(e)&&Ns(t)&&Ns(i)?ET({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Ns(e)||!Ns(t)||!Ns(i))return null;var o=TT({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return AT(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Ns(e)||!Ns(t)||!Ns(i))return null;var o=function(a){return{h:cI(a.h),s:br(a.s,0,100),v:br(a.v,0,100),a:br(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return fI(o)},"hsv"]]},PT=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},dI=function(n){return typeof n=="string"?PT(n.trim(),q1.string):typeof n=="object"&&n!==null?PT(n,q1.object):[null,void 0]},O7=function(n){return dI(n)[1]},Gv=function(n,e){var t=Ff(n);return{h:t.h,s:br(t.s+100*e,0,100),l:t.l,a:t.a}},jv=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},RT=function(n,e){var t=Ff(n);return{h:t.h,s:t.s,l:br(t.l+100*e,0,100),a:t.a}},Z1=function(){function n(e){this.parsed=dI(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return $n(jv(this.rgba),2)},n.prototype.isDark=function(){return jv(this.rgba)<.5},n.prototype.isLight=function(){return jv(this.rgba)>=.5},n.prototype.toHex=function(){return e=$v(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?cm($n(255*s)):"","#"+cm(t)+cm(i)+cm(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return $v(this.rgba)},n.prototype.toRgbString=function(){return e=$v(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return CT(Ff(this.rgba))},n.prototype.toHslString=function(){return e=CT(Ff(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=uI(this.rgba),{h:$n(e.h),s:$n(e.s),v:$n(e.v),a:$n(e.a,3)};var e},n.prototype.invert=function(){return Si({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Si(Gv(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Si(Gv(this.rgba,-e))},n.prototype.grayscale=function(){return Si(Gv(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Si(RT(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Si(RT(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Si({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):$n(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Ff(this.rgba);return typeof e=="number"?Si({h:e,s:t.s,l:t.l,a:t.a}):$n(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Si(e).toHex()},n}(),Si=function(n){return n instanceof Z1?n:new Z1(n)},LT=[],N7=function(n){n.forEach(function(e){LT.indexOf(e)<0&&(e(Z1,q1),LT.push(e))})};function z7(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,f=i[this.toHex()];if(f)return f;if(o!=null&&o.closest){var d=this.toRgb(),h=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var g in t){var v=(a=d,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<h&&(h=v,p=g)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function _u(){return(_u=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function rS(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function K1(n){var e=L.useRef(n),t=L.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var eu=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Bf=function(n){return"touches"in n},J1=function(n){return n&&n.ownerDocument.defaultView||self},IT=function(n,e,t){var i=n.getBoundingClientRect(),r=Bf(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:eu((r.pageX-(i.left+J1(n).pageXOffset))/i.width),top:eu((r.pageY-(i.top+J1(n).pageYOffset))/i.height)}},kT=function(n){!Bf(n)&&n.preventDefault()},sS=H.memo(function(n){var e=n.onMove,t=n.onKey,i=rS(n,["onMove","onKey"]),r=L.useRef(null),s=K1(e),o=K1(t),a=L.useRef(null),l=L.useRef(!1),f=L.useMemo(function(){var m=function(x){kT(x),(Bf(x)?x.touches.length>0:x.buttons>0)&&r.current?s(IT(r.current,x,a.current)):v(!1)},g=function(){return v(!1)};function v(x){var _=l.current,w=J1(r.current),b=x?w.addEventListener:w.removeEventListener;b(_?"touchmove":"mousemove",m),b(_?"touchend":"mouseup",g)}return[function(x){var _=x.nativeEvent,w=r.current;if(w&&(kT(_),!function(M,C){return C&&!Bf(M)}(_,l.current)&&w)){if(Bf(_)){l.current=!0;var b=_.changedTouches||[];b.length&&(a.current=b[0].identifier)}w.focus(),s(IT(w,_,a.current)),v(!0)}},function(x){var _=x.which||x.keyCode;_<37||_>40||(x.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},v]},[o,s]),d=f[0],h=f[1],p=f[2];return L.useEffect(function(){return p},[p]),H.createElement("div",_u({},i,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:r,onKeyDown:h,tabIndex:0,role:"slider"}))}),nh=function(n){return n.filter(Boolean).join(" ")},oS=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=nh(["react-colorful__pointer",n.className]);return H.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},H.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},bi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},hI=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:bi(n.h),s:bi(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:bi(r/2),a:bi(i,2)}},Q1=function(n){var e=hI(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Xv=function(n){var e=hI(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},pI=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),f=s%6;return{r:bi(255*[i,a,o,o,l,i][f]),g:bi(255*[l,i,i,a,o,o][f]),b:bi(255*[o,o,l,i,i,a][f]),a:bi(r,2)}},mI=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:bi(60*(a<0?a+6:a)),s:bi(s?o/s*100:0),v:bi(s/255*100),a:r}},gI=H.memo(function(n){var e=n.hue,t=n.onChange,i=nh(["react-colorful__hue",n.className]);return H.createElement("div",{className:i},H.createElement(sS,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:eu(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":bi(e),"aria-valuemax":"360","aria-valuemin":"0"},H.createElement(oS,{className:"react-colorful__hue-pointer",left:e/360,color:Q1({h:e,s:100,v:100,a:1})})))}),yI=H.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:Q1({h:e.h,s:100,v:100,a:1})};return H.createElement("div",{className:"react-colorful__saturation",style:i},H.createElement(sS,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:eu(e.s+100*r.left,0,100),v:eu(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+bi(e.s)+"%, Brightness "+bi(e.v)+"%"},H.createElement(oS,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Q1(e)})))}),aS=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function vI(n,e,t){var i=K1(t),r=L.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=L.useRef({color:e,hsva:s});L.useEffect(function(){if(!n.equal(e,a.current.color)){var f=n.toHsva(e);a.current={hsva:f,color:e},o(f)}},[e,n]),L.useEffect(function(){var f;aS(s,a.current.hsva)||n.equal(f=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:f},i(f))},[s,n,i]);var l=L.useCallback(function(f){o(function(d){return Object.assign({},d,f)})},[]);return[s,l]}var F7=typeof window<"u"?L.useLayoutEffect:L.useEffect,B7=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},DT=new Map,xI=function(n){F7(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!DT.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,DT.set(e,t);var i=B7();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},U7=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=rS(n,["className","colorModel","color","onChange"]),a=L.useRef(null);xI(a);var l=vI(t,r,s),f=l[0],d=l[1],h=nh(["react-colorful",e]);return H.createElement("div",_u({},o,{ref:a,className:h}),H.createElement(yI,{hsva:f,onChange:d}),H.createElement(gI,{hue:f.h,onChange:d,className:"react-colorful__last-control"}))},V7=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+Xv(Object.assign({},t,{a:0}))+", "+Xv(Object.assign({},t,{a:1}))+")"},s=nh(["react-colorful__alpha",e]),o=bi(100*t.a);return H.createElement("div",{className:s},H.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),H.createElement(sS,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:eu(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},H.createElement(oS,{className:"react-colorful__alpha-pointer",left:t.a,color:Xv(t)})))},W7=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=rS(n,["className","colorModel","color","onChange"]),a=L.useRef(null);xI(a);var l=vI(t,r,s),f=l[0],d=l[1],h=nh(["react-colorful",e]);return H.createElement("div",_u({},o,{ref:a,className:h}),H.createElement(yI,{hsva:f,onChange:d}),H.createElement(gI,{hue:f.h,onChange:d}),H.createElement(V7,{hsva:f,onChange:d,className:"react-colorful__last-control"}))},H7={defaultColor:{r:0,g:0,b:0,a:1},toHsva:mI,fromHsva:pI,equal:aS},$7=function(n){return H.createElement(W7,_u({},n,{colorModel:H7}))},G7={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return mI({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=pI(n)).r,g:e.g,b:e.b};var e},equal:aS},j7=function(n){return H.createElement(U7,_u({},n,{colorModel:G7}))};function wu(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{f(i.next(d))}catch(h){o(h)}}function l(d){try{f(i.throw(d))}catch(h){o(h)}}function f(d){d.done?s(d.value):r(d.value).then(a,l)}f((i=i.apply(n,e||[])).next())})}function Su(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(d){return l([f,d])}}function l(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,r&&(s=f[0]&2?r.return:f[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,f[1])).done)return s;switch(r=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],r=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function X7(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function Y7(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(X7(arguments[e]));return n}var q7=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ih(n,e){var t=Z7(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Z7(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=q7.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var K7=[".DS_Store","Thumbs.db"];function J7(n){return wu(this,void 0,void 0,function(){return Su(this,function(e){return wg(n)&&Q7(n)?[2,iG(n.dataTransfer,n.type)]:eG(n)?[2,tG(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,nG(n)]:[2,[]]})})}function Q7(n){return wg(n.dataTransfer)}function eG(n){return wg(n)&&wg(n.target)}function wg(n){return typeof n=="object"&&n!==null}function tG(n){return e_(n.target.files).map(function(e){return ih(e)})}function nG(n){return wu(this,void 0,void 0,function(){var e;return Su(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return ih(i)})]}})})}function iG(n,e){return wu(this,void 0,void 0,function(){var t,i;return Su(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=e_(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(rG))]):[3,2];case 1:return i=r.sent(),[2,OT(_I(i))];case 2:return[2,OT(e_(n.files).map(function(s){return ih(s)}))]}})})}function OT(n){return n.filter(function(e){return K7.indexOf(e.name)===-1})}function e_(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function rG(n){if(typeof n.webkitGetAsEntry!="function")return NT(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?wI(e):NT(n)}function _I(n){return n.reduce(function(e,t){return Y7(e,Array.isArray(t)?_I(t):[t])},[])}function NT(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=ih(e);return Promise.resolve(t)}function sG(n){return wu(this,void 0,void 0,function(){return Su(this,function(e){return[2,n.isDirectory?wI(n):oG(n)]})})}function wI(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var o=this;e.readEntries(function(a){return wu(o,void 0,void 0,function(){var l,f,d;return Su(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=h.sent(),t(l),[3,4];case 3:return f=h.sent(),i(f),[3,4];case 4:return[3,6];case 5:d=Promise.all(a.map(sG)),r.push(d),s(),h.label=6;case 6:return[2]}})})},function(a){i(a)})}s()})}function oG(n){return wu(this,void 0,void 0,function(){return Su(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=ih(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var aG=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0};function zT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function FT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zT(Object(t),!0).forEach(function(i){SI(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zT(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function SI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BT(n,e){return fG(n)||uG(n,e)||cG(n,e)||lG()}function lG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cG(n,e){if(n){if(typeof n=="string")return UT(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return UT(n,e)}}function UT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function uG(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function fG(n){if(Array.isArray(n))return n}var dG="file-invalid-type",hG="file-too-large",pG="file-too-small",mG="too-many-files",gG=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:dG,message:"File type must be ".concat(t)}},VT=function(e){return{code:hG,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},WT=function(e){return{code:pG,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},yG={code:mG,message:"Too many files"};function bI(n,e){var t=n.type==="application/x-moz-file"||aG(n,e);return[t,t?null:gG(e)]}function MI(n,e,t){if(pf(n.size))if(pf(e)&&pf(t)){if(n.size>t)return[!1,VT(t)];if(n.size<e)return[!1,WT(e)]}else{if(pf(e)&&n.size<e)return[!1,WT(e)];if(pf(t)&&n.size>t)return[!1,VT(t)]}return[!0,null]}function pf(n){return n!=null}function vG(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=bI(a,t),f=BT(l,1),d=f[0],h=MI(a,i,r),p=BT(h,1),m=p[0];return d&&m})}function Sg(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function um(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function HT(n){n.preventDefault()}function xG(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function _G(n){return n.indexOf("Edge/")!==-1}function wG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xG(n)||_G(n)}function os(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!Sg(i)&&a&&a.apply(void 0,[i].concat(s)),Sg(i)})}}function SG(){return"showOpenFilePicker"in window}function bG(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return FT(FT({},e),{},SI({},t,[]))},{}):{}}]}function MG(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function EG(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var TG=["children"],CG=["open"],AG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],PG=["refKey","onChange","onClick"];function RG(n){return kG(n)||IG(n)||EI(n)||LG()}function LG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IG(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kG(n){if(Array.isArray(n))return t_(n)}function Yv(n,e){return NG(n)||OG(n,e)||EI(n,e)||DG()}function DG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EI(n,e){if(n){if(typeof n=="string")return t_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return t_(n,e)}}function t_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function OG(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function NG(n){if(Array.isArray(n))return n}function $T(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$T(Object(t),!0).forEach(function(i){n_(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$T(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function n_(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bg(n,e){if(n==null)return{};var t=zG(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function zG(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var lS=L.forwardRef(function(n,e){var t=n.children,i=bg(n,TG),r=CI(i),s=r.open,o=bg(r,CG);return L.useImperativeHandle(e,function(){return{open:s}},[s]),H.createElement(L.Fragment,null,t(sn(sn({},o),{},{open:s})))});lS.displayName="Dropzone";var TI={disabled:!1,getFilesFromEvent:J7,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};lS.defaultProps=TI;lS.propTypes={children:Yt.func,accept:Yt.oneOfType([Yt.string,Yt.arrayOf(Yt.string)]),multiple:Yt.bool,preventDropOnDocument:Yt.bool,noClick:Yt.bool,noKeyboard:Yt.bool,noDrag:Yt.bool,noDragEventsBubbling:Yt.bool,minSize:Yt.number,maxSize:Yt.number,maxFiles:Yt.number,disabled:Yt.bool,getFilesFromEvent:Yt.func,onFileDialogCancel:Yt.func,onFileDialogOpen:Yt.func,useFsAccessApi:Yt.bool,onDragEnter:Yt.func,onDragLeave:Yt.func,onDragOver:Yt.func,onDrop:Yt.func,onDropAccepted:Yt.func,onDropRejected:Yt.func,validator:Yt.func};var i_={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function CI(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=sn(sn({},TI),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,f=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,x=e.onFileDialogOpen,_=e.useFsAccessApi,w=e.preventDropOnDocument,b=e.noClick,M=e.noKeyboard,C=e.noDrag,A=e.noDragEventsBubbling,R=e.validator,T=L.useMemo(function(){return typeof x=="function"?x:GT},[x]),D=L.useMemo(function(){return typeof v=="function"?v:GT},[v]),k=L.useRef(null),O=L.useRef(null),$=L.useReducer(FG,i_),W=Yv($,2),V=W[0],q=W[1],ee=V.isFocused,oe=V.isFileDialogActive,N=V.draggedFiles,Y=L.useRef(typeof window<"u"&&window.isSecureContext&&_&&SG()),Z=function(){!Y.current&&oe&&setTimeout(function(){if(O.current){var Q=O.current.files;Q.length||(q({type:"closeDialog"}),D())}},300)};L.useEffect(function(){return window.addEventListener("focus",Z,!1),function(){window.removeEventListener("focus",Z,!1)}},[O,oe,D,Y]);var j=L.useRef([]),K=function(Q){k.current&&k.current.contains(Q.target)||(Q.preventDefault(),j.current=[])};L.useEffect(function(){return w&&(document.addEventListener("dragover",HT,!1),document.addEventListener("drop",K,!1)),function(){w&&(document.removeEventListener("dragover",HT),document.removeEventListener("drop",K))}},[k,w]);var ue=L.useCallback(function(I){I.preventDefault(),I.persist(),Ce(I),j.current=[].concat(RG(j.current),[I.target]),um(I)&&Promise.resolve(r(I)).then(function(Q){Sg(I)&&!A||(q({draggedFiles:Q,isDragActive:!0,type:"setDraggedFiles"}),f&&f(I))})},[r,f,A]),ge=L.useCallback(function(I){I.preventDefault(),I.persist(),Ce(I);var Q=um(I);if(Q&&I.dataTransfer)try{I.dataTransfer.dropEffect="copy"}catch{}return Q&&h&&h(I),!1},[h,A]),ve=L.useCallback(function(I){I.preventDefault(),I.persist(),Ce(I);var Q=j.current.filter(function(Se){return k.current&&k.current.contains(Se)}),xe=Q.indexOf(I.target);xe!==-1&&Q.splice(xe,1),j.current=Q,!(Q.length>0)&&(q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),um(I)&&d&&d(I))},[k,d,A]),re=L.useCallback(function(I,Q){var xe=[],Se=[];I.forEach(function(Te){var et=bI(Te,t),Pe=Yv(et,2),pe=Pe[0],$e=Pe[1],nt=MI(Te,o,s),Be=Yv(nt,2),Ke=Be[0],He=Be[1],X=R?R(Te):null;if(pe&&Ke&&!X)xe.push(Te);else{var _e=[$e,He];X&&(_e=_e.concat(X)),Se.push({file:Te,errors:_e.filter(function(Fe){return Fe})})}}),(!a&&xe.length>1||a&&l>=1&&xe.length>l)&&(xe.forEach(function(Te){Se.push({file:Te,errors:[yG]})}),xe.splice(0)),q({acceptedFiles:xe,fileRejections:Se,type:"setFiles"}),p&&p(xe,Se,Q),Se.length>0&&g&&g(Se,Q),xe.length>0&&m&&m(xe,Q)},[q,a,t,o,s,l,p,m,g,R]),ze=L.useCallback(function(I){I.preventDefault(),I.persist(),Ce(I),j.current=[],um(I)&&Promise.resolve(r(I)).then(function(Q){Sg(I)&&!A||re(Q,I)}),q({type:"reset"})},[r,re,A]),Ie=L.useCallback(function(){if(Y.current){q({type:"openDialog"}),T();var I={multiple:a,types:bG(t)};window.showOpenFilePicker(I).then(function(Q){return r(Q)}).then(function(Q){re(Q,null),q({type:"closeDialog"})}).catch(function(Q){MG(Q)?(D(Q),q({type:"closeDialog"})):EG(Q)&&(Y.current=!1,O.current&&(O.current.value=null,O.current.click()))});return}O.current&&(q({type:"openDialog"}),T(),O.current.value=null,O.current.click())},[q,T,D,_,re,t,a]),Xe=L.useCallback(function(I){!k.current||!k.current.isEqualNode(I.target)||(I.key===" "||I.key==="Enter"||I.keyCode===32||I.keyCode===13)&&(I.preventDefault(),Ie())},[k,Ie]),Ae=L.useCallback(function(){q({type:"focus"})},[]),Ye=L.useCallback(function(){q({type:"blur"})},[]),de=L.useCallback(function(){b||(wG()?setTimeout(Ie,0):Ie())},[b,Ie]),le=function(Q){return i?null:Q},Me=function(Q){return M?null:le(Q)},ke=function(Q){return C?null:le(Q)},Ce=function(Q){A&&Q.stopPropagation()},rt=L.useMemo(function(){return function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=I.refKey,xe=Q===void 0?"ref":Q,Se=I.role,Te=I.onKeyDown,et=I.onFocus,Pe=I.onBlur,pe=I.onClick,$e=I.onDragEnter,nt=I.onDragOver,Be=I.onDragLeave,Ke=I.onDrop,He=bg(I,AG);return sn(sn(n_({onKeyDown:Me(os(Te,Xe)),onFocus:Me(os(et,Ae)),onBlur:Me(os(Pe,Ye)),onClick:le(os(pe,de)),onDragEnter:ke(os($e,ue)),onDragOver:ke(os(nt,ge)),onDragLeave:ke(os(Be,ve)),onDrop:ke(os(Ke,ze)),role:typeof Se=="string"&&Se!==""?Se:"button"},xe,k),!i&&!M?{tabIndex:0}:{}),He)}},[k,Xe,Ae,Ye,de,ue,ge,ve,ze,M,C,i]),qe=L.useCallback(function(I){I.stopPropagation()},[]),Ze=L.useMemo(function(){return function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=I.refKey,xe=Q===void 0?"ref":Q,Se=I.onChange,Te=I.onClick,et=bg(I,PG),Pe=n_({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:le(os(Se,ze)),onClick:le(os(Te,qe)),tabIndex:-1},xe,O);return sn(sn({},Pe),et)}},[O,t,a,ze,i]),bt=N.length,ht=bt>0&&vG({files:N,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),U=bt>0&&!ht;return sn(sn({},V),{},{isDragAccept:ht,isDragReject:U,isFocused:ee&&!i,getRootProps:rt,getInputProps:Ze,rootRef:k,inputRef:O,open:le(Ie)})}function FG(n,e){switch(e.type){case"focus":return sn(sn({},n),{},{isFocused:!0});case"blur":return sn(sn({},n),{},{isFocused:!1});case"openDialog":return sn(sn({},i_),{},{isFileDialogActive:!0});case"closeDialog":return sn(sn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return sn(sn({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return sn(sn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return sn({},i_);default:return n}}function GT(){}function BG(n){let e;const t=new Set,i=(f,d)=>{const h=typeof f=="function"?f(e):f;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},r=()=>e,s=(f,d=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const g=d(e);if(!h(p,g)){const v=p;f(p=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(f,d,h)=>d||h?s(f,d,h):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,l),l}const UG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),jT=UG?L.useEffect:L.useLayoutEffect;function VG(n){const e=typeof n=="function"?BG(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=L.useReducer(x=>x+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(i),f=L.useRef(r),d=L.useRef(!1),h=L.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||f.current!==r||d.current)&&(p=i(o),m=!r(h.current,p)),jT(()=>{m&&(h.current=p),a.current=o,l.current=i,f.current=r,d.current=!1});const g=L.useRef(o);jT(()=>{const x=()=>{try{const w=e.getState(),b=l.current(w);f.current(h.current,b)||(a.current=w,h.current=b,s())}catch{d.current=!0,s()}},_=e.subscribe(x);return e.getState()!==g.current&&x(),_},[]);const v=m?p:h.current;return L.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const WG=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let f=o;if(a){const d=(l==null?void 0:l.equalityFn)||Object.is;let h=o(i.getState());f=p=>{const m=o(p);if(!d(h,m)){const g=h;a(h=m,g)}},l!=null&&l.fireImmediately&&a(h,h)}return r(f)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var HG=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var $G=HG;function XT(n){return $G(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var AI=function(e){var t,i;return!(XT(e)===!1||(t=e.constructor,typeof t!="function")||(i=t.prototype,XT(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var GG=AI,cS=function(e){return GG(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var jG=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break},XG=cS,YG=jG;function PI(n,e){for(var t=arguments.length,i=0;++i<t;){var r=arguments[i];r_(r)&&YG(r,qG,n)}return n}function qG(n,e){if(ZG(e)){var t=this[e];r_(n)&&r_(t)?PI(t,n):this[e]=n}}function r_(n){return XG(n)&&!Array.isArray(n)}function ZG(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var KG=PI;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var JG=function(n,e,t,i,r){if(!QG(n)||!e)return n;if(e=fm(e),t&&(e+="."+fm(t)),i&&(e+="."+fm(i)),r&&(e+="."+fm(r)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function QG(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function fm(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ej=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var f=a[l];t.call(o,f)&&(i[f]=o[f])}return i},tj=cS,nj=ej,ij=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");YT(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];sj(t)&&(t=oj(t)),YT(t)&&(rj(n,t),nj(n,t))}return n};function rj(n,e){for(var t in e)aj(e,t)&&(n[t]=e[t])}function sj(n){return n&&typeof n=="string"}function oj(n){var e={};for(var t in n)e[t]=n[t];return e}function YT(n){return n&&typeof n=="object"||tj(n)}function aj(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var lj=ij,cj=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var i=lj({sep:"."},e),r=i.quotes||['"',"'","`"],s;i.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:i.brackets&&(s=i.brackets);var o=[],a=[],l=[""],f=i.sep,d=n.length,h=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++h<d;){var g=n[h],v=n[h+1],x={val:g,idx:h,arr:l,str:n};if(o.push(x),g==="\\"){x.val=fj(i,n,h)===!0?g+v:v,x.escaped=!0,typeof t=="function"&&t(x),l[l.length-1]+=x.val,h++;continue}if(s&&s[g]){a.push(g);var _=m(),w=h+1;if(n.indexOf(_,w+1)!==-1)for(;a.length&&w<d;){var b=n[++w];if(b==="\\"){b++;continue}if(r.indexOf(b)!==-1){w=s_(n,b,w+1);continue}if(_=m(),a.length&&n.indexOf(_,w+1)===-1)break;if(s[b]){a.push(b);continue}_===b&&a.pop()}if(p=w,p===-1){l[l.length-1]+=g;continue}g=n.slice(h,p+1),x.val=g,x.idx=h=p}if(r.indexOf(g)!==-1){if(p=s_(n,g,h+1),p===-1){l[l.length-1]+=g;continue}uj(g,i)===!0?g=n.slice(h,p+1):g=n.slice(h+1,p),x.val=g,x.idx=h=p}if(typeof t=="function"&&(t(x,o),g=x.val,h=x.idx),x.val===f&&x.split!==!1){l.push("");continue}l[l.length-1]+=x.val}return l};function s_(n,e,t,i){var r=n.indexOf(e,t);return n.charAt(r-1)==="\\"?s_(n,e,r+1):r}function uj(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function fj(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var dj=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},qT=dj,hj=function(e){qT(e)||(e={});for(var t=arguments.length,i=1;i<t;i++){var r=arguments[i];qT(r)&&pj(e,r)}return e};function pj(n,e){for(var t in e)mj(e,t)&&(n[t]=e[t])}function mj(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var gj=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var yj=cj,vj=hj,ZT=AI,KT=gj,xj=function(n,e,t){if(!KT(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var i=yj(e,{sep:".",brackets:!0}).filter(_j),r=i.length,s=-1,o=n;++s<r;){var a=i[s];if(s!==r-1){KT(o[a])||(o[a]={}),o=o[a];continue}ZT(o[a])&&ZT(t)?o[a]=vj({},o[a],t):o[a]=t}return n};function _j(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var qv=cS,JT=KG,wj=JG,QT=xj,Sj=function(e,t,i){if(!qv(e))throw new TypeError("expected an object");if(typeof t!="string"||i==null)return JT.apply(null,arguments);if(typeof i=="string")return QT(e,t,i),e;var r=wj(e,t);return qv(i)&&qv(r)&&(i=JT({},r,i)),QT(e,t,i),e};const bj=tu(Sj),uS=(...n)=>n.filter(Boolean).join(".");function Mj(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Ej(n,e){return Object.entries(Q$(n,e)).reduce((t,[,{value:i,disabled:r,key:s}])=>(t[s]=r?void 0:i,t),{})}function Tj(n,e){const t=L.useRef();return(e?bd:Jd)(n,t.current)||(t.current=n),t.current}function RI(n,e){return L.useMemo(n,Tj(e,!0))}function Cj(n){const e=L.useRef(null),t=L.useRef(null),i=L.useRef(!0);return L.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),L.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const Aj=n=>{const[e,t]=L.useState(n.getVisiblePaths());return L.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:Jd});return()=>i()},[n]),e};function Pj(n,e,t){return n.useStore(r=>{const s=at(at({},t),r.data);return Ej(s,e)},Jd)}function LI(n=3){const e=L.useRef(null),t=L.useRef(null),[i,r]=L.useState(!1),s=L.useCallback(()=>r(!0),[]),o=L.useCallback(()=>r(!1),[]);return L.useLayoutEffect(()=>{if(i){const{bottom:a,top:l,left:f}=e.current.getBoundingClientRect(),{height:d}=t.current.getBoundingClientRect(),h=a+d>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=f+"px",h==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:o}}N7([z7]);const Rj={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Ni.extend({color:()=>n=>Si(n).isValid()});const Lj=n=>Ni().color().test(n);function II(n,{format:e,hasAlpha:t,isString:i}){const r=Rj[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?e9(s,["a"]):s}const kI=(n,e)=>{const t=Si(n);if(!t.isValid())throw Error("Invalid color");return II(t,e)},Ij=(n,e)=>II(Si(n),at(at({},e),{},{isString:!0,format:"hex"})),kj=({value:n})=>{const e=O7(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:kI(n,r),settings:r}};var Dj=Object.freeze({__proto__:null,schema:Lj,sanitize:kI,format:Ij,normalize:kj});const Oj=ot("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Nj=ot("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),zj=ot("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function e3(n,e){return e!=="rgb"?Si(n).toRgb():n}function Fj({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=hi(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:f,shown:d,show:h,hide:p}=LI(),m=L.useRef(0),[g,v]=L.useState(()=>e3(n,o)),x=a?$7:j7,_=()=>{v(e3(n,o)),h(),r()},w=()=>{p(),s(),window.clearTimeout(m.current)},b=()=>{m.current=window.setTimeout(w,500)};return L.useEffect(()=>()=>window.clearTimeout(m.current),[]),H.createElement(H.Fragment,null,H.createElement(Oj,{ref:l,active:d,onClick:()=>_(),style:{color:e}}),d&&H.createElement(tS,null,H.createElement(eI,{onPointerUp:w}),H.createElement(zj,{ref:f,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:M=>M.buttons===0&&b()},H.createElement(x,{color:g,onChange:i}))))}function Bj(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,t),H.createElement(Nj,null,H.createElement(Fj,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),H.createElement(eS,{value:e,onChange:i,onUpdate:r})))}var Uj=at({component:Bj},Dj);function Vj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(iS,{value:e,settings:i,onUpdate:t}))}var Wj=at({component:Vj},lI(["x","y","z"]));const Hj=ot("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),$j=ot("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Gj({value:n,settings:e,onUpdate:t}){const i=L.useRef(),r=L.useRef(0),s=L.useRef(0),o=L.useRef(1),[a,l]=L.useState(!1),[f,d]=L.useState(!1),[h,p]=nI(),m=L.useRef(null),g=L.useRef(null);L.useLayoutEffect(()=>{if(a){const{top:$,left:W,width:V,height:q}=m.current.getBoundingClientRect();g.current.style.left=W+V/2+"px",g.current.style.top=$+q/2+"px"}},[a]);const{keys:[v,x],joystick:_}=e,w=_==="invertY"?1:-1,{[v]:{step:b},[x]:{step:M}}=e,C=Ks("sizes","joystickWidth"),A=Ks("sizes","joystickHeight"),R=parseFloat(C)*.8/2,T=parseFloat(A)*.8/2,D=L.useCallback(()=>{i.current||(d(!0),r.current&&p({x:r.current*R}),s.current&&p({y:s.current*-T}),i.current=window.setInterval(()=>{t($=>{const W=b*r.current*o.current,V=w*M*s.current*o.current;return Array.isArray($)?{[v]:$[0]+W,[x]:$[1]+V}:{[v]:$[v]+W,[x]:$[x]+V}})},16))},[R,T,t,p,b,M,v,x,w]),k=L.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,d(!1)},[]);L.useEffect(()=>{function $(W){o.current=UL(W)}return window.addEventListener("keydown",$),window.addEventListener("keyup",$),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",$),window.removeEventListener("keyup",$)}},[]);const O=th(({first:$,active:W,delta:[V,q],movement:[ee,oe]})=>{$&&l(!0);const N=oa(ee,-R,R),Y=oa(oe,-T,T);r.current=Math.abs(ee)>Math.abs(N)?Math.sign(ee-N):0,s.current=Math.abs(oe)>Math.abs(Y)?Math.sign(Y-oe):0;let Z=n[v],j=n[x];W?(r.current||(Z+=V*b*o.current,p({x:N})),s.current||(j-=w*q*M*o.current,p({y:Y})),r.current||s.current?D():k(),t({[v]:Z,[x]:j})):(l(!1),r.current=0,s.current=0,p({x:0,y:0}),k())});return H.createElement(Hj,xn({ref:m},O()),a&&H.createElement(tS,null,H.createElement($j,{ref:g,isOutOfBounds:f},H.createElement("div",null),H.createElement("span",{ref:h}))))}const jj=ot("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Xj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=hi();return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(jj,{withJoystick:!!i.joystick},i.joystick&&H.createElement(Gj,{value:e,settings:i,onUpdate:t}),H.createElement(iS,{value:e,settings:i,onUpdate:t})))}const Yj=["joystick"],DI=lI(["x","y"]),qj=n=>{let{joystick:e=!0}=n,t=$t(n,Yj);const{value:i,settings:r}=DI.normalize(t);return{value:i,settings:at(at({},r),{},{joystick:e})}};var Zj=at(at({component:Xj},DI),{},{normalize:qj});const Kj=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},Jj=(n,e)=>typeof e=="object"&&"image"in e,Qj=({image:n})=>({value:n});var eX=Object.freeze({__proto__:null,sanitize:Kj,schema:Jj,normalize:Qj});const tX=ot("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),nX=ot("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),iX=ot("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),rX=ot("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),sX=ot("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),oX=ot("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function aX(){const{label:n,value:e,onUpdate:t,disabled:i}=hi(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=LI(),f=L.useCallback(g=>{g.length&&t(g[0])},[t]),d=L.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:p,isDragAccept:m}=CI({maxFiles:1,accept:"image/*",onDrop:f,disabled:i});return H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(tX,null,H.createElement(iX,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&H.createElement(tS,null,H.createElement(eI,{onPointerUp:l,style:{cursor:"pointer"}}),H.createElement(rX,{ref:s,style:{backgroundImage:`url(${e})`}})),H.createElement(nX,h({isDragAccept:m}),H.createElement("input",p()),H.createElement(sX,null,m?"drop image":"click or drop")),H.createElement(oX,{onClick:d,disabled:!e})))}var lX=at({component:aX},eX);const t3=Ni().number(),cX=(n,e)=>Ni().array().length(2).every.number().test(n)&&Ni().schema({min:t3,max:t3}).test(e),Mg=n=>({min:n[0],max:n[1]}),OI=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?Mg(n):n,s={min:i[0],max:i[1]},{min:o,max:a}=at(at({},s),r);return[oa(Number(o),e,Math.max(e,a)),oa(Number(a),Math.min(t,o),t)]},uX=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=aI(Mg(n),{min:i,max:i}),s=[e,t],o=at(at({},r),{},{bounds:s});return{value:OI(Mg(n),o,n),settings:o}};var fX=Object.freeze({__proto__:null,schema:cX,format:Mg,sanitize:OI,normalize:uX});const dX=["value","bounds","onDrag"],hX=["bounds"],pX=ot("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function mX(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=$t(n,dX);const o=L.useRef(null),a=L.useRef(null),l=L.useRef(null),f=L.useRef(0),d=Ks("sizes","scrubberWidth"),h=th(({event:g,first:v,xy:[x],movement:[_],memo:w={}})=>{if(v){const{width:M,left:C}=o.current.getBoundingClientRect();f.current=M-parseFloat(d);const A=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;w.pos=xg((x-C)/M,t,i);const R=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=R<0||R===0&&w.pos<=e.min?"min":"max",A&&(w.pos=e[w.key])}const b=w.pos+xg(_/f.current,0,i-t);return r({[w.key]:W9(b,s[w.key])}),w}),p=`calc(${vg(e.min,t,i)} * (100% - ${d} - 8px) + 4px)`,m=`calc(${1-vg(e.max,t,i)} * (100% - ${d} - 8px) + 4px)`;return H.createElement(rI,xn({ref:o},h()),H.createElement(iI,null,H.createElement(sI,{style:{left:p,right:m}})),H.createElement(X1,{position:"left",ref:a,style:{left:p}}),H.createElement(X1,{position:"right",ref:l,style:{right:m}}))}function gX(){const{label:n,displayValue:e,onUpdate:t,settings:i}=hi(),r=$t(i,hX);return H.createElement(H.Fragment,null,H.createElement(Pr,{input:!0},H.createElement(Kr,null,n),H.createElement(pX,null,H.createElement(mX,xn({value:e},i,{onDrag:t})),H.createElement(iS,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var yX=at({component:gX},fX);const vX=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},xX=["type","value"],_X=["onChange","transient","onEditStart","onEditEnd"],wX=function(){const e=VG(WG(()=>({data:{}}))),t=vX();this.storeId=J$(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(i).forEach(([d,h])=>{h.render&&a.some(p=>p.indexOf(d)===0)&&!h.render(this.get)&&l.push(d+".")});const f=[];return r.forEach(d=>{d in o&&o[d].__refCount>0&&l.every(h=>d.indexOf(h)===-1)&&(!o[d].render||o[d].render(this.get))&&f.push(d)}),f},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(f=>{if(f in l){const d=l[f];d.__refCount--,d.__refCount===0&&d.type in jr&&delete l[f]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const f=l.data;return Object.entries(o).forEach(([d,h])=>{let p=f[d];if(p){const{type:m,value:g}=h,v=$t(h,xX);m!==p.type?Ws(on.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,v),p.__refCount++)}else f[d]=at(at({},h),{},{__refCount:1})}),{data:f}})},this.setValueAtPath=(o,a,l)=>{e.setState(f=>{const d=f.data;return MT(d[o],a,o,this,l),{data:d}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const f=l.data;return f[o].settings=at(at({},f[o].settings),a),{data:f}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const f=l.data;return f[o].disabled=a,{data:f}})},this.set=(o,a)=>{e.setState(l=>{const f=l.data;return Object.entries(o).forEach(([d,h])=>{try{MT(f[d],h,void 0,void 0,a)}catch{}}),{data:f}})},this.getInput=o=>{try{return this.getData()[o]}catch{Ws(on.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,at(at({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,at(at({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const f={};return Object.entries(o).forEach(([d,h])=>{if(d==="")return Ws(on.EMPTY_KEY);let p=uS(a,d);if(h.type===jr.FOLDER){const m=s(h.schema,p,l);Object.assign(f,m),p in i||(i[p]=h.settings)}else if(d in l)Ws(on.DUPLICATE_KEYS,d,p,l[d].path);else{const m=o9(h,d,p,f);if(m){const{type:g,options:v,input:x}=m,{onChange:_,transient:w,onEditStart:b,onEditEnd:M}=v,C=$t(v,_X);f[p]=at(at(at({type:g},C),x),{},{fromPanel:!0}),l[d]={path:p,onChange:_,transient:w,onEditStart:b,onEditEnd:M}}else Ws(on.UNKNOWN_INPUT,p,h)}}),f};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},NI=new wX,SX={collapsed:!1};function bX(n,e){return{type:jr.FOLDER,schema:n,settings:at(at({},SX),e)}}const n3=n=>"__levaInput"in n,MX=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,o]=Mj(r);(!i||s.toLowerCase().indexOf(i)>-1)&&bj(t,o,{[s]:{__levaInput:!0,path:r}})}),t},EX=["type","label","path","valueKey","value","settings","setValue","disabled"];function TX(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=n,f=$t(n,EX);const{displayValue:d,onChange:h,onUpdate:p}=tI({type:e,value:s,settings:o,setValue:a}),m=vl[e].component;return m?H.createElement(GL.Provider,{value:at({key:r,path:i,id:""+i,label:t,displayValue:d,value:s,onChange:h,onUpdate:p,settings:o,setValue:a,disabled:l},f)},H.createElement(T9,{disabled:l},H.createElement(m,null))):(Ws(on.NO_COMPONENT_FOR_TYPE,e,i),null)}const CX=ot("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function AX({onClick:n,settings:e,label:t}){const i=eh();return H.createElement(Pr,null,H.createElement(CX,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const PX=ot("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),RX=ot("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),LX=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function IX(n){const{label:e,opts:t}=LX(n),i=eh();return H.createElement(Pr,{input:!!e},e&&H.createElement(Kr,null,e),H.createElement(PX,null,Object.entries(t).map(([r,s])=>H.createElement(RX,{key:r,onClick:()=>s(i.get)},r))))}const kX=ot("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),zI=100;function DX(n,e){n.push(e),n.length>zI&&n.shift()}const OX=L.forwardRef(function({initialValue:n},e){const t=Ks("colors","highlight3"),i=Ks("colors","elevation2"),r=Ks("colors","highlight1"),[s,o]=L.useMemo(()=>[Si(r).alpha(.4).toRgbString(),Si(r).alpha(.1).toRgbString()],[r]),a=L.useRef([n]),l=L.useRef(n),f=L.useRef(n),d=L.useRef(),h=L.useCallback((g,v)=>{if(!g)return;const{width:x,height:_}=g,w=new Path2D,b=x/zI,M=_*.05;for(let R=0;R<a.current.length;R++){const T=vg(a.current[R],l.current,f.current),D=b*R,k=_-T*(_-M*2)-M;w.lineTo(D,k)}v.clearRect(0,0,x,_);const C=new Path2D(w);C.lineTo(b*(a.current.length+1),_),C.lineTo(0,_),C.lineTo(0,0);const A=v.createLinearGradient(0,0,0,_);A.addColorStop(0,s),A.addColorStop(1,o),v.fillStyle=A,v.fill(C),v.strokeStyle=i,v.lineJoin="round",v.lineWidth=14,v.stroke(w),v.strokeStyle=t,v.lineWidth=2,v.stroke(w)},[t,i,s,o]),[p,m]=O9(h);return L.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(f.current===void 0||g>f.current)&&(f.current=g),DX(a.current,g),d.current=requestAnimationFrame(()=>h(p.current,m.current))}}),[p,m,h]),L.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),H.createElement(kX,{ref:p})}),i3=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),NX=L.forwardRef(function({initialValue:n},e){const[t,i]=L.useState(i3(n));return L.useImperativeHandle(e,()=>({frame:r=>i(i3(r))}),[]),H.createElement("div",null,t)});function r3(n){return typeof n=="function"?n():n.current}function zX({label:n,objectOrFn:e,settings:t}){const i=L.useRef(),r=L.useRef(r3(e));return L.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(r3(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),H.createElement(Pr,{input:!0},H.createElement(Kr,{align:"top"},n),t.graph?H.createElement(OX,{ref:i,initialValue:r.current}):H.createElement(NX,{ref:i,initialValue:r.current}))}const FX=["type","label","key"],BX={[jr.BUTTON]:AX,[jr.BUTTON_GROUP]:IX,[jr.MONITOR]:zX},UX=H.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=z9(n);if(!e)return null;const{type:l,label:f,key:d}=e,h=$t(e,FX);if(l in jr){const p=BX[l];return H.createElement(p,xn({label:f,path:n},h))}return l in vl?H.createElement(TX,xn({key:s+n,type:l,label:f,storeId:s,path:n,valueKey:d,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:a},h)):($$(on.UNSUPPORTED_INPUT,l,n),null)});function VX({toggle:n,toggled:e,name:t}){return H.createElement(b9,{onClick:()=>n()},H.createElement(nS,{toggled:e}),H.createElement("div",null,t))}const WX=({name:n,path:e,tree:t})=>{const i=eh(),r=uS(e,n),{collapsed:s,color:o}=i.getFolderSettings(r),[a,l]=L.useState(!s),f=L.useRef(null),d=Ks("colors","folderWidgetColor"),h=Ks("colors","folderTextColor");return L.useLayoutEffect(()=>{f.current.style.setProperty("--leva-colors-folderWidgetColor",o||d),f.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,d,h]),H.createElement(_g,{ref:f},H.createElement(VX,{name:n,toggled:a,toggle:()=>l(p=>!p)}),H.createElement(FI,{parent:r,tree:t,toggled:a}))},FI=H.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Cj(s),l=eh(),f=([h,p])=>{var m;return(n3(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(uS(i,h)).order)||0},d=Object.entries(r).sort((h,p)=>f(h)-f(p));return H.createElement(G1,{ref:o,isRoot:n,fill:e,flat:t},H.createElement(KL,{ref:a,isRoot:n,toggled:s},d.map(([h,p])=>n3(p)?H.createElement(UX,{key:p.path,valueKey:p.valueKey,path:p.path}):H.createElement(WX,{key:h,name:h,path:i,tree:p}))))}),HX=ot("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${QL}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),BI=40,Eg=ot("i",{$flexCenter:"",width:BI,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),$X=ot("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),GX=ot("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Eg}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),jX=ot("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),XX=ot("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:BI}}}}),YX=H.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=L.useState(""),s=L.useMemo(()=>BL(n,250),[n]),o=()=>{n(""),r("")},a=l=>{const f=l.currentTarget.value;e(!0),r(f)};return L.useEffect(()=>{s(i)},[i,s]),H.createElement(H.Fragment,null,H.createElement(jX,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),H.createElement(Eg,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function qX({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:f}){const[d,h]=L.useState(!1),p=L.useRef(null);L.useEffect(()=>{var g,v;d?(g=p.current)===null||g===void 0||g.focus():(v=p.current)===null||v===void 0||v.blur()},[d]);const m=th(({offset:[g,v],first:x,last:_})=>{e({x:g,y:v}),x&&t({x:g,y:v}),_&&i({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(f==null?void 0:f.x)||g,(f==null?void 0:f.y)||v]});return L.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&h(x=>!x)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),H.createElement(H.Fragment,null,H.createElement($X,{mode:a?"drag":void 0},H.createElement(Eg,{active:!s,onClick:()=>r()},H.createElement(nS,{toggled:s,width:12,height:8})),H.createElement(XX,xn({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?H.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},H.createElement("circle",{cx:"2",cy:"2",r:"2"}),H.createElement("circle",{cx:"14",cy:"2",r:"2"}),H.createElement("circle",{cx:"26",cy:"2",r:"2"}),H.createElement("circle",{cx:"2",cy:"12",r:"2"}),H.createElement("circle",{cx:"14",cy:"12",r:"2"}),H.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&H.createElement(Eg,{active:d,onClick:()=>h(g=>!g)},H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},H.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),H.createElement(GX,{toggled:d},H.createElement(YX,{ref:p,setFilter:n,toggle:r})))}const ZX=["store","hidden","theme","collapsed"];function KX(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,s=$t(n,ZX);const o=RI(()=>y9(i),[i]),[a,l]=L.useState(!r),f=typeof r=="object"?!r.collapsed:a,d=L.useMemo(()=>typeof r=="object"?h=>{typeof h=="function"?r.onChange(!h(!r.collapsed)):r.onChange(!h)}:l,[r]);return!e||t?null:H.createElement(Qw.Provider,{value:o},H.createElement(JX,xn({store:e},s,{toggled:f,setToggle:d,rootClass:o.className})))}const JX=H.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:f})=>{var d,h;const p=Aj(n),[m,g]=L.useState(""),v=L.useMemo(()=>MX(p,m),[p,m]),[x,_]=nI(),w=r||p.length>0,b=typeof o=="object"&&o.title||void 0,M=typeof o=="object"&&(d=o.drag)!==null&&d!==void 0?d:!0,C=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,A=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,T=typeof o=="object"&&o.onDragStart||void 0,D=typeof o=="object"&&o.onDragEnd||void 0;return H.useEffect(()=>{_({x:A==null?void 0:A.x,y:A==null?void 0:A.y})},[A,_]),g9(),H.createElement(XL.Provider,{value:{hideCopyButton:a}},H.createElement(HX,{ref:x,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!o,style:{display:w?"block":"none"}},o&&H.createElement(qX,{onDrag:k=>{_(k),R==null||R(k)},onDragStart:k=>T==null?void 0:T(k),onDragEnd:k=>D==null?void 0:D(k),setFilter:g,toggle:k=>f(O=>k??!O),toggled:l,title:b,drag:M,filterEnabled:C,from:A}),w&&H.createElement(jL.Provider,{value:n},H.createElement(FI,{isRoot:!0,fill:t,flat:i,tree:v,toggled:l}))))}),QX=["isRoot"];let Tg=!1,Za=null;function eY(n){let{isRoot:e=!1}=n,t=$t(n,QX);return L.useEffect(()=>(Tg=!0,!e&&Za&&(Za.remove(),Za=null),()=>{e||(Tg=!1)}),[e]),H.createElement(KX,xn({store:NI},t))}function tY(n){L.useEffect(()=>{n&&!Tg&&(Za||(Za=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Za),l9(H.createElement(eY,{isRoot:!0}),Za))),Tg=!0)},[n])}function nY(n,e,t,i,r){let s,o,a,l,f;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?f=t:t&&("store"in t?(l=t,f=i):(a=t,Array.isArray(i)?f=i:(l=i,f=r)))):(s=n,Array.isArray(e)?f=e:(l=e,f=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:f||[]}}function Js(n,e,t,i,r){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:f}=nY(n,e,t,i,r),d=typeof o=="function",h=L.useRef(!1),p=L.useRef(!0),m=RI(()=>{h.current=!0;const O=typeof o=="function"?o():o;return s?{[s]:bX(O,a)}:O},f),g=!(l!=null&&l.store);tY(g);const[v]=L.useState(()=>(l==null?void 0:l.store)||NI),[x,_]=L.useMemo(()=>v.getDataFromSchema(m),[v,m]),[w,b,M,C,A]=L.useMemo(()=>{const O=[],$=[],W={},V={},q={};return Object.values(_).forEach(({path:ee,onChange:oe,onEditStart:N,onEditEnd:Y,transient:Z})=>{O.push(ee),oe?(W[ee]=oe,Z||$.push(ee)):$.push(ee),N&&(V[ee]=N),Y&&(q[ee]=Y)}),[O,$,W,V,q]},[_]),R=L.useMemo(()=>v.orderPaths(w),[w,v]),T=Pj(v,b,x),D=L.useCallback(O=>{const $=Object.entries(O).reduce((W,[V,q])=>Object.assign(W,{[_[V].path]:q}),{});v.set($,!1)},[v,_]),k=L.useCallback(O=>v.get(_[O].path),[v,_]);return L.useEffect(()=>{const O=!p.current&&h.current;return v.addData(x,O),p.current=!1,h.current=!1,()=>v.disposePaths(R)},[v,R,x]),L.useEffect(()=>{const O=[];return Object.entries(M).forEach(([$,W])=>{W(v.get($),$,at({initial:!0,get:v.get},v.getInput($)));const V=v.useStore.subscribe(q=>{const ee=q.data[$];return[ee.disabled?void 0:ee.value,ee]},([q,ee])=>W(q,$,at({initial:!1,get:v.get},ee)),{equalityFn:Jd});O.push(V)}),()=>O.forEach($=>$())},[v,M]),L.useEffect(()=>{const O=[];return Object.entries(C).forEach(([$,W])=>O.push(v.subscribeToEditStart($,W))),Object.entries(A).forEach(([$,W])=>O.push(v.subscribeToEditEnd($,W))),()=>O.forEach($=>$())},[C,A,v]),d?[T,D,k]:T}po(Yr.SELECT,e7);po(Yr.IMAGE,lX);po(Yr.NUMBER,$9);po(Yr.COLOR,Uj);po(Yr.STRING,c7);po(Yr.BOOLEAN,g7);po(Yr.INTERVAL,yX);po(Yr.VECTOR3D,Wj);po(Yr.VECTOR2D,Zj);const iY=new Oe("white"),rY=!1;function sY(){return iY}function o_(n,e){let t=sY();try{if(n>=0){const i=n/e*300;t=new Oe(`hsl(${i}, 100%, 50%)`)}}catch{}return t}function a_(n){try{}catch{}}function Cg(n,e,t){const i=Math.min(e,t),r=Math.max(e,t);return n=Math.max(n,i),n=Math.min(n,r),n}let Zv=null;function oY(){return Zv==null&&(Zv=new URLSearchParams(window.location.search)),Zv}function Qs(n,e){let t=e;try{const i=oY();if(i.has(n)){const r=i.get(n);if(typeof e=="number"){const s=parseInt(r);isNaN(s)||(t=s)}else t=r}}catch{}return t}let l_=1;function aY(){l_=1}function ut(n,e){try{n.links.push(e),e.links.push(n)}catch(t){console.log(`Error: crossLink ${n} ${e} ${t}`)}}class lY{constructor(e=0,t=0,i=0,r=0){this.i=e,this.n=t,this.x=i,this.y=r}set(e=0,t=0,i=0,r=0){this.i=e,this.n=t,this.x=i,this.y=r}}class UI{constructor(){this.id=l_,l_++,this.links=[],this.type="base",this.obj=new lY,this.states=[],this.stateNo=0}}let Pt=class extends UI{constructor(){super(),this.type="node",this.v=0}};class m0 extends UI{constructor(){super(),this.type="arc",this.r=0,this.v=0,this.i=0,this.t=0}}let g0=class extends m0{constructor(){super(),this.type="source",this.states=["Z","0","1"],this.r=0,this.v=10}};class y0 extends m0{constructor(){super(),this.type="resist",this.r=1e3}}class ds extends m0{constructor(){super(),this.type="wire",this.r=1}}class v0 extends m0{constructor(){super(),this.type="led",this.states=["0","1"],this.r=1,this.t=1}}class aa{constructor(){aY(),this.count=0,this.nodes=[],this.sources=[],this.wires=[],this.resists=[],this.leds=[],this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0}calcLimits(){try{const e=[],t=this.nodes.length;for(let r=0;r<t;r++)if(this.nodes[r]instanceof Array){const o=this.nodes[r],a=o.length;for(let l=0;l<a;l++){const f=o[l];e.push(f)}}else{const o=this.nodes[r];e.push(o)}this.nodes=e;const i=e.length;for(let r=0;r<i;r++){const s=e[r],o=s.obj.x,a=s.obj.y;r==0?(this.xmin=this.xmax=o,this.ymin=this.ymax=a):(this.xmin=Math.min(this.xmin,o),this.ymin=Math.min(this.ymin,a),this.xmax=Math.max(this.xmax,o),this.ymax=Math.max(this.ymax,a))}}catch(e){console.log("Error: calcLimits. ",e)}}}function cY(n,e){return n.y-e.y}class Ag{constructor(e,t,i){this.count=e,this.i=t,this.n=i,this.x=0,this.g=i*4+2;const s=(i&1)==0?1:-1;this.dir=s,this.y=this.g/4,this.type=""}static copy(e){let t=new Ag(e.count,e.i,e.n);return t.x=e.x,t.g=e.g,t.y=e.y,t.type=new String(e.type),t}glide(e,t=!1,i=""){if(this.x+=e/4,t==!0&&this.dir!=0){const s=this.count*4,o=0;this.dir>0?(this.g+=e,this.g>s&&(this.g=s-e,this.dir=-1)):(this.g-=e,this.g<o&&(this.g=o+e,this.dir=1));let a=this.g;a=Math.min(a,s-1),a=Math.max(a,o+1),this.y=a/4}this.type=new String(i)}}class uY{constructor(e){this.stacks=[],this.stacksSorted=[],this.stack=[];for(let t=0;t<e;t++){const i=new Ag(e,0,t);this.stack.push(i)}this.pushStacks()}makeStackCopy(){let e=[];const t=this.stack.length;for(let i=0;i<t;i++)e.push(Ag.copy(this.stack[i]));return e}pushStacks(){const e=this.makeStackCopy();this.stacks.push(e);const t=this.makeStackCopy();t.sort(cY),this.stacksSorted.push(t)}advance(e=2,t=!1,i=""){const r=this.stack.length,s=this.stack;for(let o=0;o<r;o++)s[o].glide(e,t,i);this.pushStacks()}}function fY(n,e){try{const t=e.stacks.length;if(t>0){const r=e.stacks[0].length;if(r>0)for(let s=0;s<r;s++){let o=[];for(let a=0;a<t;a++){const f=e.stacks[a][s],d=new Pt;d.obj.i=a,d.obj.n=s,d.obj.x=f.x,d.obj.y=f.y,o.push(d)}n.nodes.push(o)}}}catch{}}function dY(n,e,t){try{const i=e.length;for(let r=0;r<i;r++){const s=e[r],o=t[r],a=new Pt,l=new Pt,f=new g0;a.obj.set(s.i,s.n,s.x,s.y),l.obj.set(o.i,o.n,o.x,o.y),ut(a,f),ut(l,f),n.nodes.push(a),n.nodes.push(l),n.sources.push(f)}}catch{}}function hY(n,e){try{const t=e.stacks.length;if(t>1){const i=e.stacks[t-2],r=e.stacks[t-1];dY(n,i,r)}}catch{}}function pY(n,e,t){try{const i=e.length;for(let r=0;r<i;r++){const s=e[r],o=t[r],a=new Pt,l=new Pt,f=new y0;a.obj.set(s.i,s.n,s.x,s.y),l.obj.set(o.i,o.n,o.x,o.y),ut(a,f),ut(l,f),n.nodes.push(a),n.nodes.push(l),n.resists.push(f)}}catch{}}function mY(n,e){try{const t=e.stacks.length;if(t>1){const i=e.stacks[t-2],r=e.stacks[t-1];pY(n,i,r)}}catch{}}function gY(n,e,t){try{const i=new Pt,r=new Pt,s=new v0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.leds.push(s)}catch{}}function yY(n,e){try{const t=e.length;if(t>1)for(let i=0;i<t-1;i++){const r=e[i],s=e[i+1];s.y-r.y<1&&(gY(n,r,s),i++)}}catch{}}function vY(n,e){try{const t=e.stacksSorted.length;if(t>0){const i=e.stacksSorted[t-1];yY(n,i)}}catch{}}function xY(n,e,t){try{const i=new Pt,r=new Pt,s=new ds;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.wires.push(s)}catch{}}function _Y(n,e){try{const t=e.stacks.length;if(t>1){const r=e.stacks[0].length;if(r>0)for(let s=0;s<r;s++)for(let o=1;o<t-1;o++){const a=e.stacks[o],l=e.stacks[o+1],f=a[s],d=l[s];xY(n,f,d)}}}catch{}}function wY(n=16){let e=new aa;try{if(n<2||n>128)throw new Error(`bad value theCount = ${n}`);const t=n/2*(n-1)*2;e.count=n;const i=new uY(n);i.advance(2,!1,"source"),hY(e,i),i.advance(2),i.advance(2,!1,"resist"),mY(e,i),i.advance(2);do i.advance(1,!0,"led"),vY(e,i),i.advance(1,!0);while(e.leds.length<t);fY(e,i),_Y(e,i),e.calcLimits()}catch(t){console.log("Error buildCircuit1b ",t),e=new aa}return e}const s3={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class SY{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return f.push(d,h),this},this.removeHandler=function(d){const h=f.indexOf(d);return h!==-1&&f.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=f.length;h<p;h+=2){const m=f[h],g=f[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}}const bY=new SY;class VI{constructor(e){this.manager=e!==void 0?e:bY,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}function c_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class MY extends VI{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=s3.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=c_("img");function l(){d(),s3.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class EY{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const WI=300,o3=1e3,dm=1001,a3=1002,TY=1006,CY=1008,AY=1009,PY=1023,RY=3e3,oi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function HI(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(oi[n&255]+oi[n>>8&255]+oi[n>>16&255]+oi[n>>24&255]+"-"+oi[e&255]+oi[e>>8&255]+"-"+oi[e>>16&15|64]+oi[e>>24&255]+"-"+oi[t&63|128]+oi[t>>8&255]+"-"+oi[t>>16&255]+oi[t>>24&255]+oi[i&255]+oi[i>>8&255]+oi[i>>16&255]+oi[i>>24&255]).toLowerCase()}class Uf{constructor(e=0,t=0){Uf.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class x0{constructor(){x0.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],f=i[1],d=i[4],h=i[7],p=i[2],m=i[5],g=i[8],v=r[0],x=r[3],_=r[6],w=r[1],b=r[4],M=r[7],C=r[2],A=r[5],R=r[8];return s[0]=o*v+a*w+l*C,s[3]=o*x+a*b+l*A,s[6]=o*_+a*M+l*R,s[1]=f*v+d*w+h*C,s[4]=f*x+d*b+h*A,s[7]=f*_+d*M+h*R,s[2]=p*v+m*w+g*C,s[5]=p*x+m*b+g*A,s[8]=p*_+m*M+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8];return t*o*d-t*a*f-i*s*d+i*a*l+r*s*f-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8],h=d*o-a*f,p=a*l-d*s,m=f*s-o*l,g=t*h+i*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*f-d*i)*v,e[2]=(a*i-r*o)*v,e[3]=p*v,e[4]=(d*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=m*v,e[7]=(i*l-f*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(i*l,i*f,-i*(l*o+f*a)+o+e,-r*f,r*l,-r*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Kv.makeScale(e,t)),this}rotate(e){return this.premultiply(Kv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Kv.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Kv=new x0;function Jv(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}let uc;class LY{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{uc===void 0&&(uc=c_("canvas")),uc.width=e.width,uc.height=e.height;const i=uc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=uc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=c_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Jv(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Jv(t[i]/255)*255):t[i]=Jv(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class IY{constructor(e=null){this.isSource=!0,this.uuid=HI(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Qv(r[o].image)):s.push(Qv(r[o]))}else s=Qv(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Qv(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?LY.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kY=0;class Xo extends EY{constructor(e=Xo.DEFAULT_IMAGE,t=Xo.DEFAULT_MAPPING,i=dm,r=dm,s=TY,o=CY,a=PY,l=AY,f=Xo.DEFAULT_ANISOTROPY,d=RY){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kY++}),this.uuid=HI(),this.name="",this.source=new IY(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Uf(0,0),this.repeat=new Uf(1,1),this.center=new Uf(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new x0,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==WI)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case o3:e.x=e.x-Math.floor(e.x);break;case dm:e.x=e.x<0?0:1;break;case a3:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case o3:e.y=e.y-Math.floor(e.y);break;case dm:e.y=e.y<0?0:1;break;case a3:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Xo.DEFAULT_IMAGE=null;Xo.DEFAULT_MAPPING=WI;Xo.DEFAULT_ANISOTROPY=1;class ex extends VI{constructor(e){super(e)}load(e,t,i,r){const s=new Xo,o=new MY(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}function DY({circuit:n,source:e,sourcetexs:t}){console.log("Rsource. ");const i=L.useRef(),r=e.links[0],s=e.links[1],o=r.obj.x,a=r.obj.y,l=s.obj.x,f=s.obj.y,d=(o+l)/2,h=(a+f)/2,p=Math.abs(o-l),m=p,g=()=>{try{const v=e.states.length;if(v>0){let x=e.stateNo;x=(x+1)%v,e.stateNo=x}}catch{}};return a0(()=>{const v=e.stateNo,x=t[v];i.current.material.map=x}),hs("mesh",{position:[d,h,0],ref:i,onClick:g,children:[Ge("planeGeometry",{args:[p,m]}),Ge("meshBasicMaterial",{side:Yi,map:t[0]})]})}function OY({circuit:n,resist:e}){console.log("Rresist. ");const t=e.links[0],i=e.links[1],r=t.obj.x,s=t.obj.y,o=t.obj.n,a=i.obj.x,l=i.obj.y;i.obj.n;const f=(r+a)/2,d=(s+l)/2,h=Math.abs(r-a),p=h/3,m=o/n.count*300,g=new Oe(`hsl(${m}, 100%, 50%)`);return hs("mesh",{position:[f,d,0],children:[Ge("planeGeometry",{args:[h,p]}),Ge("meshBasicMaterial",{color:g,side:Yi})]})}function NY({circuit:n,wire:e}){console.log("Rwire. ");const t=e.links[0],i=e.links[1],r=t.obj.x,s=t.obj.y,o=t.obj.n,a=i.obj.x,l=i.obj.y;i.obj.n;const f=new pd(new z(r,s,0),new z(a,l,0)),d=new na(f,64,.01,8,!1),h=o/n.count*300,p=new Oe(`hsl(${h}, 100%, 50%)`);return Ge("mesh",{geometry:d,children:Ge("meshBasicMaterial",{color:p,side:Yi})})}function l3(n,e){let t=null;try{const i=n.sources.length;for(let r=0;r<i;r++){const s=n.sources[r];if(s.links[1].obj.n==e){t=s;break}}}catch(i){a_(`Error: Rled.jsx: getSource. ${i}`)}return t}function zY({circuit:n,led:e,ledcolors:t}){console.log("Rled. ");const i=L.useRef(),r=e.links[0],s=e.links[1],o=r.obj.x,a=r.obj.y,l=r.obj.n,f=l3(n,l),d=s.obj.x,h=s.obj.y,p=s.obj.n,m=l3(n,p),g=d-o,v=h-a,x=(o+d)/2,_=(a+h)/2,w=g*g,b=v*v,M=Math.sqrt(w+b),C=Math.atan2(v,g)+Math.PI/2,A=M/6,R=new pd(new z(0,3,0),new z(0,1,0)),T=new pd(new z(0,-1,0),new z(0,-3,0)),D=new na(R,64,.1,8,!1),k=new pa(1,1,.2),O=new fu(1,2),$=new na(T,64,.1,8,!1),W=n.count,V=o_(l,W),q=o_(p,W),ee=()=>{try{if(f==null||m==null)return;const Y=f.states[f.stateNo],Z=m.states[m.stateNo];e.stateNo=Y=="0"&&Z=="1"?1:0}catch{a_("Error: Rled.jsx: senseSources. ${theErr}")}},oe=()=>{i.current.material.color=t[e.stateNo]};return a0(()=>{ee(),oe()}),Ge(ys,{children:Ge("group",{position:[x,_,0],children:hs("group",{scale:[A,A,A],"rotation-z":C,children:[Ge("mesh",{geometry:D,position:[0,0,0],children:Ge("meshBasicMaterial",{color:V,side:Yi})}),Ge("mesh",{geometry:k,position:[0,1,0],children:Ge("meshBasicMaterial",{color:V,side:Yi})}),Ge("mesh",{geometry:O,position:[0,0,0],children:Ge("meshBasicMaterial",{color:q,side:Yi})}),Ge("mesh",{geometry:$,position:[0,0,0],children:Ge("meshBasicMaterial",{color:q,side:Yi})}),hs("mesh",{position:[0,0,-.1],ref:i,onClick:()=>{try{if(f==null||m==null)return;f.stateNo=1,m.stateNo=2}catch{a_("Error: Rled.jsx: doClick. ${theErr}")}},children:[Ge("circleGeometry",{args:[2.5]}),Ge("meshBasicMaterial",{color:t[e.stateNo],side:Yi})]})]})})})}function FY({circuit:n,node:e}){console.log("Rnode. ");const t=e.obj.x,i=e.obj.y,r=e.obj.n,s=n.count,o=o_(r,s);return Ge(ys,{children:Ge("group",{position:[t,i,0],children:hs("mesh",{children:[Ge("circleGeometry",{args:[.05]}),Ge("meshBasicMaterial",{color:o,side:Yi})]})})})}function _0({ResetRef:n,Circuit:e,Orientation:t,Scanning:i}){console.log("DrawLayout");const r=Math.PI/2*t,s=L.useRef(0),o=L.useRef(-1),a=e.wires,l=e.sources,f=e.resists,d=e.leds,h=e.nodes,p=(e.xmin+e.xmax)/2,m=(e.ymin+e.ymax)/2,g=e.xmax-e.xmin;e.ymax-e.ymin;const x=5/(g+1),_=Nf(ex,"./images/z.jpg"),w=Nf(ex,"./images/0.jpg"),b=Nf(ex,"./images/1.jpg"),M=[_,w,b],C=new Oe("black"),A=new Oe("white"),R=[C,A],T=()=>{try{const $=l,W=$.length;for(let V=0;V<W;V++){const q=$[V];q.stateNo=0}}catch($){console.log("Error clearAllSources ",$)}},D=$=>{try{const W=d[$],V=W.links[0],q=W.links[1],ee=V.obj.n,oe=q.obj.n,N=l[ee],Y=l[oe];N.stateNo=1,Y.stateNo=2}catch(W){console.log("Error scanItem ",W)}},k=()=>{try{s.current=0;const $=d.length;o.current++,o.current%=$,T(),D(o.current)}catch($){console.log("Error advanceScan ",$)}};a0(($,W,V)=>{try{n.current!=0&&(n.current=0,T()),i=="stopped"?s.current=0:(s.current+=W,i=="slow"?s.current>1&&k():s.current>.1&&k())}catch(q){console.log("Error useFrame ",q)}});let O=Ge(HY,{circuit:e,nodes:h});return O=Ge(ys,{}),Ge("group",{rotation:[0,0,r],children:Ge("group",{scale:[x,x,1],children:hs("group",{position:[-p,-m,0],children:[Ge(BY,{circuit:e,sources:l,sourcetexs:M}),Ge(UY,{circuit:e,wires:a}),Ge(VY,{circuit:e,resists:f}),Ge(WY,{circuit:e,leds:d,ledcolors:R}),O]})})})}function BY({circuit:n,sources:e,sourcetexs:t}){return console.log("Rsources."),Ge(ys,{children:e.map((i,r)=>Ge(DY,{circuit:n,source:i,sourcetexs:t},i.id))})}function UY({circuit:n,wires:e}){return console.log("Rwires."),Ge(ys,{children:e.map((t,i)=>Ge(NY,{circuit:n,wire:t},t.id))})}function VY({circuit:n,resists:e}){return console.log("Rresists."),Ge(ys,{children:e.map((t,i)=>Ge(OY,{circuit:n,resist:t},t.id))})}function WY({circuit:n,leds:e,ledcolors:t}){return console.log("Rleds."),Ge(ys,{children:e.map((i,r)=>Ge(zY,{circuit:n,led:i,ledcolors:t},i.id))})}function HY({circuit:n,nodes:e}){return console.log("Rnodes."),Ge(ys,{children:e.map((t,i)=>Ge(FY,{circuit:n,node:t},t.id))})}function $Y({ResetRef:n,Orientation:e,Scanning:t}){console.log("Layout1");const i=Qs("Count",4),{Count:r}=Js({Count:{value:i,min:2,max:16,step:1}});let s=wY(r);return Ge(_0,{ResetRef:n,Circuit:s,Orientation:e,Scanning:t})}const $I=0,GI=1;function GY(n){try{for(let e=0;e<n.count;e++){const t=new Pt,i=new Pt,r=new g0;t.obj.set(0,e,0,e),i.obj.set(0,e,.5,e),ut(t,r),ut(i,r),n.nodes.push(t),n.nodes.push(i),n.sources.push(r)}}catch(e){console.log("Error: makeSources: ",e)}}function jY(n){try{for(let e=0;e<n.count;e++){const t=new Pt,i=new Pt,r=new y0;t.obj.set(1,e,1,e),i.obj.set(1,e,1.5,e),ut(t,r),ut(i,r),n.nodes.push(t),n.nodes.push(i),n.resists.push(r)}}catch(e){console.log("Error: makeResists: ",e)}}function XY(n){try{const e=n.count,t=e-1;for(let i=0;i<t;i++)for(let r=0;r<e;r++){const s=new Pt,o=new Pt,a=new v0;ut(o,a),ut(s,a),s.obj.set(0,-1,2.25+r,1+i),o.obj.set(0,-1,3+r,1.75+i),n.nodes.push(s),n.nodes.push(o),n.leds.push(a)}}catch(e){console.log("Error: makeLeds: ",e)}}function YY(n,e){let t=null;try{const i=n.sources[e],r=n.resists[e],s=new ds;ut(i.links[1],s),ut(r.links[0],s),n.wires.push(s);const o=n.count,a=n.leds;let l=r.links[1];if(e>0){const h=o*(e-1);for(let p=0;p<e;p++){const g=a[h+p].links[GI],v=new ds;ut(l,v),ut(g,v),n.wires.push(v),g.obj.n=e,l=g}}const f=new Pt;f.obj.set(0,e,1.75+e,e);const d=new ds;ut(l,d),ut(f,d),n.wires.push(d),n.nodes.push(f),t=f}catch(i){console.log("Error: makePathBase: ",i)}return t}function qY(n,e,t){let i=null;try{const r=new Pt;r.obj.set(0,e,3+e,1+e);const s=new ds;ut(t,s),ut(r,s),n.wires.push(s),n.nodes.push(r),i=r}catch(r){console.log("Error: makePathSlant: ",r)}return i}function ZY(n,e,t){try{const i=n.count,r=i-1,s=n.leds;let o=t;for(let a=e;a<r;a++){const l=i*a,d=s[l+e].links[$I],h=new ds;ut(o,h),ut(d,h),n.wires.push(h),d.obj.n=e,o=d}}catch(i){console.log("Error: makePathUp: ",i)}}function KY(n,e,t){try{const i=n.count,r=i-1,s=n.leds;let o=t;if(e>0)for(let a=e;a>0;a--){const l=a-1,f=i*l,h=s[f+e].links[$I],p=new ds;ut(o,p),ut(h,p),n.wires.push(p),h.obj.n=e,o=h}}catch(i){console.log("Error: makePathDown: ",i)}}function JY(n,e,t){try{const i=n.count,r=i-1,s=n.leds;let o=t;const a=i*e;for(let l=e;l<i-1;l++){const d=s[a+l+1].links[GI],h=new ds;ut(o,h),ut(d,h),n.wires.push(h),d.obj.n=e,o=d}}catch(i){console.log("Error: makePathAcross: ",i)}}function QY(n,e){try{const t=YY(n,e),i=qY(n,e,t);ZY(n,e,i),KY(n,e,i),JY(n,e,i)}catch(t){console.log("Error: makePath: ",t)}}function eq(n){try{for(let e=0;e<n.count;e++)QY(n,e)}catch(e){console.log("Error: makePaths: ",e)}}function tq(n=16){let e=new aa;try{if(n<2||n>128)throw new Error(`bad value theCount = ${n}`);e.count=n,GY(e),jY(e),XY(e),eq(e),e.calcLimits()}catch(t){console.log("Error buildCircuit2 ",t),e=new aa}return e}function nq({ResetRef:n,Orientation:e,Scanning:t}){console.log("Layout2");const i=Qs("Count",4),{Count:r}=Js({Count:{value:i,min:2,max:16,step:1}});let s=tq(r);return Ge(_0,{ResetRef:n,Circuit:s,Orientation:e,Scanning:t})}const iq=8,rq=8;let Ka=class jI{constructor(e,t,i,r,s){this.i=e,this.n=t,this.y=i,this.dy=r,this.type=s,this.x=0}static copy(e){let t=new jI(e.i,e.n,e.y,e.dy,e.type);return t.x=e.x,t}advance(){this.x+=1}glide(e,t,i){this.x+=1,!(this.type=="E"&&e<1)&&(this.y+=this.dy,(t>this.y||this.y>i)&&(this.dy*=-1,this.y+=this.dy*2))}},sq=class{constructor(){this.path=[]}save(e){try{this.path.push(Ka.copy(e))}catch(t){console.log("Error Circuit3:Tracker.save ",t)}}},c3=class{constructor(e,t){this.S0=Ka.copy(e),this.S1=Ka.copy(t)}};function oq(n,e,t){try{const i=new Pt,r=new Pt,s=new ds;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.wires.push(s)}catch(i){console.log("Error addWireSegment ",i)}}function aq(n,e){try{const t=new Pt;t.obj.i=e.i,t.obj.n=e.n,t.obj.x=e.x,t.obj.y=e.y,n.nodes.push(t)}catch(t){console.log("Error addNode ",t)}}function lq(n,e,t){try{const i=new Pt,r=new Pt,s=new g0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.sources.push(s)}catch(i){console.log("Error addSource ",i)}}function cq(n,e,t){try{const i=new Pt,r=new Pt,s=new y0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.resists.push(s)}catch(i){console.log("Error addResist ",i)}}function uq(n,e,t){try{const i=new Pt,r=new Pt,s=new v0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.leds.push(s)}catch(i){console.log("Error addLed ",i)}}function fq(n,e){try{const t=e.length;if(t==0)return;const i=e[0].path.length;if(i==0)return;for(let r=0;r<t;r++){const s=e[r];for(let o=0;o<i;o++){const a=s.path[o];aq(n,a)}}}catch(t){console.log("Error makeNodes ",t)}}function dq(n,e){try{const t=e.length;if(t==0||e[0].path.length<2)return;for(let r=0;r<t;r++){const s=e[r],o=s.path[0],a=s.path[1];o.type=="V"&&!(r&1)||lq(n,o,a)}}catch(t){console.log("Error makeSources ",t)}}function hq(n,e){try{const t=e.length;if(t==0||e[0].path.length<4)return;for(let r=0;r<t;r++){const s=e[r],o=s.path[2],a=s.path[3];o.type=="V"&&!(r&1)||cq(n,o,a)}}catch(t){console.log("Error makeResists ",t)}}function pq(n,e){try{const t=e.length;if(t==0)return;const i=e[0].path.length;if(i<2)return;const r=e[t-1].path[0].n+1;for(let s=0;s<t;s++){const o=e[s];for(let a=1;a<i-1;a++){const l=o.path[a],f=o.path[a+1];oq(n,l,f)}}}catch(t){console.log("Error makePaths ",t)}}function mq(n,e){return n.y-e.y}function gq(n,e){return n.S0.y-e.S0.y}function yq(n,e){try{const t=e.length;if(t<2)return;const i=e[0].path.length;if(i<3)return;const r=[];for(let s=0;s<i;s++){const o=[];r.push(o)}for(let s=1;s<i-1;s++){const o=[];for(let a=0;a<t;a++){const l=e[a].path[s];o.push(l)}o.sort(mq);for(let a=0;a<t-1;a++){const l=o[a],f=o[a+1];if(l.n!=f.n&&l.y==f.y&&l.dy>0){const d=e[l.i].path[l.x-1],h=e[f.i].path[f.x-1],p=new c3(d,h);r[s-1].push(p);const m=e[l.i].path[l.x+1],g=e[f.i].path[f.x+1],v=new c3(g,m);r[s+1].push(v)}}}for(let s=0;s<i;s++){const o=r[s],a=o.length;if(a>0){o.sort(gq);for(let l=0;l<a;l++){const f=o[l];uq(n,f.S0,f.S1)}}}}catch(t){console.log("Error makeLeds ",t)}}function vq(n=16,e=4){let t=new aa;try{n=Cg(n,1,iq),e=Cg(e,1,rq);const i=(e&1)==0,r=n+e*2,s=n*2+e*2;let o=i?1:3,a=i?-1:1,l=0;const f=o-1,d=[];for(let g=0;g<e;g++)d.push(new Ka(d.length,l,o,a,"E")),a*=-1,l+=1,o+=2;o+=1;for(let g=0;g<n;g++)d.push(new Ka(d.length,l,o,a,"V")),a*=-1,d.push(new Ka(d.length,l,o,a,"V")),a*=-1,l+=1,o+=4;o-=1;for(let g=0;g<e;g++)d.push(new Ka(d.length,l,o,a,"E")),a*=-1,l+=1,o+=2;const h=o-1,p=e*2+3,m=[];for(let g=0;g<s;g++)m.push(new sq);for(let g=0;g<s;g++)m[g].save(d[g]);for(let g=0;g<4;g++)for(let v=0;v<s;v++)d[v].advance(),m[v].save(d[v]);for(let g=0;g<p;g++)for(let v=0;v<s;v++)d[v].glide(g,f,h),m[v].save(d[v]);fq(t,m),dq(t,m),hq(t,m),pq(t,m),yq(t,m),t.calcLimits(),t.count=r}catch(i){console.log("Error buildCircuit3b ",i),t=new aa}return t}function xq({ResetRef:n,Orientation:e,Scanning:t}){console.log("Layout3");const i=Qs("VCount",1),r=Qs("ECount",4),{VCount:s}=Js({VCount:{value:i,min:1,max:8,step:1}}),{ECount:o}=Js({ECount:{value:r,min:1,max:8,step:1}});let a=vq(s,o);return Ge(_0,{ResetRef:n,Circuit:a,Orientation:e,Scanning:t})}const _q=8,wq=8;class Ys{constructor(e,t,i,r,s){this.i=e,this.n=t,this.y=i,this.dy=r,this.type=s,this.x=0}static copy(e){let t=new Ys(e.i,e.n,e.y,e.dy,e.type);return t.x=e.x,t}advance(){this.x+=1}glide(e,t,i){this.x+=1,!(this.type=="E"&&e<1)&&(this.y+=this.dy,(t>this.y||this.y>i)&&(this.dy*=-1,this.y+=this.dy*2))}}class Sq{constructor(){this.path=[]}save(e){try{this.path.push(Ys.copy(e))}catch(t){console.log("Error Path.save ",t)}}}class bq{constructor(e,t){this.S0=Ys.copy(e),this.S1=Ys.copy(t)}}function Mq(n,e){let t=!1;try{const i=n.length;for(let r=0;r<i;r++){const s=n[r];if(s.S0.n==e.S0.n&&s.S1.n==e.S1.n){t=!0;break}}}catch(i){console.log("Error isPairInStore ",i)}return t}function Eq(n,e,t){try{const i=new Pt,r=new Pt,s=new ds;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.wires.push(s)}catch(i){console.log("Error addWireSegment ",i)}}function Tq(n,e){try{const t=new Pt;t.obj.i=e.i,t.obj.n=e.n,t.obj.x=e.x,t.obj.y=e.y,n.nodes.push(t)}catch(t){console.log("Error addNode ",t)}}function Cq(n,e,t){try{const i=new Pt,r=new Pt,s=new g0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.sources.push(s)}catch(i){console.log("Error addSource ",i)}}function Aq(n,e,t){try{const i=new Pt,r=new Pt,s=new y0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.resists.push(s)}catch(i){console.log("Error addResist ",i)}}function Pq(n,e,t){try{const i=new Pt,r=new Pt,s=new v0;i.obj.set(e.i,e.n,e.x,e.y),r.obj.set(t.i,t.n,t.x,t.y),ut(i,s),ut(r,s),n.nodes.push(i),n.nodes.push(r),n.leds.push(s)}catch(i){console.log("Error addLed ",i)}}function Rq(n,e){try{const t=e.length;if(t==0)return;const i=e[0].path.length;if(i==0)return;for(let r=0;r<t;r++){const s=e[r];for(let o=0;o<i;o++){const a=s.path[o];Tq(n,a)}}}catch(t){console.log("Error makeNodes ",t)}}function Lq(n,e){try{const t=e.length;if(t==0||e[0].path.length<2)return;for(let r=0;r<t;r++){const s=e[r],o=s.path[0],a=s.path[1];o.type=="V"&&!(r&1)||Cq(n,o,a)}}catch(t){console.log("Error makeSources ",t)}}function Iq(n,e){try{const t=e.length;if(t==0||e[0].path.length<4)return;for(let r=0;r<t;r++){const s=e[r],o=s.path[2],a=s.path[3];o.type=="V"&&!(r&1)||Aq(n,o,a)}}catch(t){console.log("Error makeResists ",t)}}function kq(n,e){try{const t=e.length;if(t==0)return;const i=e[0].path.length;if(i<2)return;const r=e[t-1].path[0].n+1;for(let s=0;s<t;s++){const o=e[s];for(let a=1;a<i-1;a++){const l=o.path[a],f=o.path[a+1];Eq(n,l,f)}}}catch(t){console.log("Error makePaths ",t)}}function u3(n,e){return n.y-e.y}function Dq(n,e){return n.S0.y-e.S0.y}function Oq(n,e){try{const t=e.length;if(t<2)return;const i=e[0].path.length;if(i<3)return;const r=[],s=[];for(let a=0;a<i;a++){r.push(0);const l=[];s.push(l)}for(let a=1;a<i-1;a++){const l=[];for(let f=0;f<t;f++){const d=e[f].path[a];l.push(d)}l.sort(u3);for(let f=0;f<t-1;f++){const d=l[f],h=l[f+1];if(d.n!=h.n&&d.y==h.y){r[a-1]=1,r[a+1]=1;break}}}const o=[];for(let a=i-1;a>=0;a--)if(r[a]>0){const f=[];for(let d=0;d<t;d++){const h=e[d].path[a];f.push(h)}f.sort(u3);for(let d=0;d<t-1;d++){const h=f[d],p=f[d+1];if(h.n==p.n)continue;const m=new bq(h,p);Mq(o,m)==!1&&(o.push(m),s[a].push(m))}}for(let a=0;a<i;a++){const l=s[a],f=l.length;if(f>0){l.sort(Dq);for(let d=0;d<f;d++){const h=l[d];Pq(n,h.S0,h.S1)}}}}catch(t){console.log("Error makeLeds ",t)}}function Nq(n=16,e=4){let t=new aa;try{n=Cg(n,1,_q),e=Cg(e,1,wq);const i=(e&1)==0,r=n+e*2,s=n*2+e*2;let o=i?1:3,a=i?-1:1,l=0;const f=o-1,d=[];for(let g=0;g<e;g++)d.push(new Ys(d.length,l,o,a,"E")),a*=-1,l+=1,o+=2;o+=1;for(let g=0;g<n;g++)d.push(new Ys(d.length,l,o,a,"V")),a*=-1,d.push(new Ys(d.length,l,o,a,"V")),a*=-1,l+=1,o+=4;o-=1;for(let g=0;g<e;g++)d.push(new Ys(d.length,l,o,a,"E")),a*=-1,l+=1,o+=2;const h=o-1,p=e*2+3,m=[];for(let g=0;g<s;g++)m.push(new Sq);for(let g=0;g<s;g++)m[g].save(d[g]);for(let g=0;g<4;g++)for(let v=0;v<s;v++)d[v].advance(),m[v].save(d[v]);for(let g=0;g<p;g++)for(let v=0;v<s;v++)d[v].glide(g,f,h),m[v].save(d[v]);Rq(t,m),Lq(t,m),Iq(t,m),kq(t,m),Oq(t,m),t.calcLimits(),t.count=r}catch(i){console.log("Error buildCircuit4 ",i),t=new aa}return t}function zq({ResetRef:n,Orientation:e,Scanning:t}){console.log("Layout4");const i=Qs("VCount",1),r=Qs("ECount",4),{VCount:s}=Js({VCount:{value:i,min:1,max:8,step:1}}),{ECount:o}=Js({ECount:{value:r,min:1,max:8,step:1}});let a=Nq(s,o);return Ge(_0,{ResetRef:n,Circuit:a,Orientation:e,Scanning:t})}function Fq({ResetRef:n}){console.log("TopLayout");const e=Qs("Layout","circuit1"),t=Qs("Orientation",0),i=Qs("Scanning","stopped"),{Layout:r}=Js({Layout:{value:e,options:{circuit1:"circuit1",circuit2:"circuit2",circuit3:"circuit3",circuit4:"circuit4"}}}),{Orientation:s}=Js({Orientation:{value:t,min:0,max:1,step:1}}),{Scanning:o}=Js({Scanning:{value:i,options:{stopped:"stopped",slow:"slow",fast:"fast"}}});let a=Ge(ys,{});return r=="circuit1"&&(a=Ge($Y,{ResetRef:n,Orientation:s,Scanning:o})),r=="circuit2"&&(a=Ge(nq,{ResetRef:n,Orientation:s,Scanning:o})),r=="circuit3"&&(a=Ge(xq,{ResetRef:n,Orientation:s,Scanning:o})),r=="circuit4"&&(a=Ge(zq,{ResetRef:n,Orientation:s,Scanning:o})),a}const Bq=tx.createRoot(document.querySelector("#root"));Bq.render(Ge(Uq,{}));function Uq(){console.log("Top1.");const n=L.useRef(0),e=s=>{console.log("missed"),n.current++},t=0,i=0,r=Math.PI/2;return hs(L.StrictMode,{children:[Ge(mW,{}),hs(fV,{dpr:[1,2],onPointerMissed:e,orthographic:!0,camera:{position:[0,0,100],zoom:100,up:[0,1,0],far:1e3},children:[Ge(cW,{makeDefault:!0,minAzimuthAngle:i-t,maxAzimuthAngle:i+t,minPolarAngle:r-t,maxPolarAngle:r+t}),Ge(Fq,{ResetRef:n})]})]})}
//# sourceMappingURL=index-78360b5d.js.map
